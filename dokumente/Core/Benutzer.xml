<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN"
"http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd">
<chapter id="Administration" lang="de-DE" revision="$Revision$"
         status="draft">
  <!-- $Id$ -->

  <chapterinfo>
    <releaseinfo>$Revision$</releaseinfo>

    <date>$Date$</date>
  </chapterinfo>

  <title>Administration</title>

  <section>
    <title>Benutzer- und Rechteverwaltung</title>

    <para>Als Content Management System verfügt PostNuke über ein
    umfangreiches Benutzer- und Gruppenmanagement. Vor allem für die korrekte
    Anwendung des Berechtigungssystems ist ein Verständnis über die sich
    ergebenden Zusammenhänge sehr wichtig.</para>

    <section>
      <title>Benutzermanagement</title>

      <para>In der Standard-Auslieferung von Postnuke gibt es zunächst drei
      Benutzergruppen:</para>

      <itemizedlist>
        <listitem>
          <para>unregistrierte</para>
        </listitem>

        <listitem>
          <para>Users</para>
        </listitem>

        <listitem>
          <para>Admins</para>
        </listitem>
      </itemizedlist>

      <para>Jeder Besucher ist zunächst einmal Mitglied der
      <emphasis>unregistrierten</emphasis> Benutzer, erst nach seiner
      Anmeldung (bzw. der Registrierung) ist er Mitglied der
      <emphasis>Users-Gruppe</emphasis>. Der Administrator der Seite wird
      bereits während der Installation der <emphasis>Admin-Gruppe</emphasis>
      zugewiesen. Diese System-Gruppen sollten weder umbenannt oder gelöscht
      werden! <note>
          <para>Bei Upgrades von älteren Version von PostNuke, PHPNuke oder
          myPHPNuke werden zusätzlich Gruppen gemäß den alten Autorenrechten
          eingericht, allerdings müssen die Rechte neu zugewiesen
          werden.</para>
        </note>Zur individuellen Verwaltung kann man im Administrationsbereich
      -&gt; Gruppen beliebig viele weitere Gruppen anlegen, Benutzer zuordnen
      und ihnen über das Berechtigungssystem Rechte zuweisen. Ein Benutzer
      kann dabei auch mehreren Gruppen zugeordnet werden:</para>

      <variablelist>
        <varlistentry>
          <term>neue Gruppe hinzufügen</term>

          <listitem>
            <para>dient dazu weitere, individuelle Gruppen einzurichten, denen
            später Mitglieder zugewiesen werden können</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>Gruppenname</term>

          <listitem>
            <para>listet die bereits bestehenden Gruppen auf, durch einen
            Klick auf den jeweiligen Namen kann man die Mitgliederliste dieser
            Gruppe aufrufen und editieren (Benutzer zu Gruppe hinzufügen |
            löschen | Gruppe modifizieren) Die Standardgruppen 'Admins' und
            'Users' sollten nicht umbenamt oder gelöscht werden!</para>
          </listitem>
        </varlistentry>
      </variablelist>

      <para>Unter 'dynamische Daten' können eigene Felder für das Kundenprofil
      erstellt werden. Diese müssen dann aber auch in den Sprachdateien
      entsprechend ergänzt werden.</para>
    </section>

    <section>
      <title>Zugriffsrechte</title>

      <para>Vielen Benutzern erscheint das Rechtesystem auf den ersten Blick
      ziemlich kompliziert und verwirrend. Es ist nicht mehr so einfach zu
      administrieren wie in früheren Versionen, bietet aber umsomehr
      Möglichkeiten, wenn man es richtig einsetzt. Das Berechtigungssystem
      erlaubt Administratoren die Inhalte ihrer Seite zu schützen und den
      Zugang zu allen Bereich individuell einzustellen. Es unterscheidet neun
      unterschiedliche Stufen:</para>

      <orderedlist>
        <listitem>
          <para>keines</para>
        </listitem>

        <listitem>
          <para>Übersicht</para>
        </listitem>

        <listitem>
          <para>lesen</para>
        </listitem>

        <listitem>
          <para>kommentieren</para>
        </listitem>

        <listitem>
          <para>moderieren</para>
        </listitem>

        <listitem>
          <para>editieren</para>
        </listitem>

        <listitem>
          <para>hinzufügen</para>
        </listitem>

        <listitem>
          <para>löschen</para>
        </listitem>

        <listitem>
          <para>administrieren</para>
        </listitem>
      </orderedlist>

      <para>Die sich ergebenden Berechtigungen sind dabei modulspezifisch,
      d.h. <emphasis>der Modulautor entscheidet welche Berechtigung für eine
      bestimmte Aktion notwendig ist</emphasis>. Generell gilt aber, dass
      Berechtigungen kumulativ sind, d.h. alle niedriegeren Berechtigungen
      beinhalten ('kommentieren' schliesst also automatisch auch 'lesen' mit
      ein).</para>

      <bridgehead>Vorgehensweise bei der Berechtigungsvergabe</bridgehead>

      <para>Zuerst sollte man eine Gruppe erstellen, für die die
      Berechtigungen gelten sollen und dann die Mitglieder zuordnen. Dieser
      Gruppe kann man im folgenden dann die gewünschten Berechtigungen
      zuweisen.</para>

      <para>Ein Beispiel: Erstellung einer Gruppe 'Subadmin', die News
      administrieren kann, Schritt für Schritt erklärt: Zuerst die Gruppe
      'Subadmin' anlegen und gewünschte Benutzer zuordnen. Dann unter
      Zugriffsrechte auf neues Gruppenrecht klicken.</para>

      <itemizedlist>
        <listitem>
          <para>Gruppe -&gt; Subadmin</para>
        </listitem>

        <listitem>
          <para>Komponente -&gt; Stories::Story</para>
        </listitem>

        <listitem>
          <para>Instanz -&gt; .*</para>
        </listitem>

        <listitem>
          <para>Zugriffsrecht -&gt; administrieren</para>
        </listitem>
      </itemizedlist>

      <para>(eine Liste der vorhandenen Komponenten wird übrigens bei Klick
      auf den Titel in einem Pop-Up-Fenster eingeblendet) Man beachte: diese
      Einstellung räumt der Gruppe Adminberechtigung für das Modul Stories
      ein! Jetzt muss man noch sicherstellen, dass die Reihenfolge der
      Berechtigungen korrekt ist. Zugriffsberechtigungen werden linear von
      oben nach unten in der Liste angewendet - Rogue nimmt die erste passende
      Berechtigung und wendet diese an - wenn also eine Zeile
      Adminberechtigung einräumt kann dies nicht durch spätere Zeile
      eingeschränkt werden! In den meisten Fällen ist die oberste
      Berechtigung:</para>

      <itemizedlist>
        <listitem>
          <para>Admins | .* | .* | administrieren</para>
        </listitem>
      </itemizedlist>

      <para>(also dürfen alle Benutzer in der Gruppe Admin alles) Die neu
      eingerichtet Subadmin-Gruppe sollte also UNTER diese Berechtigung
      gestellt werden, damit keine spätere Zeile eventuelle Einschränkungen
      vornimmt.</para>

      <para>Beispiel:</para>

      <itemizedlist>
        <listitem>
          <para>Subadmin|Stories::|.*|administrieren</para>
        </listitem>

        <listitem>
          <para>Users|.*|.*|kommentieren</para>
        </listitem>
      </itemizedlist>

      <para>erlaubt Mitglieder der Subadmin-Gruppe die Administration des
      Story-Bereiches - wenn man nun die beiden Zeilen in der Reihenfolge
      umstellt, macht die Berechtigung schon keinen Sinn mehr, da die
      Subadmins als Mitglieder der Gruppe 'Users' nur das Kommentarrecht
      eingeräumt bekommen. Durch den Einsatz der 'Instanz' in den
      Berechtigungen kann man die Einstellungen sehr detailliert einrichten -
      folgende Beispiele sollen dies verdeutlichen: Der Link zur
      'Administration' im Hauptmenü soll nur für Administratoren angezeigt
      werden.</para>

      <itemizedlist>
        <listitem>
          <para>alle
          Gruppen|Menublock::|Hauptmenü:Administration:|keines</para>
        </listitem>
      </itemizedlist>

      <para>Dabei ist wichtig, dass das Hauptmenü auch tatsächlich 'Hauptmenü'
      heisst und dass diese Zugriffsberechtigung direkt UNTER denen der
      Admingruppen steht (in der default-Installation ist das eigentlich schon
      eingetragen - und zwar für das Main Menu) Wenn nun mehrer Links
      'gesperrt' werden sollen, ist die Angabe wie folgt:</para>

      <itemizedlist>
        <listitem>
          <para>alle
          Gruppen|Menublock::|Hauptmenü:(Administration|Link1|Link2):|keines</para>
        </listitem>
      </itemizedlist>

      <para>(das | (Pipe-) Zeichen fungiert als Trenner der einzelnen mit
      Klammern umschlossenen Einträge) Sehr häufig wird gefragt, wie man
      anonymen Benutzern die Teilnahme an Umfragen bzw. das Kommentieren von
      Beiträgen ermöglichen kann:</para>

      <itemizedlist>
        <listitem>
          <para>unregistrierte Gruppen|Polls::|.*|kommentieren</para>
        </listitem>

        <listitem>
          <para>unregistrierte Gruppen|Stories::Story|.*|kommentieren</para>
        </listitem>
      </itemizedlist>

      <para>Diese Zeilen müssen natürlich ÜBER die normalerweise letzte Zeile
      in der die allgemeinen Rechte für anonyme Benutzer auf lesen gesetzt
      werden.</para>

      <warning>
        <para>Ein fehlerhaft konfiguriertes Berechtigungssystem kann dazu
        führen, dass z.B. anonyme Benutzer auf der Postnuke-Site Inhalte
        aktualisieren, hinzufügen oder sogar löschen können! Wenn man
        allerdings sorgfältig vorgeht und die bereits bestehenden
        Berechtigungen (und auch ihre Reihenfolge in der Liste) nicht ändert,
        sollte das allerdings nicht passieren... Wenn man sich trotz aller
        Warnungen einmal selber ausgesperrt hat, kann das PostNuke Swiss Army
        Knife Tool die Berechtigungen wieder auf den Standard
        zurücksetzen.</para>
      </warning>

      <para><tip>
          <title>User oder Gruppenrechte?</title>

          <para>Eines vorweg: die Rechte sind in beiden fällen die Gleichen.
          Einziger Unterschied besteht in der Rangfolge der Rechte:
          <emphasis>Userrechte überschreiben immer
          Gruppenrechte</emphasis>.</para>

          <para>Gruppen-Rechte sollten generell festgelegt werden.
          Gruppenrechte beziehen sich auf alle Mitglieder einer Gruppe
          wohingegen Benutzerrechte sich auf einen speziellen Benutzer
          beziehen. Sie regeln eigentlich den grundsätzlichen Zugang zur
          Seite! Die User-Rechte legen die Freiheitsgrade des einzelnen Users
          fest.</para>

          <para>Normalerweise sollten Gruppenrechte eingesetzt werden und nur
          in Ausnahmefällen sollten Benutzerrechte zusätzlich gesetzt werden,
          damit ein spezieller Benutzer zusätzliche Rechte über seine
          Gruppenrechte hinaus erhält.</para>

          <para>Die Festlegung der einzelnen Userrechte geht weiter und ist im
          Grunde detaillierter (insofern sie eben einen User betrifft und
          nicht eine Gruppe aus mehreren Usern)</para>

          <para>Deshalb sollten die User-Rechte auch erst nach den
          Gruppenrechten festgelegt werden; Sie bestimmen die Möglichkeiten,
          wenn ein bestimmter User etwas machen können sollte, was mit dem
          Rechtsstatus seiner aktuellen Gruppenzugehörigkeit nicht möglich
          ist.</para>

          <para>Man sollte mit den Gruppenrechten zuerst arbeiten und später
          dann die User-Rechte zur Feinabstimmung hinzuziehen!</para>
        </tip></para>
    </section>
  </section>
</chapter>