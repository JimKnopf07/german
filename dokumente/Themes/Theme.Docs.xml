<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN"
"http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd">
<article lang="de-DE" revision="$Revision$" status="draft">
  <!-- $Id$ -->

  <title>Layoutentwicklung in Postnuke .7x</title>

  <articleinfo>
    <releaseinfo>$Revision$</releaseinfo>

    <date>$Date$</date>
  </articleinfo>

  <section>
    <title>Theme Entwicklung</title>

    <para>Dem weit verbreiteten Vorurteil, daß alle PostNuke-Sites gleich
    aussähen, tritt wohl schon unser Layout von Bernd entgegen. Das
    Theme-Design nicht so schwer ist, scheint viele Sitebetreiber nicht zu
    interessieren. Sie setzen nur wenig abgewandelte Standartthemes ein, denen
    man das Postnuke-CMS auf den ersten Blick ansieht.</para>

    <para>Neben einem Auge für Style und gängigen Kenntnissen im Umgang mit
    Grafikprogrammen, gehört natürlich auch HTML-Wissen und Ahnung von den
    <emphasis role="bold">PostNuke-Variablen</emphasis> zur Grundausstattung
    eines Theme-Designers.</para>

    <para><emphasis role="bold">10 grundlegende Dinge, die Du über Themes
    wissen solltest</emphasis></para>

    <para>engl. Original: Poor Richard's Guide to PostNuke - Part 1</para>

    <para><emphasis role="bold">1. Themes sind "Skins" für das Postnuke-System
    und bestimmen das Layout der Site.</emphasis> Sie bestehen aus einem
    Verzeichnis und mindestens der themes.php-Datei. Desweiteren gibt es ein
    Verzeichnis für die verwendeten Bilder und eines für die zwei
    Style-Sheet-Dateien. Darüberhinaus können Themes weitere Dateien
    enthalten. Über das Theme kannst Du die Fraben, das graphische Layout,
    Schriftarten und das gesamte Look&amp;Feel der Site anpassen. Außerdem
    kannst Du dem User die Wahl des Themes überlassen. Diese Funktion läßt
    sich in den Einstellungen ein- uns ausschalten.</para>

    <para><emphasis role="bold">2. Themes funktionieren nicht auf jeder
    Postnuke-Version.</emphasis> Zum Beispiel tun einige nur unter .6x ihre
    Arbeit, während andere nur unter .7x arbeiten. Zum Teil funktionieren die
    Themes auch nur bei Systemen neuer als .71x. Damit die Angelegenheit nicht
    allzu einfach wird, kann man den Themes von außen nicht einfach ansehen,
    für welche Version sie gemacht sind. Dazu muß man leider in den Quelltext
    schauen und wissen, nach was man suchen muß. (Siehe auch 7.)</para>

    <para><emphasis role="bold">3. Es gibt hunderte von Themes.</emphasis>
    Über die offizielle Postnuke-Homepage aber auch über andere Seiten kannst
    Du sie finden. Es gibt auch "Themes Packs" - Zusammenstellungen von
    dutzenden Themes. Aber Vorsicht! Auch wenn sie als ".7x kompatible"
    ausgezeichnet sind, muß das nicht für alle stimmen.</para>

    <para><emphasis role="bold">4. Themes, die nicht funktionieren, müssen
    nicht unbedingt komplett versagen.</emphasis> Wenn Du nur wenige Features
    von Postnuke benutzt, kann es sein, daß auch inkompatible Themes
    funktionieren und erst den Dienst bei erweitertem Einsatz versagen.</para>

    <para><emphasis role="bold">5. Themes sind oft das erste, an dem sich
    Postnuke-Newbies probieren.</emphasis> Oft stellen sie das Ergebnis ihrer
    ersten Arbeit öffentlich zur Verfügung, bevor sich 100% fehlerfrei sind.
    Das ist aber nicht so schlimm, wenn man von der Kritik der
    Postnuke-Community kann man viel lernen. Versuch aber trotzdem das Theme
    ausgibig zu testen, bevor Du es anderen User auf einer Live-Site zur
    Verfügung stellst.</para>

    <para><emphasis role="bold">6. Das Verzeichnis, daß die theme.php enthält
    bestimmt den Namen des Themes.</emphasis> Auf diese Art uns Weise findet
    das System die Themes und stellt es dem Administrator, oder den Usern zur
    Verfügung. Einige Themes tragen den Theme-Namen hart verdrahtet in der
    theme.php - alleine das Verzeichnis umzubenennen würde das Theme
    funktionsunfähig machen. In diesem Fall müßte der Eintrag in der
    Themes.php ebenfalls angepaßt werden.</para>

    <para><emphasis role="bold">7. Wie erkennt man, für welche Version ein
    theme designt wurde?</emphasis> Den Unterschied zwischen .6x und .7x
    Themes ist leicht zu erkennen speziellere Anpassungen für einzelne
    Versionen lassen sich nicht so einfach erkennen. Öffne die theme.php in
    einem Editor und such die Funktion "themearticle".</para>

    <para>PN .6x Themes: function themearticle ($aid, $informant, $datetime...
    ...$topicimage, $topictext)</para>

    <para>PN .7.0.x .71 and .711 Themes: function themearticle ($_deprecated,
    $_deprecated... ...$links, $info, $preformat)</para>

    <para>Für eine Unterscheidung von .71 und .711-Themes mußt Du einmal die
    Funktion "themeheader" suchen. Am Anfang dieser Funktion gibt es eine
    "globals"-Deklaration. Findet Du hier die Wörter $sitename, $slogan,
    $banners, $user und $cookie appear, dann ist dieses Theme für Postnuke
    .70x designed. Gibt es diese Wörter dort nicht, funktioniert das Theme mit
    alles Versionen ab .71 . Ab Postnuke .8 soll das Themes System final
    überarbeitet werden, so daß die alten Themes vermutlich Ärger bereiten
    könnten.</para>

    <section remap="h2">
      <title>Was gehört alles zu einem Theme?</title>

      <para>Der Startpunkt jeder Theme-Entwicklung ist diese Themes
      Verzeichnis. Es befindet sich im Hauptverzeichnis jeder Postnuke-Site.
      Unter <filename>/themes</filename> befindet sich nach der Installation
      die mitgelieferten Standard-Themes. Hierhier sollten aber auch von
      Fremd-Designern erstellte Layouts und Eigeneentwürfe abgelegt
      werden.</para>

      <para>Jedes Theme hat ein eigenes Verzeichnis ( z.B.
      <filename>/themes/<replaceable>beispiel</replaceable>/</filename> ), das
      den Namen des Themes widergibt. In diesem Verzeichnis liegen alle
      Dateien, die für das Aussehen der Site benötigt werden.</para>

      <para>Im Hauptverzeichnis befindet sich das Herzstück des Layouts - die
      <filename>theme.php</filename>. In dieser Datei wird durch bestimmte
      Funktionen das Aussehen, z.B. der Blöcke oder der Artikle festgelegt.
      Dazu aber später mehr.</para>

      <para>Überlicherweise gibt es desweiteren ein Verzeichnis für die
      dazugehören Cascading Style-Sheets (CSS) mit dem Namen "style" (d.h.
      <filename>/themes/<replaceable>beispiel</replaceable>/style/</filename>)
      - die Bilder befinden sich in
      <filename>/themes/<replaceable>beispiel</replaceable>/images/</filename>
      und layout-spezifische Übersetzungen in
      <filename>/themes/<replaceable>beispiel</replaceable>/lang/</filename>.
      Natürlich kann man noch ein docs und jedes beliebige andere Verzeichnis
      erstellen.</para>

      <para><filename>/themes/<replaceable>beispiel</replaceable>/style/</filename></para>

      <para><emphasis role="bold">Die Style-Sheets</emphasis></para>

      <para>Netscape und Internet-Explorer behandeln Style-Sheet-Angaben
      teilweise unterschiedlich, aus diesem Grund werden die grundsätzlichen
      Styles (mindestens: pn-normal, pn-sub und pn-title) in der
      <filename>styleNN.cs</filename>s festgelegt - in die
      <filename>style.css</filename> kommen dann lediglich die Definitionen,
      die <emphasis role="bold">nicht</emphasis> vom Netscape Navigator
      unterstützt werden.</para>

      <para><filename>/themes/<replaceable>beispiel</replaceable>/images/</filename></para>

      <para><emphasis role="bold">Die Grafiken</emphasis></para>

      <para>Spezielles gibt es bei den Grafiken eigentlich nicht zu beachten.
      Natürlich sollten allen Bilder in den Internet-üblichen Formaten .gif,
      .jpg oder .png vorliegen und möglichst dateigrößen-optimiert sein. Soll
      das Layout anderen Usern zur Verfügung gestellt werden, ist zu bedenken,
      daß evtl. PhotoShop-Vorlagen beiliegen, damit eigene Schriftzüge
      eingefügt werden können.</para>

      <para><filename>/themes/<replaceable>beispiel</replaceable>/lang/</filename></para>

      <para><emphasis role="bold">Die Sprachdateien</emphasis> Nicht nur
      Module, sondern auch Themes lassen sich mehrsprachig designen...</para>

      <para><filename>/themes/<replaceable>beispiel</replaceable>/docs/</filename></para>

      <para><emphasis role="bold">Die Dokumentation</emphasis> Hier ist der
      richtige Ort für Credits und Tipps zum Anpassen des Themes.</para>

      <para>Die Ausgabe einer PostNuke-Seite setzt sich wie folgt
      zusammen:</para>

      <variablelist>
        <varlistentry>
          <term><markup>&lt;html&gt;</markup>-Tag,
          <markup>&lt;head&gt;</markup>-Tag,
          <markup>&lt;title&gt;</markup>-Tag,
          <markup>&lt;meta&gt;</markup>-Tags, Einbinden von
          <filename>styleNN.css</filename> und
          <filename>style.css</filename></term>

          <listitem>
            <para><filename>header.php</filename> (PostNuke-Core)</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>evtl. weitere Tags für den
          <markup>&lt;head&gt;</markup>-Bereich, schließendes
          <markup>&lt;/head&gt;</markup>-Tag,
          <markup>&lt;body&gt;</markup>-Tag, obere Leiste mit Bildern,
          Werbebanner, Navigationslinks</term>

          <listitem>
            <para>Funktion <function>themeheader()</function> in
            <filename>theme.php</filename></para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>Linke Blöcke anzeigen</term>

          <listitem>
            <para>Funktion <function>themeheader()</function> in
            <filename>theme.php</filename> (durch den Aufruf von
            <function>blocks('left');</function>)</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>Formatierung der linken Blöcke</term>

          <listitem>
            <para>Funktion
            <function>themesidebox(<varname>$block</varname>)</function> in
            theme.php</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>Mittlere Blöcke anzeigen</term>

          <listitem>
            <para>Funktion <function>themeheader()</function> in
            <filename>theme.php</filename> (durch den Aufruf von
            <function>blocks('center');</function>)</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>Formatierung der mittleren Blöcke</term>

          <listitem>
            <para>Funktion
            <function>themesidebox(<varname>$block</varname>)</function> in
            <filename>theme.php</filename></para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>Ausgabe des Hauptbereichs</term>

          <listitem>
            <para>Aufgabe des Moduls; mit Hilfe der Funtionen
            <function>OpenTable()</function>,
            <function>CloseTable()</function> bzw.
            <function>OpenTable2()</function> und
            <function>CloseTable2()</function> in
            <filename>theme.php</filename>.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>Rechte Blöcke anzeigen</term>

          <listitem>
            <para>Funktion <function>themefooter()</function> in
            <filename>theme.php</filename> (durch den Aufruf von
            <function>blocks('right');</function>)</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>Formatierung der linken Blöcke</term>

          <listitem>
            <para>Funktion
            <function>themesidebox(<varname>$block</varname>)</function> in
            theme.php</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>Ausgabe der Fußzeile</term>

          <listitem>
            <para>Funktion <function>themefooter()</function> in
            <filename>theme.php</filename> (durch den Aufruf von
            <function>footmsg();</function>)</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>Schließendes &lt;/html&gt;-Tag</term>

          <listitem>
            <para><filename>footer.php</filename> (PostNuke-Core)</para>
          </listitem>
        </varlistentry>
      </variablelist>
    </section>
  </section>

  <section>
    <title>Die Funktionen in der theme.php</title>

    <para>Das gesamte Aussehen wird übver die Datei
    <filename>theme.php</filename> gesteuert.</para>

    <section remap="h4">
      <title><emphasis role="bold">Variablen</emphasis></title>

      <para>Am Anfang jedes Themes gibt es mehrere Variablen:</para>

      <variablelist>
        <varlistentry>
          <term><varname>$thename</varname></term>

          <listitem>
            <para>[String] Name des Themes</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><varname>$postnuke_theme</varname></term>

          <listitem>
            <para>[Boolean] Nur bei PHP-Nuke kompatiblen Themes auf false
            setzen</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><varname>$bgcolorX</varname></term>

          <listitem>
            <para>Hier kann man Hintergrundfarben festlegen, die man
            wiederverwenden will.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><varname>$sepcolorX</varname></term>

          <listitem>
            <para>Hier kann man Trennerfarben festlegen, die man
            wiederverwenden will.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><varname>$textcolorX</varname></term>

          <listitem>
            <para>Hier kann man Textfarben festlegen, die man wiederverwenden
            will.</para>
          </listitem>
        </varlistentry>
      </variablelist>

      <para>Zusätzlich wird die Funktion
      <function>themes_get_language();</function> aufgerufen, um die aktuell
      eingestellte Sprache zu erfragen.</para>
    </section>

    <section>
      <title><function>function themeheader()</function>, <function>function
      themefooter()</function></title>

      <para>Die Funktionen themeheader() und themefooter() bilden den
      "Rahmen", in dem sich eine PostNuke-Seite aufbaut.</para>

      <para>Typischerweise wird Tabelle aufgemacht, in deren "mittlerer" Zelle
      das Modul seine Ausgabe schreibt. In themefooter() findet man dann das
      Ende der Tabelle.</para>

      <para>In den meisten Fällen bedeutet das, daß in der Funktion
      <function>themeheader()</function> eine (unsichtbare) Tabelle aufgebaut
      wird, die den Kopf, sowie sie rechten, linken und mittleren Blöcke
      enthält. Nachdem diese Funktion abgearbeitet wurde, wird die Ausgabe,
      die das Modul erzeugt, an den Browser übermittelt.</para>

      <para>Danach kommt die Funktion <function>themefooter()</function>. Hier
      wird die Seite geschlossen - oft werden auch erst hier die rechten
      Blocks aufgerufen, um Einfluß darauf zu haben, ob bei bestimmten Modulen
      überhaupt rechte Blocks angezeigt werden sollen, oder nicht. Mit diem
      Aufruf footmsg(); wird die voreingestellte Footermessage
      eingebunden.</para>

      <para>Um die Blöcke an der richtigen Stelle einzufügen, können diese
      Aufrufe genutzt werden:</para>

      <itemizedlist>
        <listitem>
          <para>blocks('left');</para>
        </listitem>

        <listitem>
          <para>blocks('center');</para>
        </listitem>

        <listitem>
          <para>blocks('right');</para>
        </listitem>
      </itemizedlist>
    </section>

    <section>
      <title><function>function themeindex ($_deprecated, $_deprecated,
      $_deprecated, $_deprecated, $_deprecated, $_deprecated, $_deprecated,
      $_deprecated, $_deprecated, $_deprecated, $_deprecated, $_deprecated,
      $info, $links, $preformat)</function></title>

      <para>Bestimmt die Anzeige von Artikeln auf der Startseite. Über die
      Arrays <filename>$info</filename>, <filename>$links</filename> und
      <filename>$preformat</filename> lassen sich alle nötigen Informationen
      einbinden.</para>

      <section remap="h2">
        <title>$info, $preformat und $links</title>

        <itemizedlist>
          <listitem>
            <para>Das $preformat Array enthält die Information zu den
            Beiträgen in kleinen vorformatierten Stückchen. Jeder Schlüssel
            enthält formatierten Text mit URL's, IMG-Tags oder sonstigem HTML
            (wo nötig). Dadurch bekommt man schnelle Ergebnisse bei
            Layout.</para>
          </listitem>

          <listitem>
            <para>Das $info Array enthält alle Informationen zu einem
            Newsbeitrag. Die einzelnen Schlüssel enthalten keinerlei HTML -
            keine IMG-Tag, keine kompletten Links etc.each key holds its value
            as plain unformatted text, with no URL's, IMG tags or other HTML.
            Das ermöglicht eine größere Flexibilität beim definieren des
            Erscheinungsbildes der Beiträge - Der Preis dafür ist halt ein
            wenig Extraarbeit.</para>
          </listitem>

          <listitem>
            <para>Das $links Array, enthält alle Links für den Beitrag, nicht
            die Texte, sondern einfache URIs/URLs, die man mit href-Attributes
            in Tags benutzen kann.</para>
          </listitem>
        </itemizedlist>

        <para>Im folgenden sind die Inhalte dieser Arrays gegeneinander
        gestellt und thematisch sortiert:</para>

        <informaltable frame="none">
          <tgroup cols="4">
            <colspec colname="c1" colwidth="10*" />

            <colspec colname="c2" colwidth="30*" />

            <colspec colname="c3" colwidth="30*" />

            <colspec colname="c4" colwidth="30*" />

            <tbody>
              <row>
                <entry><para><emphasis role="bold"><emphasis
                role="bold">Name</emphasis></emphasis></para></entry>

                <entry><para><emphasis role="bold"><emphasis
                role="bold">$info</emphasis></emphasis></para></entry>

                <entry><para><emphasis role="bold"><emphasis
                role="bold">$preformat</emphasis></emphasis></para></entry>

                <entry><para><emphasis role="bold"><emphasis
                role="bold">$links</emphasis></emphasis></para></entry>
              </row>

              <row>
                <entry align="center" nameend="c4" namest="c1"><para><emphasis
                role="bold"><emphasis
                role="bold">Artikel</emphasis></emphasis></para></entry>
              </row>

              <row>
                <entry><para>sid</para></entry>

                <entry><para>ID des Beitrags ("Story-ID")</para></entry>

                <entry><para> </para></entry>

                <entry><para> </para></entry>
              </row>

              <row>
                <entry><para>title</para></entry>

                <entry><para>Beitrags Titel</para></entry>

                <entry><para>Beitragstitel (CSS Klasse "pn-title") +Link auf
                den Beitrag</para></entry>

                <entry><para> </para></entry>
              </row>

              <row>
                <entry><para>hometext</para></entry>

                <entry><para>Einleitungstext als reiner Text</para></entry>

                <entry><para>Einleitungstext mit automatisch generierten
                Links</para></entry>

                <entry><para> </para></entry>
              </row>

              <row>
                <entry><para>bodytext</para></entry>

                <entry><para>Beitragstext als reiner Text</para></entry>

                <entry><para>Beitragstext mit automatisch generierten
                Links</para></entry>

                <entry><para> </para></entry>
              </row>

              <row>
                <entry><para>notes</para></entry>

                <entry><para>Anmerkungen</para></entry>

                <entry><para>Anmerkungen</para></entry>

                <entry><para> </para></entry>
              </row>

              <row>
                <entry><para>maintext</para></entry>

                <entry><para>Kompletter Text (= hometext +
                bodytext)</para></entry>

                <entry><para>Kompletter Text (= hometext +
                bodytext)</para></entry>

                <entry><para> </para></entry>
              </row>

              <row>
                <entry><para>fulltext</para></entry>

                <entry><para>Kompletter Text mit Anmerkungen (= maintext +
                notes)</para></entry>

                <entry><para>Kompletter Text mit Anmerkungen (= maintext +
                notes)</para></entry>

                <entry><para> </para></entry>
              </row>

              <row>
                <entry align="center" nameend="c4" namest="c1"><para><emphasis
                role="bold"><emphasis
                role="bold">"mehr"</emphasis></emphasis></para></entry>
              </row>

              <row>
                <entry><para>readmore</para></entry>

                <entry><para> </para></entry>

                <entry><para>Link "weiterlesen"</para></entry>

                <entry><para> </para></entry>
              </row>

              <row>
                <entry><para>fullarticle</para></entry>

                <entry><para> </para></entry>

                <entry><para> </para></entry>

                <entry><para>Link zum kompletten Artikel</para></entry>
              </row>

              <row>
                <entry><para>bytesmore</para></entry>

                <entry><para><emphasis role="bold"> </emphasis></para></entry>

                <entry><para>Zeigt die Länge des Artikels in Anzahl von Bytes
                im Format "n bytes mehr"</para></entry>

                <entry><para> </para></entry>
              </row>

              <row>
                <entry><para>withcomm</para></entry>

                <entry><para>0 = Kommentare sind erlaubt;</para> <para> 1 =
                Kommentare sind nicht erlaubt </para></entry>

                <entry><para> </para></entry>

                <entry><para> </para></entry>
              </row>

              <row>
                <entry><para>comments</para></entry>

                <entry><para>Anzahl der Kommentare</para></entry>

                <entry><para> </para></entry>

                <entry><para> </para></entry>
              </row>

              <row>
                <entry><para>comment</para></entry>

                <entry><para> </para></entry>

                <entry><para>Anzahl der Kommentare im Format "n Kommentare"
                oder "Deine Meinung?"</para></entry>

                <entry><para>Link zu den Kommentare</para></entry>
              </row>

              <row>
                <entry><para>more</para></entry>

                <entry><para> </para></entry>

                <entry><para>Komplette "Weiterlesen"-Zeile, mit Anzahl der
                Bytes und Anzahl der Kommentare</para></entry>

                <entry><para> </para></entry>
              </row>

              <row>
                <entry><para>counter</para></entry>

                <entry><para>Anzahl der Zugriffe</para></entry>

                <entry><para> </para></entry>

                <entry><para> </para></entry>
              </row>

              <row>
                <entry nameend="c4" namest="c1"
                valign="middle"><para><emphasis role="bold"><emphasis
                role="bold">Veröffentlichungsdatum</emphasis></emphasis></para></entry>
              </row>

              <row>
                <entry><para>briefdate</para></entry>

                <entry><para>Datum kurzes Format</para></entry>

                <entry><para> </para></entry>

                <entry><para> </para></entry>
              </row>

              <row>
                <entry><para>briefdatetime</para></entry>

                <entry><para>Datum/Zeit, kurzes Format</para></entry>

                <entry><para> </para></entry>

                <entry><para> </para></entry>
              </row>

              <row>
                <entry><para>longdate</para></entry>

                <entry><para>Datum langes Format</para></entry>

                <entry><para> </para></entry>

                <entry><para> </para></entry>
              </row>

              <row>
                <entry><para>longdatetime</para></entry>

                <entry><para>Datum/Zeit, langes Format</para></entry>

                <entry><para> </para></entry>

                <entry><para> </para></entry>
              </row>

              <row>
                <entry><para>time</para></entry>

                <entry><para>Erstellungszeit</para></entry>

                <entry><para> </para></entry>

                <entry><para> </para></entry>
              </row>

              <row>
                <entry><para>unixtime</para></entry>

                <entry><para>Erstellungszeit im UNIXTIME Format</para></entry>

                <entry><para> </para></entry>

                <entry><para> </para></entry>
              </row>

              <row>
                <entry nameend="c4" namest="c1"
                valign="middle"><para><emphasis role="bold"><emphasis
                role="bold">Topic</emphasis></emphasis></para></entry>
              </row>

              <row>
                <entry><para>tid</para></entry>

                <entry><para>Topic ID</para></entry>

                <entry><para> </para></entry>

                <entry><para> </para></entry>
              </row>

              <row>
                <entry><para>topic</para></entry>

                <entry><para>Topic ID (für Rückwärtskompatibilität; besser tid
                benutzen)</para></entry>

                <entry><para> </para></entry>

                <entry><para> </para></entry>
              </row>

              <row>
                <entry><para>topicid</para></entry>

                <entry><para>Topic ID (für Rückwärtskompatibilität; besser tid
                benutzen)</para></entry>

                <entry><para> </para></entry>

                <entry><para> </para></entry>
              </row>

              <row>
                <entry><para>topicname</para></entry>

                <entry><para>Name des Topics</para></entry>

                <entry><para> </para></entry>

                <entry><para> </para></entry>
              </row>

              <row>
                <entry><para>topicimage</para></entry>

                <entry><para>Bildname ohne alle Pfade</para></entry>

                <entry><para> </para></entry>

                <entry><para> </para></entry>
              </row>

              <row>
                <entry><para>topictext</para></entry>

                <entry><para>Topic Beschreibungstext (zB. für das ALT="" tag
                des Topic-Bildes)</para></entry>

                <entry><para> </para></entry>

                <entry><para> </para></entry>
              </row>

              <row>
                <entry><para>tcounter</para></entry>

                <entry><para>Anzahl der Beiträge zu einem Topic</para></entry>

                <entry><para> </para></entry>

                <entry><para> </para></entry>
              </row>

              <row>
                <entry><para>searchtopic</para></entry>

                <entry><para> </para></entry>

                <entry><para>Link auf alle Beiträge eines Topics, formatiert
                als Bild</para></entry>

                <entry><para>Link auf alle Beiträge eines
                Topics</para></entry>
              </row>

              <row>
                <entry nameend="c4" namest="c1"
                valign="middle"><para><emphasis role="bold"><emphasis
                role="bold">Kategorie</emphasis></emphasis></para></entry>
              </row>

              <row>
                <entry><para>cid</para></entry>

                <entry><para>Kategorie ID</para></entry>

                <entry><para><emphasis role="bold"> </emphasis></para></entry>

                <entry><para> </para></entry>
              </row>

              <row>
                <entry><para>catid</para></entry>

                <entry><para>Kategorie ID (für Rückwärtskompatibilität; besser
                cid benutzen)</para></entry>

                <entry><para> </para></entry>

                <entry><para> </para></entry>
              </row>

              <row>
                <entry><para>cattitle</para></entry>

                <entry><para>Name der Kategorie</para></entry>

                <entry><para><emphasis role="bold"> </emphasis></para></entry>

                <entry><para> </para></entry>
              </row>

              <row>
                <entry><para>catandtitle</para></entry>

                <entry><para>Kategorie und Titel des Artikels in der Form
                Kategorie:Titel</para></entry>

                <entry><para>Kategorie und Titel des Artikels als
                Doppellink</para></entry>

                <entry><para> </para></entry>
              </row>

              <row>
                <entry><para>category</para></entry>

                <entry><para> </para></entry>

                <entry><para>Link auf die Kategorie; wenn keine Kategorie
                angegeben ist, wird der Link unsichtbar</para></entry>

                <entry><para>Link auf die Kategorie</para></entry>
              </row>

              <row>
                <entry nameend="c4" namest="c1"
                valign="middle"><para><emphasis role="bold"><emphasis
                role="bold">Autor</emphasis></emphasis></para></entry>
              </row>

              <row>
                <entry><para>aid</para></entry>

                <entry><para>ID des Autors</para></entry>

                <entry><para> </para></entry>

                <entry><para> </para></entry>
              </row>

              <row>
                <entry><para>informant</para></entry>

                <entry><para>Benutzername des Autor</para></entry>

                <entry><para> </para></entry>

                <entry><para> </para></entry>
              </row>

              <row>
                <entry nameend="c4" namest="c1"
                valign="middle"><para><emphasis role="bold"><emphasis
                role="bold">Spezielle
                Links</emphasis></emphasis></para></entry>
              </row>

              <row>
                <entry><para>print</para></entry>

                <entry><para> </para></entry>

                <entry><para>Link zur Druckansicht</para></entry>

                <entry><para>Link zur Druckansicht</para></entry>
              </row>

              <row>
                <entry><para>send</para></entry>

                <entry><para> </para></entry>

                <entry><para>An Freund verschicken</para></entry>

                <entry><para>An Freund verschicken</para></entry>
              </row>

              <row>
                <entry nameend="c4" namest="c1"
                valign="middle"><para><emphasis
                role="bold">Themes</emphasis></para></entry>
              </row>

              <row>
                <entry><para>catthemeoverride</para></entry>

                <entry><para>Name des Themes zum außer Kraft setzen der
                Kategorie</para></entry>

                <entry><para> </para></entry>

                <entry><para> </para></entry>
              </row>

              <row>
                <entry><para>themeoverride</para></entry>

                <entry><para>Name des Themes zum außer Kraft setzen des
                Beitrags</para></entry>

                <entry><para> </para></entry>

                <entry><para> </para></entry>
              </row>

              <row>
                <entry nameend="c4" namest="c1"
                valign="middle"><para><emphasis role="bold"><emphasis
                role="bold">Sonstiges</emphasis></emphasis></para></entry>
              </row>

              <row>
                <entry><para>version</para></entry>

                <entry><para>Versionsangabe. Damit kann festgestellt werden,
                ob bestimmte Einträge vorhanden sind.</para> <para> stets "1"
                </para></entry>

                <entry><para>Versionsangabe. Damit kann festgestellt werden,
                ob bestimmte Einträge vorhanden sind.</para> <para> stets "1"
                </para></entry>

                <entry><para>Versionsangabe. Damit kann festgestellt werden,
                ob bestimmte Einträge vorhanden sind.</para> <para> stets "1"
                </para></entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>
      </section>
    </section>

    <section>
      <title><function>function
      themesidebox(<varname>$block</varname>)</function></title>

      <para>Diese Funktion sorgt für die Gestaltung der Blocks. Über das Array
      $block wird nicht nur der Inhalt erzeugt - hierüber lassen sich die
      verschiedenen Blocks auch identifizieren, um für bestimmte Blocks ein
      gesondertes Layout festzulegen.</para>

      <section remap="h2">
        <title><varname>$block</varname>-Array</title>

        <para>Der Funktion themesidebox wird ein Assoziatives Array
        <varname>$block</varname> mit allen Details zum aktuell anzuzeigenden
        Block übergeben. Dieser Array hat die folgenden Einträge:</para>

        <variablelist>
          <varlistentry>
            <term>bid</term>

            <listitem>
              <para>Die ID des Blocks</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>bkey</term>

            <listitem>
              <para>Die Art des Blocks (z.B. html, menu, ...)</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>url</term>

            <listitem>
              <para>???</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>position</term>

            <listitem>
              <para>l, r oder c -- die Position des Blocks</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>mid</term>

            <listitem>
              <para>Die ID des Moduls, das den Block bereitstellt. Nähere
              Modulinfos lassen sich dann mit pnModGetInfo
              herausfinden.</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>title</term>

            <listitem>
              <para>Der Blocktitel</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>content</term>

            <listitem>
              <para>Der eigentliche Inhalt.</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>weight</term>

            <listitem>
              <para>Das Gewicht des Blocks. Dies gibt an, wie weit oben der
              Block angezeigt wird.</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>active</term>

            <listitem>
              <para>1, falls der Block aktiv ist.</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>refresh</term>

            <listitem>
              <para>Wie oft der Block aktualisiert wird (bei externen
              Inhalten)</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>unix_update</term>

            <listitem>
              <para>Der Zeitstempel der letzten Änderung des Blocks</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>blanguage</term>

            <listitem>
              <para>Die Sprache, für die der Block angezeugt wird (deu für
              Deutsch)</para>
            </listitem>
          </varlistentry>
        </variablelist>
      </section>
    </section>

    <section>
      <title><function>function OpenTable()</function>, <function>function
      OpenTable2()</function>, <function>function CloseTable()</function>,
      <function>function CloseTable2()</function></title>

      <para>In diesen Funktionen <function>OpenTable()</function> und
      <function>OpenTable2()</function> kann man 2 Tabellenanfänge definieren,
      um sie im Layout immer wieder zu verwenden.
      <function>CloseTable()</function> und <function>CloseTable2()</function>
      defeinieren die dazugehören 2 Tabellenenden</para>
    </section>
  </section>

  <section>
    <sectioninfo>
      <author>
        <othername>Original von adam_baum (adam_baum at ndezign.com),
        24.9.2001</othername>
      </author>

      <editor>
        <firstname>Steffen</firstname>

        <surname>Voß</surname>

        <contrib>Übersetzung</contrib>
      </editor>
    </sectioninfo>

    <title>Mehrsprachige Themes</title>

    <para>Nicht nur Module, sondern auch Themes lassen sich mehrsprachig
    designen. Dadurch wurde unter anderem erreicht, daß der Postnuke-Core
    nicht auch noch damit aufgebläht wird. Die Vorteile davon liegen auf der
    Hand.</para>

    <para>Um dieses Feature aber überhaupt voll nutzen zu können, mußt Du
    zunächst die Dateistruktur entsprechend anpassen. Dazu muß ein
    <filename>/lang</filename> Verzeichnis im Theme Verzeichnis angelegt
    werden, um darin die verschiedenen Sprachversionen zu speichern:
    <filename>/themes/<replaceable>beispiel</replaceable>/style/<replaceable>xxx</replaceable>/global.php</filename>.
    Das "<filename><replaceable>xxx</replaceable></filename>" muß durch das
    entsprechende ISO 639-2/T Länderkürzel ersetzt werden. Für Deutsch ist das
    zum Beispiel "deu", für Englisch "eng" und für Französisch "fra". Gibt es
    nach ISO 639-2/T kein Länderkürzel, bekommt der Sprachname einfach ein
    "x_" als Vorsilbe. Für Brasilianisches Protogisisch (eng.: Brazilian
    Portuguese) bedeutet das: "x_brazilian_portuguese". Eine komplette Liste
    der ISO-Kürzel gibt es unter <ulink
    url="http://lcweb.loc.gov/standards/iso639-2/langhome.html">http://lcweb.loc.gov/standards/iso639-2/langhome.html</ulink>.</para>

    <para>In diesem Verzeichnis wird dann eine Textdatei mit dem Namen
    "global.php" eingefügt. Wenn Du je PostNuke-Sprachdateien angepaßt hast,
    dann wirst Du den Aufbau dieser Dateien schon kennen, denn das gleiche
    Schema wird auch in den Themes benutzt. Hier ein Beispiel:</para>

    <programlisting>define('_MYTEXT','Dies ist mein Text');
define('_MYOTHERTEXT','Hier ist noch mehr Text von mir');     </programlisting>

    <para>Damit das theme diese Übersetzung beachtet, sollte zu Beginn der
    theme.php die Funktion <function>themes_get_language</function> aufgerufen
    werden:</para>

    <programlisting>themes_get_language();     </programlisting>

    <para>Ab jetzt kannst Du in Deiner themes.php diese Funktionen
    aufrufen:</para>

    <programlisting>echo _MYTEXT . ' ' . _MYOTHERTEXT . '...';     </programlisting>

    <para>Dieses Stück Quelltext würde dann folgenden Ausgabe ergeben:</para>

    <para><screen>Dies ist mein Text </screen></para>

    <para><screen>Hier ist noch mehr Text von mir...</screen></para>
  </section>

  <section remap="h2">
    <title>Style Sheets</title>

    <para>Zu jedem Theme gibt es (mindestens) zwei Style Sheets, nämlich
    style.css und styleNN.css. Diese werden seitens des PostNuke-cores
    (genauer: in der Datei header.php) so eingebunden, dass alle Browser die
    Datei styleNN.css sehen, aber nur der Internet Explorer die Datei
    style.css.</para>

    <para>Der Grund liegt darin, dass Netscape und Internet-Explorer
    Style-Sheet-Angaben teilweise unterschiedlich behandeln.</para>

    <para>Die grundsätzlichen Styles werden deshalb in der styleNN.css
    festgelegt - in die style.css kommen dann <emphasis>lediglich</emphasis>
    die Definitionen, die nicht vom Netscape Navigator unterstützt
    werden.</para>

    <para>Folgende Style Sheet wurden im <ulink url="#">PostNuke.com
    Support-Forum</ulink> herausgefunden.</para>

    <variablelist>
      <varlistentry>
        <term>pn-normal</term>

        <listitem>
          <para>Extensively used throughout, like in the main menu and
          'comments' link (annoying if you want menu and Comments link
          different colors)</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>pn-title</term>

        <listitem>
          <para>Ditto</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>pn-sub</term>

        <listitem>
          <para>Extensive, like 'Posted By'</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>pn-pagetitle</term>

        <listitem>
          <para>Modules: Recommend Us, Submit News, NS-User, NS-Settings,
          NS-Help, Messages, FAQ</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>pn-text</term>

        <listitem>
          <para>Modules: NS-AddStory, NS-Languages, NS-Polls, Reviews,
          Sections, Submit News; error.php, includes\blocks\menu.php,
          includes\blocks\sms.php, includes\blocks\thelang.php</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>pn-logo</term>

        <listitem>
          <para>Downloads, NS-Polls, Web Links</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>pn-logo-small</term>

        <listitem>
          <para>error.php, default 'Postnuke' theme</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>.pn-button</term>

        <listitem>
          <para>Always used with &lt;INPUT class="pn-button"&gt; Blocks: Poll,
          SMS, Login and Search commands</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>pn-titlel</term>

        <listitem>
          <para>Downloads module. Spelling mistake?</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>pn-title-rblock</term>

        <listitem>
          <para>Seabreeze theme</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>pn-title-lblock</term>

        <listitem>
          <para>Seabreeze theme</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>pn-art</term>

        <listitem>
          <para>Seabreeze theme</para>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>

  <section remap="h2">
    <title>Kurze URLs</title>

    <section remap="h3">
      <title>Einleitung</title>

      <para>Das im Folgenden beschriebene Vorgehen zur Implementierung von
      kürzeren URLs mit Postnuke sorgt dafür, daß Suchmaschinen wie Google
      nicht nur die Startseite der Site indizieren, sondern auch alle
      Unterseiten. Im Speziellen Google indiziert i.d.r. keine dynamischen
      (=langen) links - ganz im Gegensatz z.b. zur Konkurrenz
      alltheweb.com.</para>

      <para>Der Nachteil und der Grund, warum das bisher noch nicht fester
      Bestandteil der Distribution ist, liegt in der Plattformabhängigkeit -
      Das System funktioniert nämlich nur auf Apacheservern und auch hier nur
      auf solchen, die ein bestimmtes Modul (mod_rewrite) anbieten.</para>

      <para>Ab der Version .8 soll Postnuke die Theme-Komponente (zumindestens
      für API-konforme Module) gleich im Core erledigen, was eine deutliche
      Performance-Verbesserung mit sich bringt.</para>

      <para><emphasis role="bold">Das</emphasis> Kompedium zu Short URLs und
      postnuke schlechhin findet sich bei mtrad: <ulink
      url="http://www.mtrad.com/SimpleURL.php">http://www.mtrad.com/SimpleURL.php</ulink>
      Dort gibt es auch gleich die Links zu noch mehr weiterführenden
      Informationen.</para>
    </section>

    <section remap="h3">
      <title>Features</title>

      <para>Short urls sind in aller regel in zwei Funktionsbereich
      aufgeteilt:</para>

      <para>- die Server-Komponente (=mod_rewrite) die dafür sorgt, das der
      Webserver kurze urls in die richtigen langen urls wandelt</para>

      <para>- die Theme-Komponente die dafür sorgt, dass bei Aufbau von
      Postnuke-Seiten die integrierten (langen) links in short urls gewandelt
      werden.</para>

      <para>Um festzustellen, ob ein Webserver dieses Feature unterstützt,
      kann man am einfachsten eine php-Datei erstellen, die die Funktion
      <literal>phpinfo();</literal> aufruft. Wenn diese Datei auf den
      Webserver kopiert und aufgerufen wird, bekommt man eine lange Liste mit
      der Ausstattung des Servers angezeigt. Such man jetzt vergeblich in
      dieser Seite nach dem Sichwort '<emphasis>mod_rewrite</emphasis>', dann
      werden folgende Modifikationen auch erfolglos bleiben.</para>
    </section>

    <section remap="h3">
      <title>Schritt für Schritt</title>

      <para>Ein komplettes Paket mit Rewrite-Regeln für verschiedene Module
      gibt es auf der <ulink url="#">PagEd-Homepage</ulink>. Es besteht aus 3
      Teilen: Der .htaccess, einer functions.php und den Code-Schnipseln, die
      ins Theme eingefügt werden müssen. <emphasis
      role="bold">Ersterns:</emphasis> Die xy.htaccess Datei wird zum Beispiek
      per FTP im ASCI-Modus ins Hauptverzeichnis der Site kopiert und in
      .htacces umbenannt. Sollte es schon eine .htaccess geben, so können die
      bestehenden Einträge einfach mit in die neue Datei kopiert werden. Nach
      dem Upload muß die Datei auf dem Server für alle lesbar sein. Die
      Zugriffsrechte können mittels chmod geändert werden:</para>

      <blockquote>
        <para><literal>chmod 644 .htaccess</literal></para>
      </blockquote>

      <para>Das sind <emphasis role="bold">Lese- und Schreibrechte</emphasis>
      für den Master/Owner und <emphasis role="bold">Leserechte</emphasis> für
      die Gruppe und den Rest. Je nach verwendetem FTP-Programm kann CHMOD
      verschieden angegeben werden. Bei WS_FTPPro z.B. kann dies durch
      Auswählen der der Datei mit einem Mausklick und danach die rechte
      Maustaste (Auswahl CHMOD) geschehen.</para>

      <para>Bei FTP-Explorer geschieht es durch die Eingabe eines
      Quote-Befehls, in diesem Fall 'site chmod 755 datei.ext'.</para>

      <para><emphasis role="bold">Zweitens:</emphasis> Die functions.php wird
      ins Themeverzeichnis zur theme.php kopiert.</para>

      <para><emphasis role="bold">Drittens:</emphasis> Als erste Funktion in
      der theme.php nach der Zeile "global $all_vars, $index;" wird folgendes
      einkopiert:</para>

      <para><programlisting>global    $simple_urls, $hide_email, $simple_uri; 
// Simple URL Einstellungen
$simple_urls = true; // enable/disable simple URL functionality
$hide_email = true; // enable/disable functionality to hide email addresses
$simple_uri = ''; // type of uri (module call)
if ($simple_urls || $hide_email) {
    require_once('functions.php');
    require_once('functions.php');
    $simple_uri = simple_uri(); // determine &amp; remember type of module call
}</programlisting></para>

      <para>Am <emphasis role="bold">Anfang</emphasis> der Funktion
      themeheader():</para>

      <para><programlisting>global    $simple_urls, $hide_email, $simple_uri;
// Simple URL insert start
if ($simple_urls || $hide_email) {
    if ($simple_uri == 'old') {
        ob_start();
    }
}     </programlisting></para>

      <para>Am <emphasis role="bold">Ende</emphasis> der Funktion
      themeheader():</para>

      <para><programlisting>if ($simple_urls || $hide_email) {
    if ($simple_uri == "new") {
        $contents = ob_get_contents();
        ob_end_clean();
        ob_start();
        if ($simple_urls) {
            echo simplify_urls($contents); //display modified buffer to screen
        } else {
            echo $contents;
        }
    }
}  </programlisting></para>

      <para>Am <emphasis role="bold">Anfang</emphasis> der Funktion
      themefooter():</para>

      <para><programlisting>global $simple_urls, $hide_email, $simple_uri;

if ($simple_urls || $hide_email) {
    $contents = ob_get_contents(); // New style has extra ob_start's
    ob_end_clean();
    if ($simple_uri == 'new') { // New or Old style of module call
        ob_start();
    }
    if ($simple_urls) {
        echo simplify_urls($contents); //display modified buffer to screen
    }
}          </programlisting></para>

      <para>Am <emphasis role="bold">Ende</emphasis> der Funktion
      themefooter():</para>

      <para></para>
    </section>

    <section remap="h3">
      <title>Credits</title>

      <para>Diese Anleitung basiert auf <emphasis>der</emphasis> Referenz für
      kurze URLs und Postnuke: <ulink
      url="#">http://news.postnuke.com/modules.php?op=modload&amp;name=News&amp;file=article&amp;sid=1804&amp;mode=thread&amp;order=0&amp;thold=0</ulink></para>

      <para>Die deutschen Übersetzung von Timo Schmidt: <ulink
      url="http://www.admin-wissen.de/anleitung.htm">http://www.admin-wissen.de/anleitung.htm</ulink></para>

      <para>Die Anleitung für die Implementierung im MTModular v4 Theme:
      <ulink
      url="http://www.mtrad.com/SimpleURL.php">http://www.mtrad.com/SimpleURL.php</ulink></para>

      <para>Für Anregungen, Kommentare &amp; Kritik melde Dich einfach bei:
      <ulink
      url="mailto:%20steffen.voss@online.de">steffen.voss@online.de</ulink></para>
    </section>
  </section>
</article>