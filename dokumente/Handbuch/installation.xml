<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN"
"http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd">
<chapter id="Installation" lang="de-DE" revision="$Revision$"
         status="draft">
  <!-- $Id$ -->

  <chapterinfo>
    <releaseinfo>$Revision$</releaseinfo>

    <date>$Date$</date>
  </chapterinfo>

  <title>Installation</title>

  <section>
    <title>Vor der Installation</title>

    <para>Für die erfolgreiche Installation von PostNuke wird ein
    funktionierender Webserver mit <ulink
    url="http://www.php.net/">PHP</ulink> und eine Datenbank benötigt. Durch
    die Benutzung der Datenbankabstraktion <ulink
    url="http://adodb.sourceforge.net/">ADOdb</ulink> soll PostNuke in Zukunft
    mit einer Vielzahl Datenbanksysteme funktionieren - zur Zeit empfiehlt
    sich nur die Benutzung von <ulink
    url="http://www.mysql.com/">MySQL</ulink> , da vor allem Modul von
    Dritt-Anbietern oft noch nicht vollkommen auf ADOdb umgestellt
    sind.</para>

    <section>
      <title>Auswahl eines geeigneten Providers</title>

      <para>Zur besseren Auswahl eines geeigneten Providers sind die
      notwendigen Voraussetzungen für PostNuke sind schnell
      zusammengestellt:</para>

      <variablelist>
        <varlistentry>
          <term>PHP</term>

          <listitem>
            <para>PostNuke besteht aus einer Reihe an PHP-Skripten. Eine
            PHP-Unterstützung ist also notwendig. Die Mindestversion ist PHP
            4.1 Mit bestimmten Versionen von PHP (vor allem 4.2.3) sind im
            Zusammenspiel mit PostNuke Fehler berichtet worden; allerdings hat
            man als Kunde im allgemeinen keinen Einfluß auf die eingesetzte
            PHP-Version. Man sollt allerdings darauf achten, dass der
            safe_mode nicht eingeschaltet ist, da dieses Sicherheitsfeature
            von PHP Uploads erfolgreich verhindert. Damit lassen sich z.B. die
            meisten Gallerien nicht betreiben.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>Datenbank</term>

          <listitem>
            <para>Alle Inhalte von PostNuke werden in einer Datenbank
            gespeichert. Obwohl PostNuke durch die Verwendung der
            ADOdb-Bibliotheken theoretisch unabhängig von der verwendeten
            Datenbank ist, empfiehlt sich die Verwendung von mySQL, da einige
            ältere Module von Drittentwicklern noch nicht komplett auf ADODB
            umgestellt sind. MySQL ist aber die Datenbank, die von den meisten
            Providern ohnehin eingesetzt wird.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>Webserver</term>

          <listitem>
            <para>PostNuke selbst ist es egal, welcher Webserver auf welcher
            Plattform zum Einsatz kommt. Emfehlenswert ist der Einsatz des
            Apache Webservers, da einige Tricks (z.B. die sogenannten
            &ldquor;kurzen URLs&rdquor;) bestimmte Webserver-Module
            voraussetzen, die nur der Apache bietet. Insbesondere muß für den
            Einsatz von &ldquor;kurzen URLs&rdquor; das Modul mod_rewrite
            aktiviert sein.</para>
          </listitem>
        </varlistentry>
      </variablelist>

      <para>Erfüllt ein Webspace-Angebot diese Voraussetzungen, so ist der
      Rest meist nur eine Frage des Preises. Wie oft, gilt auch in diesem
      Bereich &ldquor;you get what you pay for&rdquor;...</para>

      <para>Darüber hinaus müssen natürlich die folgenden Überlegungen
      angestellt werden:</para>

      <itemizedlist>
        <listitem>
          <para>Geplante Größe des Internetangebotes</para>
        </listitem>

        <listitem>
          <para>Das zu erwartende monatliche Transfervolumen</para>
        </listitem>

        <listitem>
          <para>Anzahl der Email-Postfächer</para>
        </listitem>
      </itemizedlist>

      <para>Konkrete Anbieter anzugeben, ist schwierig. Eine gute Übersicht
      findet man auf <ulink
      url="http://www.webhostlist.de/">WebHostlist.de</ulink>. Dort gibt es
      auch "<ulink
      url="http://www.webhostlist.de/host/info/provider.php3">Tipps zur
      Providerwahl</ulink>".</para>

      <tip>
        <para><emphasis>Kostenloser Webspace?</emphasis></para>

        <para>Eigentlich ist das Free-Hosting-Paket von Lycos/Tripod ja eine
        tolle Sache. 50MB Speicherplatz, PHP und MySQL kostenlos &ndash;
        eigentlich ideal, um eine kleine PostNuke-Seite zu installieren.
        Allerdings bekommt man PostNuke auf diesem Angebot nicht
        zufriedenstellend zum Laufen. Das Werbegerümpel, was im http-header(!)
        eingebunden ist und die etwas seltsame php4u-Umgebung werfen so einige
        Probleme im Betrieb der Seite auf. Einzige Lösung: einen gescheiten
        Provider suchen. Wenn Du Dich davon aber nicht abschrecken läßt, und
        es trotzdem versuchen möchtest, helfen Die die folgenden Links
        weiter:</para>

        <itemizedlist>
          <listitem>
            <para><ulink
            url="http://mikespub.net/copdab/lycos.txt">http://mikespub.net/copdab/lycos.txt</ulink></para>
          </listitem>

          <listitem>
            <para><ulink
            url="http://mitglied.lycos.de/jnapp">http://mitglied.lycos.de/jnapp</ulink></para>
          </listitem>
        </itemizedlist>
      </tip>
    </section>

    <section>
      <title>Installation auf dem heimischen Rechner</title>

      <para>Um PostNuke ausgiebig testen zu können, empfiehlt sich die
      Installation auf dem heimischen PC. Dazu braucht man</para>

      <variablelist>
        <varlistentry>
          <term>Einen Web-Server</term>

          <listitem>
            <para>Üblichweise wirst man Apache nehmen, da dieser unter der GPL
            und kostenfrei verfügbar ist. Dieser Web-Server ist unter <ulink
            url="http://httpd.apache.org/ ">http://httpd.apache.org/
            </ulink>herunterladbar. Er wird als installierbares Paket
            downgeloadet. Eine Anleitung, wie der Apache unter Windows zum
            laufen zu bekommen ist, findet man unter
            http://httpd.apache.org/docs/windows.html.</para>

            <para>Starte die Installation wie bei jedem anderen Programm,
            lasse den Installationspfad am besten so wie er ist. Starte deinen
            Webbrowser und gib Sie als URL <systemitem
            class="systemname">http://localhost/</systemitem> ein. Wenn alles
            richtig gemacht worden ist, dann siehst du jetzt eine Seite, auf
            der steht, dass der Apache Webserver erfolgreich installiert
            wurde.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>PHP</term>

          <listitem>
            <para>PHP bekommt man bei <ulink
            url="http://www.php.net/downloads.php">http://www.php.net/downloads.php</ulink>.
            Details, wie PHP dann noch zu konfigurieren ist, findet man unter
            http://www.php.net/manual/de/install.apache.php (für Apache 1.3)
            bzw. http://www.php.net/manual/en/install.apache2.php (für Apache
            2).</para>

            <para>PHP kann auf zwei Arten installieren. Als Modul und als
            CGI-Sprache. Empfehlenswert ist es, PHP als Modul von Apache
            installieren. Entpacke das PHP Paket, und installiere es in das
            vorgegebene Verzeichnis. Zur Konfiguration des Apache-Servers ist
            es dann noch notwendig die <filename>httpd.conf</filename>-Datei
            zu editieren, und nach<programlisting>#AddHandler type-map var</programlisting>folgende
            Zeilen hinzuzufügen:<programlisting>#AddHandler type-map var

# And for PHP 4.x, use
ScriptAlias /php/ "c:/php/"
AddType application/x-httpd-php .php
AddType application/x-httpd-php-source .phps
Action application/x-httpd-php /php/php.exe</programlisting>Dann müsstest du
            den oberen Abschnitt sehen, mach die #-Zeichen am Anfang weg, so
            das das ganze dann aussieht wie hier oben. Speicher und schliesse
            die <filename>httpd.conf</filename>. Nach dieser Änderung ist ein
            Neustart des Apache notwendig.</para>

            <para>Alle Dateien, die in dem Verzeichnis
            <filename>htdocs</filename> im Apache Programmordner liegen und
            auf ".php" enden werden vom Apache Server nun als PHP-Skripte
            interpretiert. Um dies zu testen, erstellst du eine Datei
            <filename>phpinfo.php</filename> mit folgendem
            Code:<programlisting>&lt;?php
phpinfo()
?&gt;</programlisting>Diese speicherst du dann im Apache
            <filename>/htdocs</filename>-Verzeichnis ab. Ruft man nun unter
            <filename>http://localhost/phpinfo.php</filename> das Skript auf
            sollten einige Informationen von PHP angezeigt werden.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>Eine von PostNuke unterstützte Datenbank, vorzugsweise
          MySQL</term>

          <listitem>
            <para>Die aktuelle Version von MySQL bekommt man unter <ulink
            url="http://www.mysql.de/downloads/index.html">http://www.mysql.de/downloads/index.html</ulink>.
            Wenn du die richtige Version downgeloadet hast, ist auch diese
            Installation einfach. Zunächst installierst du MySQL in den
            angegebenen Pfad (C:mysql), dann startest du im MySQL-Ordner /bin
            das Programm winmysqladmin.exe, gibst dort einen Usernamen und ein
            Passwort ein (merken, wichtig für Datenbankaktionen) und lässt es
            laufen. Von nun an wird dieses Programm auch in Autostart bei
            jedem Hochfahren gestartet. Falls dies nicht nötig oder
            unerwünscht ist, lösche den Eintrag aus "Autostart".</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>phpMyAdmin</term>

          <listitem>
            <para>phpMyAdmin ist ein Administrationstool für MySQL, mit ihm
            kann man auf Datenbanken direkt über den Webbrowser zugreifen -
            Download unter <ulink
            url="http://www.phpmyadmin.net/">http://phpmyadmin.sourceforge.net</ulink>.
            Mit ihm kann man sehr leicht auf Datenbanken zugreifen (erstellen,
            ändern und löschen). Entpacke das Paket in das Apache
            /htdocs-Verzeichnis. Dort werden auch in Zukunft alle Websiten und
            PHP-Programme gespeichert. Nach dem Entpacken findest du dort eine
            Datei Names confic.inc.php, öffne diese, und editiere die
            gewünschten Variablen. Du benötigen auf jeden Fall deinen
            MySQL-Usernamen und das Passwort. Nach dem editieren speicherst du
            das ganze, und gehst mit dem Browser auf folgende URL:
            <filename>http://localhost/phpMyAdmin/index.php</filename>
            Solltest du jetzt etwas buntes sehen, dann waren deine Bemühungen
            erfolgreich.</para>
          </listitem>
        </varlistentry>
      </variablelist>

      <tip>
        <para>Wer Wert auf eine "Ein-Klick-Lösung" legt, sollte sich <ulink
        url="http://www.apachefriends.org/de/">XAMPP</ulink> ansehen. XAMPP
        ist eine Distribution von Apache, MySQL, PHP und Perl, die es
        ermöglicht diese Programme auf sehr einfache Weise zu
        installieren.</para>

        <para>Zur Zeit gibt es drei XAMPP-Distributionen:Für Windows, Linux
        und Solaris. Der Download ist aber mit fast 60 MB sehr groß, wer kein
        DSL hat kann eine CD für 5 Euro bestellen. Nach der denkbar einfachen
        Installation unter Windows liefen alle Module die bei mir zum Einsatz
        kommen problemlos.</para>
      </tip>
    </section>
  </section>

  <section>
    <title>Installation des Systems</title>

    <para role="info"><emphasis>DieserText wurde und freundlicherweise von
    <ulink url="http://www.andylanger.de">Andy Langer</ulink> zur Verfügung
    gestellt.</emphasis></para>

    <para>Die Installation ist eigentlich sehr einfach und der User wird,
    ähnlich der Installation eines Programmes, Schritt für Schritt die Daten
    gefragt, die notwendig sind. Am Abschluss ist die Seite so eingerichtet,
    dass sie bereits komplett funktionsfähig ist.</para>

    <para>Selbstverständlich führen auch bei der PostNuke-Installation viele
    Wege nach Rom, so unterscheidet es sich, ob die Installation via FTP auf
    den Server geladen wird, oder ob ein Shell-Zugang besteht und das Archiv
    online entpackt wird etc. Aber, wie bereits in den Grundlagen erwähnt
    möchte ich hier alles so einfach wie möglich halten und somit erkläre ich
    den - in meinen Augen - gebräuchlichsten Weg.</para>

    <bridgehead>Download und Entpacken der notwendigen Dateien</bridgehead>

    <para>Zunächst einmal besorgen wir uns die aktuelle
    PostNuke-Version.</para>

    <procedure>
      <step>
        <para>Herunterladen der aktuellen Version von PostNuke und der
        aktuellen Sprachdatei als ZIP-Archiv von <ulink
        url="http://www.post-nuke.net/">www.post-nuke.net</ulink>.</para>
      </step>

      <step>
        <para>Entpacken der Archive. Für Anwender von Windows XP ist die
        ZIP-Fähigkeit im System eingebaut, für andere gibt es z. B. <ulink
        url="http://www.7-zip.org/">7-ZIP</ulink> oder ähnliche Programme, die
        das Archiv entpacken.</para>
      </step>

      <step>
        <para>Es entstehen jetzt zwei Verzeichnisbäume, einer mit den
        PostNuke-Dateien, der andere mit den deutschen Sprachdateien. Diese
        Bäume werden nun zu einem zusammenkopiert, und zwar so, dass die
        Verzeichnisse <filename>html</filename> übereinstimmen.</para>

        <screenshot>
          <mediaobject>
            <textobject>
              <para>Die Verzeichnisstruktur nach dem Entpacken. Die beiden
              markierten <filename>html</filename>-Verzeichnisse müssen
              ineinanderkopiert werden.</para>
            </textobject>

            <imageobject>
              <imagedata align="center" fileref="dateistruktur.gif"
                         format="GIF" />
            </imageobject>
          </mediaobject>
        </screenshot>
      </step>

      <step>
        <para>Es entsteht so ein kompletter Verzeichnisbaum, der alle
        benötigten Dateien enthält.</para>
      </step>
    </procedure>

    <bridgehead>Upload der Dateien</bridgehead>

    <para>Nachdem nun die Dateien in entpackter Form auf dem heimischen PC
    vorliegen, müssen diese azf den Webspace hochgeladen werden. Dies
    funktioniert überlicherweise mit einem FTP-Programm.</para>

    <tip>
      <para>Ein sehr gutes Programm z. B. <ulink
      url="http://filezilla.sourceforge.net/">FileZilla</ulink>, das unter der
      GPL verfügbar ist und auch auf deutsch verfügbar ist.</para>
    </tip>

    <procedure>
      <step>
        <para>Die notwendigen Dateien liegen unter <filename>/html</filename>.
        Lediglich den Inhalt dieses Verzeichnisses wird hochgeladen, der
        Ordner <filename>Phoenix-SQL</filename> braucht nicht upgeloadet
        werden! Das Hochspielen kann einige Zeit in Anspruch nehmen, da es
        sich um einige hundert Dateien handelt, also nicht die Nerven
        verlieren.</para>
      </step>

      <step>
        <para>Wichtig beim Aufspielen ist, dass die Dateien da landen, wo
        später auf die Seite zugegriffen wird. Soll heissen, dass am Besten
        nicht der Ordner <filename>/html/</filename> aufgespielt wird, sondern
        nur dessen Inhalt. Sonst muss die Seite über <systemitem
        class="systemname">http://www.deinedomain.de/html/</systemitem>
        angesprochen werden, was unpraktisch ist.</para>
      </step>

      <step>
        <para>Bei Linux/Unix-Systemen Zugriffsberechtiung für
        <filename>config.php</filename> und
        <filename>config-old.php</filename> auf chmod 666 setzen</para>
      </step>
    </procedure>

    <bridgehead>Installation</bridgehead>

    <para>So weit, so gut, jetzt liegen die Dateien auf dem Server und es
    folgt die eigentliche Installation. Darüber legt PostNuke die notwendigen
    Tabellen in der Datenbank an, richtet einen Benutzer ein und leitet dann
    auf die fertige Seite weiter:</para>

    <procedure>
      <step>
        <para>Start der Installation über <systemitem
        class="systemname">http://www.deinedomain.de/install.php</systemitem>.</para>
      </step>

      <step>
        <para>Zunächst wählt man die Sprache aus. Hierbei handelt es sich um
        die Sprache des Installationsprogramms.</para>

        <mediaobject>
          <imageobject>
            <imagedata align="center" fileref="install01.gif" format="GIF" />
          </imageobject>
        </mediaobject>
      </step>

      <step>
        <para>Nach dem Akzeptieren der Lizenz folgt eine Überprüfung der
        Zugriffsrechte. Sollte PostNuke dabei auffallen, dass etwas nicht
        stimmt, gibt es Hinweise. Wenn alles passt, sieht es so aus:</para>

        <mediaobject>
          <imageobject>
            <imagedata align="center" fileref="install02.gif" format="GIF" />
          </imageobject>
        </mediaobject>
      </step>

      <step>
        <para>Im nächsten Schritt fragt PostNuke die Daten für den
        Datenbankzugriff ab. Die bekommst Du von Deinem Provider bzw. wenn Du
        einen eigenen Server mit eigener Datenbank benutzt, kennst Du ja die
        Einstellungen.</para>

        <variablelist>
          <varlistentry>
            <term>Datenbank Host</term>

            <listitem>
              <para>URL des Datenbankservers</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>Datenbank Benutzer</term>

            <listitem>
              <para>Benutzer der Datenbank</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>Datenbank Passwort</term>

            <listitem>
              <para>Passwort für die Datenbank</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>Datenbank Name</term>

            <listitem>
              <para>Name der Datenbank</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>Table Prefix</term>

            <listitem>
              <para>Falls mehrere Installationen in einer Datenbank geplant
              sind, können hier unterschiedliche Prefixe angegeben werden -
              ansonsten 'nuke'. Mit dem Prefix hat es folgende Bewandnis:
              Jeder Tabelle, die PostNuke anlegt, widt dieser Prefix
              vorangestellt. Auf diese Art kann man, indem unterschiedliche
              Prefixe benutzt werden, in einer Datenbank mehrere
              PostNuke-Installationen unterbringen, die dann je eigene
              Tabellen benutzen.</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>Datenbank Typ</term>

            <listitem>
              <para>Typ des Datenbanksystems auswählen (z.B. mysql)</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>Datenbank-Tabellen-Typ</term>

            <listitem>
              <para>MyISAM oder INNODB</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>Intranet</term>

            <listitem>
              <para>Die "Intranet"-Option muss nur bei Installationen ohne
              "vollqualifizierten" Domainnamen angewählt werden. Beispiele für
              "qualifizierte" Domainnamen sind www.PostNuke.com und
              foo.bar.com, aber auch z.B. 127.0.0.1 - Beispiele für
              "unqualifizierte" Domainnamen sind foo.com, localhost und
              mysite.org. Wenn dieser Parameter nicht richtig gesetzt wird,
              ist unter Umständen kein Login möglich!</para>
            </listitem>
          </varlistentry>
        </variablelist>

        <mediaobject>
          <imageobject>
            <imagedata align="center" fileref="install03.gif" format="GIF" />
          </imageobject>
        </mediaobject>
      </step>

      <step>
        <para>Nach dem Klick auf <guimenu>Submit</guimenu> gibt Dir PostNuke
        nochmal eine Zusammenfassung der Daten. Wenn diese korrekt sind,
        kannst Du wählen, ob es sich um eine neue Installation oder ein
        Upgrade handelt. Wir gehen hier natürlich von einer neuen Installation
        aus und klicken auf <guimenu>Install</guimenu>.</para>

        <mediaobject>
          <imageobject>
            <imagedata align="center" fileref="install04.gif" format="GIF" />
          </imageobject>
        </mediaobject>
      </step>

      <step>
        <para>Im nächsten Schritt fragt PostNuke, ob es eine neue Datenbank
        anlegen soll oder nicht. In der Regel lassen die wenigsten Provider
        das zu, also kannst Du die Standard-Antwort (im unteren Kästchen kein
        Haken) nutzen.</para>

        <mediaobject>
          <imageobject>
            <imagedata align="center" fileref="install05.gif" format="GIF" />
          </imageobject>
        </mediaobject>

        <tip>
          <para>bei Root-Zugang zum Datenbank-Server kann die Erstellung einer
          Datenbank gewählt werden, bei gehosteten Seiten ist dies in der
          Regel nicht möglich</para>
        </tip>
      </step>

      <step>
        <para>Jetzt werden die notwendigen Tabellen angelegt. Sollte es dabei
        Probleme geben, kommt eine entsprechende Meldung.</para>

        <mediaobject>
          <imageobject>
            <imagedata align="center" fileref="install06.gif" format="GIF" />
          </imageobject>
        </mediaobject>
      </step>

      <step>
        <para>Weiter geht es damit, dass die Daten für den Administrator
        abgefragt werden. Dieser kann alles verändern, was die Seite betrifft.
        Aussehen, Einstellungen, Artikel hinzufügen oder löschen etc. Das
        Passwort solltest Du also nicht verlieren...</para>

        <variablelist>
          <varlistentry>
            <term>Admin-Login</term>

            <listitem>
              <para>Loginname des Administrators</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>Admin-Name</term>

            <listitem>
              <para>vollständiger Name des Administrators</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>Admin-Passwort</term>

            <listitem>
              <para>Passwort für den Administrator-Zugang</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>Admin-Passwort (Bestätigung)</term>

            <listitem>
              <para>Nochmals das Passwort für den Administrator-Zugang zur
              Vermeidung von Tippfehlern (das Passwort wird ja nicht im
              Klartext angezeigt)</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>Admin-Email</term>

            <listitem>
              <para>vollständige E-Mail-Adresse des Admins eingeben</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>Admin-URL</term>

            <listitem>
              <para>Website des Administrators, in aller Regel die Adresse der
              neuen Seite</para>
            </listitem>
          </varlistentry>
        </variablelist>

        <mediaobject>
          <imageobject>
            <imagedata align="center" fileref="install07.gif" format="GIF" />
          </imageobject>
        </mediaobject>
      </step>

      <step>
        <para>Jetzt werden noch die entsprechenden Nutzer-Tabellen angelegt,
        die Credits gezeigt und dann ist die Installation auch schon
        abgeschlossen.</para>

        <mediaobject>
          <imageobject>
            <imagedata align="center" fileref="install08.gif" format="GIF" />
          </imageobject>
        </mediaobject>
      </step>

      <step>
        <para>Nun kann man zur neu eingerichteten PostNuke-Seite wechseln:
        <systemitem
        class="systemname">http://www.deineseite.de/index.php</systemitem>.
        Die Seite sieht dann wie folgt aus:</para>

        <mediaobject>
          <imageobject>
            <imagedata align="center" fileref="install09.gif" format="GIF" />
          </imageobject>
        </mediaobject>

        <para>Sollte keine PostNuke-Seite angezeigt werden, ist die
        Installation nicht korrekt durchgelaufen - in diesem Fall sollte man
        als erstes überprüfen, ob im root-Verzeichnis eine Datei
        <function>index.htm</function> bzw. <filename>index.html</filename>
        (werden in aller Regel vor der für PostNuke notwendigen
        <filename>index.php</filename> geladen) liegt - in diesem Fall diese
        Dateien löschen bzw. umbenennen. Bei Updates/Upgrades kann es unter
        Umständen auch möglich sein, dass zuerst noch die Cookies im Browser
        gelöscht werden müssen. Bei sonstigen Installationsproblemen am besten
        in den Foren bei <ulink
        url="http://www.post-nuke.net">http://www.post-nuke.net</ulink> bzw.
        <ulink url="http://www.postnuke.com">http://www.PostNuke.com</ulink>
        nach Hilfe suchen.</para>
      </step>

      <step>
        <para>Wenn die PostNuke-Seite erscheint, war die Installation
        erfolgreich - in diesem Fall sollten zum Abschluss der Installation
        unbedingt ein paar Dinge gelöscht werden:</para>

        <caution>
          <para>Das gesamte Verzeichnis <filename>/install</filename> und die
          <filename>install.php</filename> auf dem Webspace muß gelöscht
          werden.</para>

          <para>Die Rechte für die <filename>config.php</filename> und
          <filename>config-old.php</filename> sollten wieder zurück auf 664
          gesetzt werden.</para>
        </caution>
      </step>

      <step>
        <para>Wenn Du jetzt nicht zu schnell warst, hast Du Dein FTP-Programm
        noch auf. Das brauchst Du noch, denn wie Dir sicher auffällt steht als
        Reminder auf der Seite, dass Du die <filename>install.php</filename>
        und den <filename>install</filename>-Ordner aus Sicherheitsgründen
        löschen sollst, also bietet es sich an, das jetzt zu tun.</para>

        <warning>
          <para>Immer wieder kommt es vor, dass der
          <filename>install</filename>-Ordner nicht gelöscht wird. Das
          bedeutete in früheren Versionen, dass <emphasis>jeder</emphasis> die
          Installationsroutine erneut aufrufen und eine gänzlich andere Seite
          installieren kann. "Nebenbei" kann er auch noch die
          Datenbank-Zugangsdaten erspähen. Es ist daher immens wichtig für die
          Sicherheit, den <filename>install</filename>-Ordner zu
          entfernen.</para>
        </warning>

        <para>Seit Version .750 ist es nicht mehr möglich, die Administration
        aufzurufen, solange die Installationsdateien noch vorhanden
        sind.</para>
      </step>
    </procedure>
  </section>

  <section>
    <title>Upgrade</title>

    <para>PostNuke unterstützt das Upgrade von allen früheren Versionen und
    einer Anzahl anderer *Nuke Derivate wie <application>PHPNuke</application>
    und <application>MyPHPNuke</application>. Sollte vorher eine Version von
    <application>PHPNuke</application> installiert gewesen sein, so läßt sich
    dieses auf PostNuke upgraden, solange es höchstens <application>PHPNuke
    5.4</application> war - bei allen neueren Versionen von PHPNuke wird das
    Upgrade-Skript nicht funktionieren. Weiterhin wird das Upgrade von
    MyPHPNuke 1.8.7 und 1.8.8 unterstützt.Bei einem Upgrade sind auf jeden
    Fall auch eventuell zusätzlich installierte Module zu berücksichtigen -
    gerade bei grösseren Installationen sollte ein Upgrade immer zuerst lokal
    getestet werden.</para>

    <warning>
      <para>Bevor mit dem Upgrade begonnen wird, ein Backup anlegen. Nur mit
      einem vollständigen Backup (Datenbank und Filesystem) kann im
      Problemfall wieder der Ursprungszustand wiederhergestellt werden!</para>
    </warning>

    <para>Da aber der Teufel im Detail steckt, sollte ein Update
    <emphasis>niemals</emphasis> direkt auf einer Live-Seite durchgeführt
    werden. Stets sollte eine Testmigration vorausgehen.</para>

    <para>Stelle Dir die folgenden Fragen:</para>

    <itemizedlist>
      <listitem>
        <para>Welche Module und Blöcke setze ich überhaupt ein?</para>
      </listitem>

      <listitem>
        <para>Welche von ihnen will ich überhaupt weiterhin nutzen oder bin
        ich ihrer über? (Merke: Alles was man jetzt rauschmeißt muß man nicht
        mehr updaten)</para>
      </listitem>
    </itemizedlist>

    <para>Wenn diese Liste zusammengetragen hat kann man sich an den nächsten
    Schritt machen</para>

    <itemizedlist>
      <listitem>
        <para>Gibt es für diese Module bzw. Blöcke Versionen die mit der neuen
        PostNuke-Version zusammenarbeiten?</para>
      </listitem>

      <listitem>
        <para>Wenn nein: Will ich sie immer noch benutzen? Dann selber umbauen
        bzw. jemanden finden. Oder aber: Gibt es ähnliche Module die den
        gleichen Zweck erfüllen? Migieren ist zu 90% einfacher als
        umschreiben</para>
      </listitem>
    </itemizedlist>

    <para>Jetzt geht es daran das Update einmal testweise auf einem Testserver
    durchzuspielen. Am einfachsten geht dies durch die lokale Installation
    eines Web-Servers. Auf diesen lokalen Server kommt nun:</para>

    <itemizedlist>
      <listitem>
        <para>Das aktuelle PostNuke-Paket</para>
      </listitem>

      <listitem>
        <para>Eine <filename>config.php</filename>, in der die Daten des
        lokalen MySQL-Servers eingetragen sind</para>
      </listitem>

      <listitem>
        <para>sämtliche Module, die sich auf dem Live-Server im Einsatz
        befinden</para>
      </listitem>

      <listitem>
        <para>Das Theme, das auf dem Live-Server eingesetzt wird</para>
      </listitem>
    </itemizedlist>

    <para>Mittels <application>phpMyAdmin</application> oder ähnlichen Tools
    kopiert man die Datenbank des Web-Servers auf den lokalen Server.</para>

    <para>Jetzt kann die Installation via <filename>install.php</filename>
    aufgerufen werden. Den Anweisungen des Skriptes folgen und bei der Frage
    <guimenu>New install</guimenu> bzw. <guimenu>Upgrade</guimenu> den Punkt
    <guimenu>Upgrade</guimenu> wählen und die bisherigen Nuke-Version angeben.
    Der Rest der Installation sollte automatisch bzw. wie bei einer
    Neuinstallation ablaufen. Anschließend sollte alles wieder funktionieren.
    Falls dies nicht der Fall ist, muss man Schritt für Schritt nach dem
    Fehler suchen. Dies passiert bequem offline, ohne den Betrieb der
    Live-Seite zu stören. Wenn es sich dabei tatsächlich um PostNuke-Fehler
    handelt, so sollten diese übrigens im Forum oder (besser) im Bug-Tracker
    des NOC gemeldet werden.</para>

    <para>Nachdem man so zumindest die wirklich wichtigen Dinge zum Laufen
    gebracht hat gehts weiter im Text:</para>

    <para>An der alten Version vorgenommene Modifikationen</para>

    <itemizedlist>
      <listitem>
        <para>Was von den alten Änderungen ist nunmehr überflüssig?</para>
      </listitem>

      <listitem>
        <para>Was muß wieder modifiziert werden</para>
      </listitem>

      <listitem>
        <para>Was muß evtl. zusätzlich geändert werden?</para>
      </listitem>
    </itemizedlist>

    <para>Wenn alles läuft, daran denken, die install.php sowie das gesamte
    install-Verzeichnis zu löschen!</para>

    <para>Irgendwann ist man dann hoffentlich soweit das man den Testserver
    vollständig auf das neue System umgestellt und alle erforderlichen
    Anpasungen vorgenommen sind. Nachdem man nun eine lauffähige Version lokal
    hat, geht es darum, diese auch auf dem Server zur Verfügung zu
    stellen.</para>

    <para>War der 'live' Server während dieser Phase offline ist der Rest
    schnell erledigt. Dateien und Datenbank auf den 'live' Server spiegeln und
    wieder online gehen.</para>

    <para>War der 'live' Server während dieser Phase online weil man seinen
    Nutzern keine unbestimmte - aber bestimmt längerfristige- Offlinezeit
    zumuten will oder kann wird es nochmal ein wenig komplizier:</para>

    <procedure>
      <step>
        <para>'Live' Server offline nehmen</para>
      </step>

      <step>
        <para>Updates wie zuvor geprobt vornehmen.</para>
      </step>

      <step>
        <para>"Live"-Server online nehmen</para>
      </step>
    </procedure>

    <para>Es ist empfehlenswert, für die Zeit des Uploads eine Seite zu
    schalten, die auf den kurzfristigen Ausfall hinweist. Nachdem die Dateien
    hochgeladen wurden und die Datenbank von lokal wieder auf den Live-Server
    gebracht wurde, kann dieser wieder online gehen.</para>

    <para>Optimal ist es natürlich, die neue Version auf dem Live-Server in
    ein Parallelverzeichnis zu kopieren, und auch die Datenbank nicht über die
    bestehende zu schreiben (gegebenenfalls einen neuen Präfix vergeben). Auf
    diese Art hat man immer noch eine lauffähige Version des Live-Servers zu
    Hand. Die meisten Provider bieten es an, das Verzeichnis, auf das die
    Seite zeigt, frei zu wählen. Wenn die Daten oben sind, muss man also per
    Administrationsmenü des Providers als Startverzeichnis das mit der neuen
    Installation anwählen.</para>

    <para>In beiden Fällen muss auf die <filename>config.php</filename>
    geachtet werden: Nicht mit der Version der lokalen Installation
    überschreiben!</para>
  </section>

  <section>
    <title>FAQ - Fragen &amp; Antworten</title>

    <para>In diesem Abschnitt werden einige der häufigsten Fragen bei der
    Installation geklärt:</para>

    <section>
      <title>Was sind meine Verbindungsdaten in der config.php?</title>

      <para>Normalerweise wird die config.php bei der Installation automatisch
      erzeugt und muss nicht manuell bearbeitet werden. Sollte dies trotzdem
      einmal notwendig sein, sollten folgende Angaben ausgefüllt
      werden:</para>

      <programlisting>$pnconfig['dbtype'] = 'mysql'; <co id="configphp.dbtype" />
$pnconfig['dbtabletype'] = 'myisam'; <co id="configphp.dbtabletype" />
$pnconfig['dbhost'] = 'localhost'; <co id="configphp.dbhost" />
$pnconfig['dbuname'] = 'cm9vdA=='; <co id="configphp.dbuname" />
$pnconfig['dbpass'] = ''; <co id="configphp.dbpass" />
$pnconfig['dbname'] = 'Phoenix'; <co id="configphp.dbname" />
$pnconfig['system'] = '0'; <co id="configphp.system" />
$pnconfig['prefix'] = 'nuke'; <co id="configphp.prefix" />
$pnconfig['encoded'] = '1'; <co id="configphp.encoded" />
$pnconfig['pconnect'] = '0'; <co id="configphp.pconnect" />
$pnconfig['temp'] = 'pnTemp'; <co id="configphp.pntemp" /></programlisting>

      <calloutlist>
        <callout arearefs="configphp.dbtype">
          <para>Typ der Datenbank</para>
        </callout>

        <callout arearefs="configphp.dbtabletype">
          <para>Tabellentyp der Datenbank</para>
        </callout>

        <callout arearefs="configphp.dbhost">
          <para>MySQL Datenbankserver</para>
        </callout>

        <callout arearefs="configphp.dbuname">
          <para>MySQL Datenbankbenutzer</para>
        </callout>

        <callout arearefs="configphp.dbpass">
          <para>MySQL Datenbankpasswort</para>
        </callout>

        <callout arearefs="configphp.dbname">
          <para>MySQL Datenbankname</para>
        </callout>

        <callout arearefs="configphp.system">
          <para>0 für Unix/Linux, 1 für Windows</para>
        </callout>

        <callout arearefs="configphp.prefix">
          <para>MySQL Tabellenprefix</para>
        </callout>

        <callout arearefs="configphp.encoded">
          <para>0 für unkodierten, 1 für kodierten Benutzernamen/-passwort.
          Die Daten sind Base_64 kodiert - um manuell eine
          Benutzername/passwort-Kombination von Klartext in Base_64 zu
          wandeln, kann man sich mit dem PostNuke Swiss Army Knife Tool
          behelfen.</para>
        </callout>

        <callout arearefs="configphp.pconnect">
          <para>Entscheidet darüber, ob sogenannte "Persistente
          Datenbankverbindungen" genutzt werden. Unter Umständen kann damit
          die Leistung erhöht werden. Mehr dazu in der <ulink
          url="http://www.php.net/manual/de/features.persistent-connections.php">PHP-Dokumentation</ulink>.</para>
        </callout>

        <callout arearefs="configphp.pntemp">
          <para>Postition des temporären PostNuke-Verzeichnisses</para>
        </callout>
      </calloutlist>
    </section>

    <section>
      <title>Ist es möglich, PostNuke auch auf einem PostgreSQL DBMS zu
      installieren?</title>

      <para>Prinzipiell sollte es schon funktionieren, via ADODB auch andere
      Datenbanken zu nutzen (das pnForum läuft beispielsweise auch in einer
      Oracle-Installation). Eventuell hat das jeweilige DBMS aber spezielle
      Eigenarten, die zusätzlich berücksichtigt werden müssen (z.B. keine LEFT
      JOINS in Oracle). Generell gilt die Datenbank-Unabhängigkeit natürlich
      auch nur für die Module, die ADODB-konform ausgeführt sind.</para>
    </section>

    <section>
      <title>Kann ich meine Site einfach in anderes Verzeichnis
      verschieben?</title>

      <para>Ein Backup vorher kann nie schaden und bis auf absolute Links in
      der Datenbank sollte es keine Probleme geben. Die kannst Du aber einfach
      in einer DB-Dump-Kopie durch suchen&amp;ersetzen austauschen und das
      Dump zurückspielen.</para>
    </section>

    <section>
      <title>Obwohl ich das deutsche Sprachpaket eingespielt habe, bleibt die
      Site englisch.</title>

      <para>Überprüfe, ob die Usereinstellungen nicht noch auf englisch
      gesetzt sind. Das umzuschalten reicht der Aufruf von
      <filename>http://www.deineseite.de/index.php?newlang=deu</filename></para>
    </section>

    <section>
      <title>Was macht man wenn die PostNuke Installation durch die
      Installation eines neuen Blocks/Modules so gestört wird, das man nicht
      mehr in das Block- oder Module-Administratormenü gelangt? Kann man das
      irgendwie reparieren?</title>

      <para>Erstmal kann man die Adminsitration über <systemitem
      class="systemname">http://www.example.com/admin.php</systemitem>
      erreichen. Sollte auch das nicht mehr Fgehen, kann evtl. das Swiss Army
      Knife Tool helfen. Das ist vor allem bei vermurksten Themes der Fall.
      Als dritte Möglichkeit kann man natürlich auch manuell die DB
      bearbeiten: Alle Tables des Moduls löschen, alle dazugehörigen Variablen
      in <command>$prefix_module_vars</command> entfernen und in der
      <filename>$prefix_modules</filename> das Modul löschen.</para>
    </section>

    <section>
      <title>Folgender Fehler tritt bei der Installation auf: Warning: Failed
      opening '/....../install.php' for inclusion
      (include_path='.:/usr/share/php') in Unknown on line 0</title>

      <para>Die Seite hat noch die falschen Benutzerrechte mit dem
      Linux-Befehl "chown" sollte man dem Webserver alle Dateien
      überlassen.</para>
    </section>
  </section>
</chapter>