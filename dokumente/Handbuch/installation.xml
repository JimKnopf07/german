<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN"
"http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd">
<chapter id="installation" lang="de-DE" status="draft">
  <!-- $Id$ -->

  <chapterinfo>
    <releaseinfo>$Revision$</releaseinfo>

    <date>$Date$</date>
  </chapterinfo>

  <title>Installation<indexterm>
      <primary>Installation</primary>
    </indexterm></title>

  <section id="vorderinstallation">
    <title>Vor der Installation</title>

    <para>Für die erfolgreiche Installation von PostNuke wird ein
    funktionierender Webserver mit <ulink
    url="http://www.php.net/">PHP</ulink> und eine Datenbank benötigt. Durch
    die Benutzung der Datenbankabstraktion <ulink
    url="http://adodb.sourceforge.net/">ADOdb</ulink> soll PostNuke in Zukunft
    mit einer Vielzahl Datenbanksysteme funktionieren - zur Zeit empfiehlt
    sich nur die Benutzung von <ulink
    url="http://www.mysql.com/">MySQL</ulink> , da vor allem Modul von
    Dritt-Anbietern oft noch nicht vollkommen auf ADOdb umgestellt
    sind.</para>

    <section id="providerwahl">
      <title>Auswahl eines geeigneten Providers<indexterm>
          <primary>Installation</primary>

          <secondary>Providerwahl</secondary>
        </indexterm></title>

      <para>Zur besseren Auswahl eines geeigneten Providers sind die
      notwendigen Voraussetzungen für PostNuke schnell
      zusammengestellt:</para>

      <variablelist>
        <varlistentry>
          <term>PHP<indexterm>
              <primary>PHP</primary>
            </indexterm></term>

          <listitem>
            <para>PostNuke besteht aus einer Reihe an PHP-Skripten. Eine
            PHP-Unterstützung ist also notwendig. Die Mindestversion ist PHP
            4.1 Mit bestimmten Versionen von PHP (vor allem 4.2.3) sind im
            Zusammenspiel mit PostNuke Fehler berichtet worden; allerdings hat
            man als Kunde im allgemeinen keinen Einfluß auf die eingesetzte
            PHP-Version. Man sollt allerdings darauf achten, dass der
            safe_mode nicht eingeschaltet ist, da dieses Sicherheitsfeature
            von PHP Uploads erfolgreich verhindert. Damit lassen sich z.B. die
            meisten Gallerien nicht betreiben.</para>

            <para>In der PHP-Umgebung müssen mindestens 8MB für die Skripte
            zur Verfügung stehen. Allerdings kommt es auch hier schon zu
            einigen Problemen, zum Beispiel mit XExpress und PostCalendar. Wer
            auf Nummer sicher gehen will, sollte auf mindestens 16MB
            achten.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>Datenbank<indexterm>
              <primary>Datenbank</primary>
            </indexterm><indexterm>
              <primary>MySQL</primary>
            </indexterm></term>

          <listitem>
            <para>Alle Inhalte von PostNuke werden in einer Datenbank
            gespeichert. Obwohl PostNuke durch die Verwendung der
            ADOdb-Bibliotheken theoretisch unabhängig von der verwendeten
            Datenbank ist, empfiehlt sich die Verwendung von MySQL, da einige
            ältere Module von Drittentwicklern noch nicht komplett auf ADOdb
            umgestellt sind. MySQL ist aber die Datenbank, die von den meisten
            Providern ohnehin eingesetzt wird.</para>

            <note>
              <para>Prinzipiell ist es auch möglich, PostNuke auch mit einem
              anderen Datenbanksystem als MySQL zu installieren, da die
              Datenbankzugriffe über die datenbankunabhängige Schnittstelle
              ADOdb<indexterm>
                  <primary>ADOdb</primary>
                </indexterm> nutzen. Allerdings ist die
              Datenbankunabhängigkeit momentan noch kein designziel von
              PostNuke gewesen, und so muss man sich auf eigene Experimente
              verlassen. Eventuell hat das jeweilige Datenbanksystem spezielle
              Eigenarten, die zusätzlich berücksichtigt werden müssen (z.B.
              keine LEFT JOINS in Oracle). Generell gilt die
              Datenbank-Unabhängigkeit natürlich auch nur für die Module, die
              ADOdb-konform ausgeführt sind. Das pnForum läuft beispielsweise
              auch in einer Oracle-Installation.</para>
            </note>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>Webserver<indexterm>
              <primary>Webserver</primary>
            </indexterm></term>

          <listitem>
            <para>PostNuke selbst ist es egal, welcher Webserver auf welcher
            Plattform zum Einsatz kommt. Emfehlenswert ist der Einsatz des
            Apache Webservers, da einige Tricks (z.B. die sogenannten
            &ldquor;kurzen URLs&rdquor;) bestimmte Webserver-Module
            voraussetzen, die nur der Apache bietet. Insbesondere muß für den
            Einsatz von &ldquor;kurzen URLs&rdquor; das Modul mod_rewrite
            aktiviert sein.</para>

            <warning>
              <para>Damit die Links in PostNuke korrekt funktionieren, muss
              der Web-Server die Umgebungsvariable
              <varname>HTTP_HOST</varname> setzen. Der Web-Server <ulink
              url="http://www.omnicron.ca/">OmniHTTPd</ulink> macht dies erst
              ab der Professional-Version 2.09. Um sich bei älteren Versionen
              zu behelfen, ist es möglich, eins Stammverzeichnis von PostNuke
              eine Datei namens <filename>personal_config.php</filename> mit
              folgendem Inhalt anzulegen:</para>

              <programlisting>&lt;?php
$_SERVER['HTTP_HOST'] = 'www.example.com';
?&gt;</programlisting>

              <para>Für den Betrieb einer PostNuke-Seite ist der Apache
              Web-Server dem OmniHTTPd auf jeden Fall vorzuziehen.</para>
            </warning>
          </listitem>
        </varlistentry>
      </variablelist>

      <para>Erfüllt ein Webspace<indexterm>
          <primary>Webspace</primary>
        </indexterm>-Angebot diese Voraussetzungen, so ist der Rest meist nur
      eine Frage des Preises. Wie oft, gilt auch in diesem Bereich &ldquor;you
      get what you pay for&rdquor;...</para>

      <para>Darüber hinaus müssen natürlich die folgenden Überlegungen
      angestellt werden:</para>

      <itemizedlist>
        <listitem>
          <para>Geplante Größe des Internetangebotes</para>
        </listitem>

        <listitem>
          <para>Das zu erwartende monatliche Transfervolumen</para>
        </listitem>

        <listitem>
          <para>Anzahl der Email-Postfächer</para>
        </listitem>
      </itemizedlist>

      <para>Konkrete Anbieter anzugeben, ist schwierig. Eine gute Übersicht
      findet man auf <ulink
      url="http://www.webhostlist.de/">WebHostlist.de</ulink>. Dort gibt es
      auch "<ulink
      url="http://www.webhostlist.de/host/info/provider.php3">Tipps zur
      Providerwahl</ulink>".</para>

      <tip>
        <para><emphasis>Kostenloser Webspace?<indexterm>
            <primary>Tripod</primary>
          </indexterm><indexterm>
            <primary>Lycos</primary>
          </indexterm><indexterm>
            <primary>Webspace</primary>

            <secondary>kostenloser</secondary>
          </indexterm></emphasis></para>

        <para>Eigentlich ist das Free-Hosting-Paket von Lycos/Tripod ja eine
        tolle Sache. 50MB Speicherplatz, PHP und MySQL kostenlos &ndash;
        eigentlich ideal, um eine kleine PostNuke-Seite zu installieren.
        Allerdings bekommt man PostNuke auf diesem Angebot nicht
        zufriedenstellend zum Laufen. Das Werbegerümpel, was im http-header(!)
        eingebunden ist und die etwas seltsame php4u-Umgebung werfen so einige
        Probleme im Betrieb der Seite auf. Einzige Lösung: einen gescheiten
        Provider suchen. Wenn man sich davon aber nicht abschrecken läßt, und
        es trotzdem versuchen möchte, helfen die folgenden Links
        weiter:</para>

        <itemizedlist>
          <listitem>
            <para><ulink
            url="http://mikespub.net/copdab/lycos.txt">http://mikespub.net/copdab/lycos.txt</ulink></para>
          </listitem>

          <listitem>
            <para><ulink
            url="http://mitglied.lycos.de/jnapp">http://mitglied.lycos.de/jnapp</ulink></para>
          </listitem>
        </itemizedlist>
      </tip>
    </section>

    <section id="lokaleinstallation">
      <title>Installation auf dem heimischen Rechner</title>

      <para>Um PostNuke ausgiebig testen zu können, empfiehlt sich die
      Installation eines Web-Servers mit PHP und MySQL auf dem heimischen PC.
      Diese Installation beschreiben wir im Anhang.</para>

      <tip>
        <para>Wer Wert auf eine "Ein-Klick-Lösung" legt, sollte sich <ulink
        url="http://www.apachefriends.org/de/">XAMPP</ulink><indexterm>
            <primary>XAMPP</primary>
          </indexterm> ansehen. XAMPP ist eine Distribution von Apache, MySQL,
        PHP und Perl, die es ermöglicht diese Programme auf sehr einfache
        Weise zu installieren.</para>

        <para>Zur Zeit gibt es drei XAMPP-Distributionen:Für Windows, Linux
        und Solaris. Der Download ist aber recht groß. Wer keine Lust auf den
        Download hat, kann auch eine CD für 5 Euro bestellen. Nach der denkbar
        einfachen Installation unter Windows liefen alle Module, die hier zum
        Einsatz kommen, problemlos.</para>
      </tip>
    </section>
  </section>

  <section id="verzeichnisstruktur">
    <title>Die Verzeichnisstruktur von PostNuke<indexterm>
        <primary>Verzeichnisstruktur</primary>
      </indexterm></title>

    <bridgehead>Download und Entpacken der notwendigen Dateien<indexterm>
        <primary>Download</primary>
      </indexterm></bridgehead>

    <para>Zunächst einmal besorgen wir uns die aktuelle
    PostNuke-Version.</para>

    <procedure>
      <step>
        <para>Herunterladen der aktuellen Version von PostNuke und der
        aktuellen Sprachdatei als ZIP-Archiv von <ulink
        url="http://www.post-nuke.net/">http://www.post-nuke.net</ulink>.<indexterm>
            <primary>Download</primary>

            <secondary>Grundpaket</secondary>
          </indexterm><indexterm>
            <primary>Download</primary>

            <secondary>Sprachpaket</secondary>
          </indexterm></para>
      </step>

      <step>
        <para>Überprüfen der Prüfsummen.<indexterm>
            <primary>md5</primary>
          </indexterm><indexterm>
            <primary>Prüfsumme</primary>
          </indexterm> Um zu überprüfen, ob es sich wirklich um unveränderte
        Archive handelt, sollte nach dem Download unbedingt die md5-Prüfsumme
        des Archivs mit der auf den verschiedenen Webseiten
        (http://www.post-nuke.net und http://www.postnuke.com) angegebenen
        Prüfsumme vergleichen. Bei LINUX-Systemen gehört das Programm
        <command>md5sum</command> in jeder Distribution enthalten sein. Für
        Windows gibt es unzählige Implementationen; am besten man sucht bei
        google nach <command>md5sum.exe</command> oder
        <command>md5.exe</command>. Bequem ist <ulink
        url="http://winmd5sum.solidblue.ca/">winMd5Sum</ulink> von SolidBlue,
        welches die md5-Prüfsumme per Drag&amp;Dop anzeigt und vergleichen
        kann.</para>

        <note>
          <para>Der md5-Algorithmus ist ein Verfahren zur Berechnung einer
          Prüfsumme einer Datei. Diese Verfahren ist im <ulink
          url="http://www.ietf.org/rfc/rfc1321.txt">RFC 1321</ulink>
          beschrieben. Die Prüfsummen sind daher für Windows-, LINUX- und
          andere Systeme identisch.</para>

          <para>Man kann die md5-Prüfsumme benutzen, um herauszufinden, ob
          sich eine Datei geändert hat. Dazu muss man die Prüfsumme berechnen
          und notieren. Später kann man die Prüfsumme dann erneut berechnen.
          Ist sie unverändert, dann ist die Wahrscheinlichkeit sehr groß, dass
          sich auch die Datei nicht verändert hat.</para>

          <para>Die korrekte Prüfsumme bestätigt allerdings nur, dass der
          Inhalt einer Datei unverändert ist, nicht aber, dass sie vom
          angegebenen Absender stammen. Es könnte jemand den Inhalt der Datei
          manipulieren, eine dazu passende Prüfsumme erzeugen und beides
          weiterschicken. Daher ist es sinnvoll, die Prüfsumme sowohl auf
          www.post-nuke.net wie auch auf www.postnuke.com zu
          vergleichen.</para>
        </note>
      </step>

      <step>
        <para>Entpacken der Archive. Für Anwender von Windows XP ist die
        ZIP-Fähigkeit im System eingebaut, für andere gibt es z. B. <ulink
        url="http://www.7-zip.org/">7-ZIP<indexterm>
            <primary>7-ZIP</primary>
          </indexterm></ulink> oder ähnliche Programme, die das Archiv
        entpacken.</para>
      </step>

      <step>
        <para>Es entstehen jetzt zwei Verzeichnisbäume, einer mit den
        PostNuke-Dateien, der andere mit den deutschen Sprachdateien. Diese
        Bäume werden nun zu einem zusammenkopiert, und zwar so, dass die
        Verzeichnisse <filename>html</filename> übereinstimmen.</para>

        <screenshot>
          <mediaobject>
            <textobject>
              <para>Die Verzeichnisstruktur nach dem Entpacken. Die beiden
              markierten <filename>html</filename>-Verzeichnisse müssen
              ineinander kopiert werden.</para>
            </textobject>

            <imageobject>
              <imagedata align="center" fileref="dateistruktur.gif"
                         format="GIF" />
            </imageobject>
          </mediaobject>
        </screenshot>
      </step>

      <step>
        <para>Es entsteht so ein kompletter Verzeichnisbaum, der alle
        benötigten Dateien enthält.</para>
      </step>
    </procedure>

    <bridgehead>PostNuke unter die Motorhaube geschaut</bridgehead>

    <para>Im Hauptverzeichnis liegen nur wenige Dateien &mdash; wichtig ist
    hier vor allem die <filename>config.php<indexterm>
        <primary>config.php</primary>
      </indexterm></filename> und die <filename>config-old.php<indexterm>
        <primary>config-old.php</primary>
      </indexterm></filename>, die im Laufe der Installation vom System
    automatisch geschrieben wird. Alle anderen Dateien sind Systemdateien, und
    müssen nicht geändert werden.</para>

    <para>Das <filename class="directory">/docs<indexterm>
        <primary>Verzeichnisse</primary>

        <secondary>docs</secondary>
      </indexterm></filename>-Verzeichnis enthält einige Dateien mit
    Danksagungen an die verschiedenen Postnuke-Entwickler und eine Liste der
    geänder Dateien.</para>

    <para>Unter <filename class="directory">/images<indexterm>
        <primary>Verzeichnisse</primary>

        <secondary>images</secondary>
      </indexterm></filename> liegen die Grafiken, die vom System benutzt
    werden. Zum Beispiel unter /images/topics kann man die Bilder für die
    Topics ablegen.</para>

    <para>Das <filename class="directory">/includes<indexterm>
        <primary>Verzeichnisse</primary>

        <secondary>blocks</secondary>
      </indexterm></filename>-Verzeichnis enthält die wichtigsten
    Systemdateien &mdash; die verschiedenen Interfaces, auf die alle Module
    zurückgreifen. Außerdem liegen hier im Unterverzeichnis <filename
    class="directory">/includes/blocks</filename> die mitgelieferten
    Blöcke<indexterm>
        <primary>Blöcke</primary>
      </indexterm>. Weitere Blöcke befinden sind in den jeweiligen
    Modulverzeichnissen.</para>

    <para>Für die Installation ist das <filename
    class="directory">/install<indexterm>
        <primary>Verzeichnisse</primary>

        <secondary>install</secondary>
      </indexterm></filename>-Verzeichnis wichtig. Nach der Installation
    sollte dieses aber zusammen mit der <filename>install.php</filename> aus
    dem Hauptverzeichnis gelöscht werden, da sonst Unbefugte Zugriff auf die
    Datenbank erhalten könnten.</para>

    <para>Wie der Name <filename class="directory">/javascript<indexterm>
        <primary>Verzeichnisse</primary>

        <secondary>javascript</secondary>
      </indexterm></filename> schon sagt, liegen hier verschiedene
    Javascripte, die im ganzen System zur Verfügung stehen.</para>

    <para>Unter <filename class="directory">/language<indexterm>
        <primary>Verzeichnisse</primary>

        <secondary>language</secondary>
      </indexterm></filename> liegen die Sprachdateien<indexterm>
        <primary>Sprachdateien</primary>
      </indexterm>, die systemweit zur Verfügung stehenden
    Sprachdefinitionen.</para>

    <para>Nicht nur die mitgelieferten, sondern auch die zusätzlichen
    Module<indexterm>
        <primary>Module</primary>
      </indexterm> befinden sich im <filename
    class="directory">/modules<indexterm>
        <primary>Verzeichnisse</primary>

        <secondary>modules</secondary>
      </indexterm></filename>-Verzeichnis.</para>

    <para>In <filename class="directory">/pnadodb<indexterm>
        <primary>Verzeichnisse</primary>

        <secondary>pnadodb</secondary>
      </indexterm></filename> liegen die Dateien, die für die
    Datenbankzugriffe verantwortlich sind und dafür sorgen, dass PostNuke mit
    verschiedenen Datenbanksystemen zusammenarbeiten kann.</para>

    <para>Temporäre Dateien werden unter <filename
    class="directory">/pnTemp<indexterm>
        <primary>Verzeichnisse</primary>

        <secondary>pnTemp</secondary>
      </indexterm></filename> abgelegt. Dieses und die Unterverzeichnisse
    müssen für den Webserver beschreibbar sein.</para>

    <para>Unter <filename class="directory">/themes<indexterm>
        <primary>Verzeichnisse</primary>

        <secondary>themes</secondary>
      </indexterm></filename> werden die Layouts abgelegt. Einige
    Beispielthemes sind im Basispaket enthalten. Weitere Themes können selbst
    erstellt oder auf verschiedenen Websites heruntergeladen werden. Zum
    Beispiel <ulink
    url="http://www.cms-themes.de">http://www.cms-themes.de</ulink>.</para>
  </section>

  <section id="systeminstallation">
    <title>Installation des Systems</title>

    <para role="info">Die Installation ist eigentlich sehr einfach und man
    wird, ähnlich der Installation eines Programmes, Schritt für Schritt nach
    den Daten gefragt, die notwendig sind. Zum Abschluss ist die Seite so
    eingerichtet, dass sie bereits komplett funktionsfähig ist.</para>

    <para>Selbstverständlich führen auch bei der PostNuke-Installation viele
    Wege nach Rom, so unterscheidet es sich, ob die Installation via FTP auf
    den Server geladen wird oder ob ein Shell-Zugang besteht und das Archiv
    online entpackt wird. Aber, wie bereits in den Grundlagen erwähnt möchten
    wir hier alles so einfach wie möglich halten und somit erkläre wir den (in
    unseren Augen) gebräuchlichsten Weg.</para>

    <bridgehead>Upload der Dateien<indexterm>
        <primary>Upload</primary>
      </indexterm><indexterm>
        <primary>Installation</primary>

        <secondary>Upload</secondary>
      </indexterm></bridgehead>

    <para>Nachdem die Dateien, wie oben beschrieben, in entpackter Form auf
    dem heimischen PC vorliegen, müssen diese auf den Webspace hochgeladen
    werden. Dies funktioniert überlicherweise mit einem FTP-Programm.</para>

    <tip>
      <para>Ein sehr gutes Programm ist z. B. <ulink
      url="http://filezilla.sourceforge.net/">FileZilla<indexterm>
          <primary>FileZilla</primary>
        </indexterm></ulink>, das unter der GPL erhältlich ist und auch auf
      deutsch verfügbar ist.</para>
    </tip>

    <procedure>
      <step>
        <para>Die notwendigen Dateien liegen unter <filename>/html</filename>.
        Lediglich den Inhalt dieses Verzeichnisses wird hochgeladen, der
        Ordner <filename>Phoenix-SQL<indexterm>
            <primary>Phoenix-SQL</primary>
          </indexterm></filename> braucht nicht upgeloadet werden! Das
        Hochspielen kann einige Zeit in Anspruch nehmen, da es sich um einige
        hundert Dateien handelt, also nicht die Nerven verlieren.</para>
      </step>

      <step>
        <para>Wichtig beim Aufspielen ist, dass die Dateien da landen, wo
        später auf die Seite zugegriffen wird. Soll heissen, dass am besten
        nicht der Ordner <filename>/html/</filename> aufgespielt wird, sondern
        nur dessen Inhalt. Sonst muss die Seite über <systemitem
        class="systemname">http://www.example.com/html/</systemitem>
        angesprochen werden, was unpraktisch ist.</para>
      </step>

      <step>
        <para>Für die Installation müssen die Zugriffsberechtiung für die
        Dateien <filename>config.php</filename> und
        <filename>config-old.php</filename> so sein, dass der Webserver diese
        neu schreiben kann. Bei LINUX-Systemen heisst das, dass man sie auf
        chmod 666 setzen muss.</para>
      </step>

      <step>
        <para>Auch über die Installation hinaus benötigt der Web-Server einen
        Schreibzugriff auf das Verzeichnis <filename>pnTemp</filename> und
        alle Unterverzeichnisse hiervon
        (<filename>pnTemp/pnRender_compiled</filename>,
        <filename>pnTemp/pnRender_cache</filename>,
        <filename><filename>pnTemp/Xanthia_compiled</filename>,
        pnTemp/Xanthia_cache</filename>, und
        <filename><filename>pnTemp/Xanthia_config</filename></filename>). Bei
        LINUX-Systemen heisst das, dass man sie auf chmod 777 setzen
        muss.</para>
      </step>
    </procedure>

    <tip>
      <title>Das Berechtgungssystem unter LINUX</title>

      <para>LINUX kennt drei Gruppen von Anwendern für eine Datei oder ein
      Verzeichnis:</para>

      <itemizedlist>
        <listitem>
          <para>Der Eigentümer (owner)</para>
        </listitem>

        <listitem>
          <para>Die Gruppe (group)</para>
        </listitem>

        <listitem>
          <para>Alle weiteren (others)</para>
        </listitem>
      </itemizedlist>

      <para>Die Berechtigung, die den drei Gruppen zuweisen kann,
      lauten:</para>

      <itemizedlist>
        <listitem>
          <para>das Recht, die Datei zu Lesen bzw. sich die Dateien im
          Verzeichnis anzeigen lassen (<token>r</token>)</para>
        </listitem>

        <listitem>
          <para>das Recht die Datei zu verändern bzw. Dateien im Verzeichnis
          erstellen (<token>w</token>)</para>
        </listitem>

        <listitem>
          <para>das Recht die Datei auszufüren bzw. in das Verzeichnis
          wechseln (<token>x</token>)</para>
        </listitem>
      </itemizedlist>

      <para>Den Rechten sind Werte zugeordet worden:</para>

      <itemizedlist>
        <listitem>
          <para><token>r</token> = 4</para>
        </listitem>

        <listitem>
          <para><token>w</token> = 2</para>
        </listitem>

        <listitem>
          <para><token>x</token> = 1</para>
        </listitem>
      </itemizedlist>

      <para>Durch Addition der jeweiligen Werte und hintereinanderschreiben
      erhält man den chmod-Wert.</para>

      <para>Soll der Eigentümer eine Datei lesen und verändern können, alle
      weiteren nur lesen, so lautet der Wert 644: Lesen (4) und Schreiben (2)
      für den Besitzer, Lesen (4) für die Gruppe und den Rest. Sollen alle
      Anwender in ein Verzeichnis schreiben, so lautet die Berechtigung 777:
      Lesen (4), Schreiben (2) und in das Verzeichnis wechseln (1).</para>

      <para>Die Berechtigungen lassen sich mit den LIXUX-Befehl
      <command>chmod</command> einstellen. Die meisten grafischen
      FTP-Programme erlauben dies, indem man die Datei mit der rechten
      Maustaste anklickt.</para>

      <para>Achtung: Ein FTP-Programm zeigt die Berechtigungen aus der Sicht
      des FTP-Benutzers an; dieser ist der Eigentümer der via FTP
      hochgeladenen Dateien. Der FTP-Benutzer ist in aller Regel nicht
      identisch mit der Benutzerkennung, unter der der Web-Server läuft. Aus
      diesem Grunde gehört der Webserver zu der Gruppe "others".</para>
    </tip>

    <bridgehead>Installation</bridgehead>

    <para>So weit, so gut, jetzt liegen die Dateien auf dem Server und es
    folgt die eigentliche Installation. Darüber legt PostNuke die notwendigen
    Tabellen in der Datenbank an, richtet einen Benutzer ein und leitet dann
    auf die fertige Seite weiter:</para>

    <procedure>
      <step>
        <para>Start der Installation über <systemitem
        class="systemname">http://www.example.com/install.php</systemitem>.<indexterm>
            <primary>install.php</primary>
          </indexterm></para>

        <warning>
          <para>Erhält man den Fehler <computeroutput>Warning: Failed opening
          '/....../install.php' for inclusion
          (include_path='.:/usr/share/php') in Unknown on line
          0</computeroutput>, so haben die Dateien hat die falschen
          Benutzerrechte. Die Berechtigungen müssen so gesetzt sein, dass der
          Webserver alle Dateien lesen kann.</para>
        </warning>
      </step>

      <step>
        <para>Zunächst wählt man die Sprache aus. Hierbei handelt es sich um
        die Sprache des Installationsprogramms.<indexterm>
            <primary>Installation</primary>

            <secondary>Aufrufen</secondary>
          </indexterm></para>

        <mediaobject>
          <imageobject>
            <imagedata align="center" fileref="install01.gif" format="GIF" />
          </imageobject>
        </mediaobject>
      </step>

      <step>
        <para>PostNuke ist unter der Gnu General Public License lizensiert.
        Diese Lizenzvereinbarung ist im nächsten Schritt zu
        akzeptieren.</para>

        <mediaobject>
          <imageobject>
            <imagedata align="center" fileref="install02.gif" format="GIF" />
          </imageobject>
        </mediaobject>
      </step>

      <step>
        <para>Nach dem Akzeptieren der Lizenz folgt eine Überprüfung der
        Zugriffsrechte. Sollte PostNuke dabei auffallen, dass etwas nicht
        stimmt, gibt es Hinweise. Wenn alles passt, sieht es so aus:</para>

        <mediaobject>
          <imageobject>
            <imagedata align="center" fileref="install03.gif" format="GIF" />
          </imageobject>
        </mediaobject>
      </step>

      <step>
        <para>Im nächsten Schritt fragt PostNuke die Daten für den
        Datenbankzugriff ab. Die bekommt man von seinem Provider bzw. wenn man
        einen eigenen Server mit eigener Datenbank benutzt, kennt man ja die
        Einstellungen.</para>

        <variablelist>
          <varlistentry>
            <term>Datenbank Host<indexterm>
                <primary>Installation</primary>

                <secondary>Datenbank</secondary>

                <tertiary>Host</tertiary>
              </indexterm><indexterm>
                <primary>Datenbank</primary>

                <secondary>Host</secondary>
              </indexterm></term>

            <listitem>
              <para>URL des Datenbankservers</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>Datenbank Benutzer<indexterm>
                <primary>Installation</primary>

                <secondary>Datenbank</secondary>

                <tertiary>Benutzer</tertiary>
              </indexterm><indexterm>
                <primary>Datenbank</primary>

                <secondary>Benutzer</secondary>
              </indexterm></term>

            <listitem>
              <para>Benutzer der Datenbank</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>Datenbank Passwort<indexterm>
                <primary>Installation</primary>

                <secondary>Datenbank</secondary>

                <tertiary>Passwort</tertiary>
              </indexterm><indexterm>
                <primary>Datenbank</primary>

                <secondary>Passwort</secondary>
              </indexterm></term>

            <listitem>
              <para>Passwort für die Datenbank</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>Datenbank Name<indexterm>
                <primary>Installation</primary>

                <secondary>Datenbank</secondary>

                <tertiary>Name</tertiary>
              </indexterm><indexterm>
                <primary>Datenbank</primary>

                <secondary>Name</secondary>
              </indexterm></term>

            <listitem>
              <para>Name der Datenbank</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>Table Prefix<indexterm>
                <primary>Installation</primary>

                <secondary>Datenbank</secondary>

                <tertiary>Präfix</tertiary>
              </indexterm><indexterm>
                <primary>Datenbank</primary>

                <secondary>Präfix</secondary>
              </indexterm></term>

            <listitem>
              <para>Falls mehrere Installationen in einer Datenbank geplant
              sind, können hier unterschiedliche Prefixe angegeben werden -
              ansonsten 'nuke'. Mit dem Prefix hat es folgende Bewandnis:
              Jeder Tabelle, die PostNuke anlegt, wird dieser Prefix
              vorangestellt. Auf diese Art kann man, indem unterschiedliche
              Prefixe benutzt werden, in einer Datenbank mehrere
              PostNuke-Installationen unterbringen, die dann je eigene
              Tabellen benutzen.</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>Datenbank Typ<indexterm>
                <primary>Installation</primary>

                <secondary>Datenbank</secondary>

                <tertiary>Typ</tertiary>
              </indexterm><indexterm>
                <primary>Datenbank</primary>

                <secondary>Typ</secondary>
              </indexterm></term>

            <listitem>
              <para>Typ des Datenbanksystems auswählen (z.B. mysql)</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>Datenbank-Tabellen-Typ<indexterm>
                <primary>Installation</primary>

                <secondary>Datenbank</secondary>

                <tertiary>Tabellentyp</tertiary>
              </indexterm><indexterm>
                <primary>Datenbank</primary>

                <secondary>Tabellentyp</secondary>
              </indexterm></term>

            <listitem>
              <para>MyISAM oder INNODB</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>Intranet<indexterm>
                <primary>Installation</primary>

                <secondary>Intranet-Option</secondary>
              </indexterm><indexterm>
                <primary>Intranet-Option</primary>
              </indexterm></term>

            <listitem>
              <para>Die "Intranet"-Option muss nur bei Installationen
              <emphasis>ohne qualifizierten Domainnamen</emphasis> angewählt
              werden. Es werden dann einige Sicherheitseinstellungen von
              PostNuke ausser Kraft gesetzt. Dies ist nicht empfohlen!
              Beispiele für qualifizierte Domainnamen sind
              <systemitem>www.postnuke.com</systemitem> und
              <systemitem>www.example.com</systemitem>, aber auch z.B.
              <systemitem class="ipaddress">127.0.0.1</systemitem> - Beispiele
              für "unqualifizierte" Domainnamen sind
              <systemitem>localhost</systemitem> und
              <systemitem>rechnername</systemitem>.</para>

              <para>Wenn dieser Parameter nicht richtig gesetzt wird, ist
              unter Umständen kein Login möglich!</para>
            </listitem>
          </varlistentry>
        </variablelist>

        <mediaobject>
          <imageobject>
            <imagedata align="center" fileref="install04.gif" format="GIF" />
          </imageobject>
        </mediaobject>
      </step>

      <step>
        <para>Nach dem Klick auf <guimenu>Submit</guimenu> gibt PostNuke
        nochmal eine Zusammenfassung der Daten aus. Wenn diese korrekt sind,
        kann man wählen, ob es sich um eine neue Installation oder ein Upgrade
        handelt. Man geht hier natürlich von einer neuen Installation aus und
        klicken auf <guimenu>Install</guimenu>.</para>

        <mediaobject>
          <imageobject>
            <imagedata align="center" fileref="install05.gif" format="GIF" />
          </imageobject>
        </mediaobject>
      </step>

      <step>
        <para>Im nächsten Schritt fragt PostNuke, ob es eine neue Datenbank
        anlegen soll oder nicht. In der Regel lassen die wenigsten Provider
        das zu, also kann man die Standard-Antwort (im unteren Kästchen kein
        Haken) nutzen.<indexterm>
            <primary>Installation</primary>

            <secondary>Datenbank</secondary>

            <tertiary>Anlegen</tertiary>
          </indexterm><indexterm>
            <primary>Datenbank</primary>

            <secondary>Anlegen</secondary>
          </indexterm></para>

        <mediaobject>
          <imageobject>
            <imagedata align="center" fileref="install06.gif" format="GIF" />
          </imageobject>
        </mediaobject>

        <tip>
          <para>Bei Root-Zugang zum Datenbank-Server kann die Erstellung einer
          Datenbank gewählt werden, bei gehosteten Seiten ist dies in der
          Regel nicht möglich.</para>
        </tip>
      </step>

      <step>
        <para>Jetzt werden die notwendigen Tabellen angelegt. Sollte es dabei
        Probleme geben, kommt eine entsprechende Meldung.</para>

        <mediaobject>
          <imageobject>
            <imagedata align="center" fileref="install07.gif" format="GIF" />
          </imageobject>
        </mediaobject>
      </step>

      <step>
        <para>Weiter geht es damit, dass die Daten für den Administrator
        abgefragt werden. Dieser kann alles verändern, was die Seite betrifft.
        Aussehen, Einstellungen, Artikel hinzufügen oder löschen etc. Das
        Passwort sollte man also nicht verlieren...</para>

        <variablelist>
          <varlistentry>
            <term>Admin-Login<indexterm>
                <primary>Installation</primary>

                <secondary>Admin</secondary>

                <tertiary>Login</tertiary>
              </indexterm></term>

            <listitem>
              <para>Loginname des Administrators</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>Admin-Name<indexterm>
                <primary>Installation</primary>

                <secondary>Admin</secondary>

                <tertiary>Name</tertiary>
              </indexterm></term>

            <listitem>
              <para>vollständiger Name des Administrators</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>Admin-Passwort<indexterm>
                <primary>Installation</primary>

                <secondary>Admin</secondary>

                <tertiary>Passwort</tertiary>
              </indexterm></term>

            <listitem>
              <para>Passwort für den Administrator-Zugang</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>Admin-Passwort (Bestätigung)</term>

            <listitem>
              <para>Nochmals das Passwort für den Administrator-Zugang zur
              Vermeidung von Tippfehlern (das Passwort wird ja nicht im
              Klartext angezeigt)</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>Admin-Email<indexterm>
                <primary>Installation</primary>

                <secondary>Admin</secondary>

                <tertiary>E-Mail</tertiary>
              </indexterm></term>

            <listitem>
              <para>vollständige E-Mail-Adresse des Admins eingeben</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>Admin-URL<indexterm>
                <primary>Installation</primary>

                <secondary>Admin</secondary>

                <tertiary>URL</tertiary>
              </indexterm></term>

            <listitem>
              <para>Website des Administrators, in aller Regel die Adresse der
              neuen Seite</para>
            </listitem>
          </varlistentry>
        </variablelist>

        <mediaobject>
          <imageobject>
            <imagedata align="center" fileref="install08.gif" format="GIF" />
          </imageobject>
        </mediaobject>
      </step>

      <step>
        <para>Jetzt werden noch die entsprechenden Nutzer-Tabellen
        angelegt.</para>

        <mediaobject>
          <imageobject>
            <imagedata align="center" fileref="install09.gif" format="GIF" />
          </imageobject>
        </mediaobject>
      </step>

      <step>
        <para>Nachdem nun noch die Credits angezeigtwerden, ist die
        Installation auch schon abgeschlossen. Unten im Bild gibt es einen
        Link zur neu eingerichteten Seite.</para>

        <mediaobject>
          <imageobject>
            <imagedata align="center" fileref="install10.gif" format="GIF" />
          </imageobject>
        </mediaobject>
      </step>

      <step>
        <para>Nun kann man zur neu eingerichteten PostNuke-Seite wechseln:
        <systemitem
        class="systemname">http://www.example.com/index.php</systemitem>. Die
        Seite sieht dann wie folgt aus:</para>

        <mediaobject>
          <imageobject>
            <imagedata align="center" fileref="install11.gif" format="GIF" />
          </imageobject>
        </mediaobject>

        <para>Sollte keine PostNuke-Seite angezeigt werden, ist die
        Installation nicht korrekt durchgelaufen - in diesem Fall sollte man
        als erstes überprüfen, ob im root-Verzeichnis eine Datei
        <function>index.htm</function> bzw. <filename>index.html</filename>
        (werden in aller Regel vor der für PostNuke notwendigen
        <filename>index.php</filename> geladen) liegt - in diesem Fall diese
        Dateien löschen bzw. umbenennen. Bei Updates/Upgrades kann es unter
        Umständen auch möglich sein, dass zuerst noch die Cookies im Browser
        gelöscht werden müssen. Bei sonstigen Installationsproblemen am besten
        in den Foren bei <ulink
        url="http://www.post-nuke.net">http://www.post-nuke.net</ulink> bzw.
        <ulink url="http://www.postnuke.com">http://www.postnuke.com</ulink>
        nach Hilfe suchen.</para>
      </step>

      <step>
        <para>Wenn die PostNuke-Seite erscheint, war die Installation
        erfolgreich - in diesem Fall sollten zum Abschluss der Installation
        unbedingt ein paar Dinge gelöscht werden:</para>

        <caution>
          <itemizedlist>
            <listitem>
              <para>Das gesamte Verzeichnis <filename>/install</filename> und
              die <filename>install.php</filename> auf dem Webspace muß
              gelöscht werden.<indexterm>
                  <primary>Installation</primary>

                  <secondary><filename>install.php</filename></secondary>
                </indexterm><indexterm>
                  <primary>Installation</primary>

                  <secondary><filename>install</filename>-Verzeichnis</secondary>
                </indexterm></para>
            </listitem>

            <listitem>
              <para>Die Rechte für die <filename>config.php</filename> und
              <filename>config-old.php</filename> sollten wieder zurück auf
              644 gesetzt werden.<indexterm>
                  <primary>Installation</primary>

                  <secondary><filename>config.php</filename></secondary>
                </indexterm><indexterm>
                  <primary>Installation</primary>

                  <secondary><filename>config-old.php</filename></secondary>
                </indexterm><indexterm>
                  <primary><filename>config.php</filename></primary>
                </indexterm> (<filename>pnTemp</filename> und die
              Unterverzeichnisse bleiben bei den eingestellten
              Rechten).</para>
            </listitem>
          </itemizedlist>
        </caution>

        <warning>
          <para>Immer wieder kommt es vor, dass der
          <filename>install</filename>-Ordner nicht gelöscht wird. Das
          bedeutete in früheren Versionen, dass <emphasis>jeder</emphasis> die
          Installationsroutine erneut aufrufen und eine gänzlich andere Seite
          installieren kann. "Nebenbei" kann er auch noch die
          Datenbank-Zugangsdaten erspähen. Es ist daher sehr wichtig für die
          Sicherheit, den <filename>install</filename>-Ordner zu
          entfernen.</para>
        </warning>

        <para>Seit Version .750 ist es nicht mehr möglich, die Administration
        aufzurufen, solange die Installationsdateien noch vorhanden
        sind.</para>

        <mediaobject>
          <imageobject>
            <imagedata align="center" fileref="install12.gif" format="GIF" />
          </imageobject>
        </mediaobject>
      </step>
    </procedure>
  </section>

  <section id="upgrade">
    <title>Upgrade<indexterm>
        <primary>Installation</primary>

        <secondary>Upgrade</secondary>
      </indexterm><indexterm>
        <primary>Upgrade</primary>
      </indexterm></title>

    <para>PostNuke unterstützt das Upgrade von allen früheren Versionen und
    einer Anzahl anderer Nuke-Derivate wie <application>z.B.
    PHPNuke</application><indexterm>
        <primary>PHP-Nuke</primary>
      </indexterm> und <application>MyPHPNuke</application><indexterm>
        <primary>MyPHPNuke</primary>
      </indexterm>.</para>

    <para>Bei einem Upgrade sind auf jeden Fall auch eventuell zusätzlich
    installierte Module zu berücksichtigen - gerade bei grösseren
    Installationen sollte ein Upgrade immer zuerst lokal getestet
    werden.</para>

    <bridgehead>Vor der Installation</bridgehead>

    <para>Vor der Installation sollte man sich überlegen, welche Module und
    Blöcke man überhaupt einsetzt , und welche von will man überhaupt
    weiterhin nutzen ihnen will. Alles, was man jetzt rauschmeisst, muss man
    nicht mehr updaten.</para>

    <para>Wenn man diese Liste zusammengetragen hat, muss man feststellen, ob
    es für diese Module bzw. Blöcke Versionen gibt, die mit der neuen
    PostNuke-Version zusammenarbeiten. Gute Anlaufstellen für diese Informaton
    ist zum einen die Homepage des Moduls (festzustellen oftmals über das
    Credits-Modul der laufenden PostNuke-Version), aber auch die Foren bei
    <ulink url="http://forums.postnuke.com">http://forums.postnuke.com</ulink>
    und <ulink
    url="http://www.post-nuke.net">http://www.post-nuke.net</ulink>.</para>

    <para>Falls nicht, muss man sich überlegen, ob man das Modul bzw. den
    Block selber umbauen möchte. Bei derartigen Modulen oder Blöcken, die
    nicht an den aktuellen Stand der Entwicklung angepasst werden, muss man
    sich aber auch fragen, ob der Autor auf Sicherheitsprobleme, Fehler etc.
    reagiert. Meist ist es dann besser, ob man auf diese Module bzw. Blöcke zu
    verzichten, oder ähnliche Module zu suchen, die den gleichen Zweck
    erfüllen.</para>

    <section>
      <title>Das Upgrade von älteren PostNuke-Versionen</title>

      <warning>
        <para>Bevor mit dem Upgrade begonnen wird, ein Backup anlegen.</para>

        <para>Das kann nicht oft genug gesagt werden. Nur mit einem
        <emphasis>vollständigen Backup</emphasis> (Datenbank und Dateisystem)
        kann im Problemfall der Ursprungszustand wiederhergestellt werden!
        Wenn es ein Problem mit dem Upgrade Prozess gibt, hilft ein Backup in
        zwei Punkten. Erstens kann man zurück zu einem pre-upgrade gehen und
        die Seite kann mit dem alten Code weiterarbeiten. Zweitens kann dem
        Entwicklerteam unter Umständen eine Kopie der Datenbank helfen, das
        Problem zu beheben.</para>
      </warning>

      <procedure>
        <step>
          <para>Vor der Aktualisierung bei der Seite mit dem Admin Login
          anmelden. Dieser Schritt ist wichtig, da beim Update eine ganze
          Reihe an Schlüsselmodulen (unter anderem Admin, Blocks und Modules)
          aktualisiert werden.</para>
        </step>

        <step>
          <para>Sicherstellen, dass auf der Seite das
          <emphasis>ExtraLite</emphasis> Theme eingestellt ist - sowohl als
          generelles Seitentheme als auch ggfs. als benutzerbezogenenes Theme
          im Profil des Administrators. Alle anderen Themes in diesem Release
          von PostNuke .760 sind Xanthia-Themes die eine Initialisierung vom
          Adminbereich aus verlangen.</para>
        </step>

        <step>
          <para>Eine Kopie der <filename>config.php</filename> anlegen und
          sicher aufheben</para>
        </step>

        <step>
          <para>Ist in der laufenden PostNuke-Version bereits Xanthia und
          pnRender enthalten, so sollte man die Verzeichnisse
          <filename>pnRender_cache</filename>, <filename>pnRender_compile,
          <filename>Xanthia_cache</filename></filename> und
          <filename>Xanthis_compile</filename> in <filename>pnTemp</filename>
          leeren.</para>
        </step>

        <step>
          <para><emphasis>Alle</emphasis> Dateien der laufenden
          PostNuke-Version löschen. Vorher sicherstellen, dass wirklich ein
          Backup vorhanden ist!</para>
        </step>

        <step>
          <para>Die aktuelle PostNuke-Version auf den Server kopieren.</para>
        </step>

        <step>
          <para>Die <filename>config.php</filename>, die ein paar Schritte
          zuvor gespeichert wurde, in das PostNuke Hauptverzeichnis kopieren
          (das Verzeichnis mit der <filename>config.php</filename> und der
          <filename>config-old.php</filename>). Sie wird während des
          Upgradeprozesses benötigt.</para>
        </step>

        <step>
          <para>Für das Upgrade müssen die Zugriffsberechtiung für die Dateien
          <filename>config.php</filename> und
          <filename>config-old.php</filename> so sein, dass der Webserver
          diese neu schreiben kann. Bei LINUX-Systemen heisst das, dass man
          sie auf chmod 666 setzen muss. Nach dem Upgrade können die
          Zugriffsrechte wieder auf 644 gesetzt werden.</para>
        </step>

        <step>
          <para>Bei Aktualisierungen von PostNuke-Version älter als .750
          müssen auch noch neue Eintragungen in der
          <filename>config.php</filename> vorgenommen werden. Folgende Zeilen
          direkt unter $pnconfig['encoded'] einfügen:</para>

          <programlisting>$pnconfig['pconnect'] = '0';
$pnconfig['temp'] = 'pnTemp';</programlisting>

          <para>zusätzlich die folgende Zeilen unterhalb $pndebug['debug_sql']
          = 0; einfügen:</para>

          <programlisting>$pndebug['pagerendertime'] = 0;</programlisting>
        </step>
      </procedure>

      <para>Ist die laufende Version älter als PostNuke .723, so wird das
      Upgrade über die <filename>install.php</filename> vorgenommen. Starten
      Sie den Upgradeprozess, indem Sie die <filename>install.php</filename>
      mit Ihrem Browser öffnen. Die exakte Url hängt von der jeweiligen Domain
      ab, aber wenn die Seite zum Beispiel
      <systemitem>http://www.example.com</systemitem> ist und PostNuke in das
      Verzeichniss <filename>pn</filename> installiert wurde lautet die URL
      <systemitem>http:www.example.com/pn/install.php</systemitem>. Den
      Anweisungen des Installations-Skriptes folgen, und wenn nach einer neuen
      Installation oder nach einem Ugrade gefragt wird, 'Upgrade' auswählen
      und die Version der PostNuke, von welcher aktualisiert werden soll,
      auswählen. Der Rest von dem Prozess sollte automatisch gehen.</para>

      <para>Ist die laufende PostNuke-Version mindestens die Version .723, so
      ist ein Aufruf der <filename>install.php</filename> nicht
      notwendig.</para>

      <para>Zu diesem Zeitpunkt sollten die zusätzlich installierten Module
      (aus dem Backup) wieder hochgeladen werden.</para>

      <para>Nachdem, wie bereits gesagt, eine Reihe an Schlüsselmodulen (und
      insbesondere das 'Modules' Modul) aktualisert wurden, muss nun zur
      weiteren Aktualisierung <emphasis>manuell in die Modul-Administration
      gewechselt</emphasis> werden. Die direkte URL lautet, mit dem Beispiel
      von oben,
      <systemitem>http:www.example.com/pn/index.php?module=Modules&amp;type=admin</systemitem>.
      Das ist nötig um das Administrationsmenü zu aktualisieren. Um die
      aktualisierten Module einzubinden, die Modulliste neu erzeugen und
      jeweils upgraden und aktualisieren.</para>

      <para>Das neue Administrationsmenü erlaubt es, Kategorien anzulegen.
      Während eines Upgrades sind diese Kategorien definiert aber nicht
      sortiert - darum sind alle Module in der 3rd Party Kategorie zu finden.
      In der Konfiguration des Admin-Moduls kann jedes Modul in eine Kategorie
      eingeordnet werden, Kategorien können auch umbenannt, erstellt und
      gelöscht werden.</para>
    </section>

    <section>
      <title>Testmigration</title>

      <para>Der Teufel steckt im Detail &mdash; aus diesem Grund sollte ein
      Update <emphasis>niemals</emphasis> direkt auf einer Live-Seite
      durchgeführt werden. Stets sollte eine Testmigration vorausgehen. Am
      einfachsten geht dies durch die lokale Installation eines Web-Servers,
      wie unter <xref linkend="lokaleinstallation" /> beschrieben. Auf diesen
      lokalen Server kommt nun:</para>

      <itemizedlist>
        <listitem>
          <para>Das derzeit laufende PostNuke-Paket</para>
        </listitem>

        <listitem>
          <para>Eine <filename>config.php</filename>, in der die Daten des
          lokalen MySQL-Servers eingetragen sind</para>
        </listitem>

        <listitem>
          <para>Sämtliche Module, die sich auf dem Live-Server im Einsatz
          befinden</para>
        </listitem>

        <listitem>
          <para>Das Theme, das auf dem Live-Server eingesetzt wird</para>
        </listitem>
      </itemizedlist>

      <para>Mittels <application>phpMyAdmin</application> oder ähnlichen Tools
      kopiert man die Datenbank des Web-Servers auf den lokalen Server.</para>

      <para>Jetzt kann man das Update wie oben beschrieben starten.
      Anschließend sollte alles wieder funktionieren. Falls dies nicht der
      Fall ist, muss man Schritt für Schritt nach dem Fehler suchen. Dies
      passiert bequem offline, ohne den Betrieb der Live-Seite zu stören. Wenn
      es sich dabei tatsächlich um PostNuke-Fehler handelt, so sollten diese
      übrigens im Forum oder (besser) im Bug-Tracker des NOC gemeldet
      werden.</para>

      <para>Nachdem man so zumindest die wirklich wichtigen Dinge zum Laufen
      gebracht hat, muss man sich überlegen, welche Modifikationen
      gegebenenfalls an der alten Version vorgenommen wurden. Was von den
      alten Änderungen ist nunmehr überflüssig, was muss wieder oder sogar
      zusätzlich geändert werden? Irgendwann ist man dann hoffentlich soweit
      das man den Testserver vollständig auf das neue System umgestellt und
      alle erforderlichen Anpassungen vorgenommen hat. Nachdem man nun eine
      lauffähige Version lokal hat, geht es darum, diese auch auf dem Server
      zur Verfügung zu stellen.</para>

      <para>War der Live-Server während dieser Phase offline, so ist der Rest
      schnell erledigt. Die Dateien und die Datenbank werden auf den
      Live-Server aufgespielt und man kann wieder online gehen. Wollte oder
      konnte man hingegen seinen Nutzern keine unbestimmte &mdash; aber
      bestimmt längerfristige &mdash; Offlinezeit zumuten, und der der
      Live-Server war während dieser Phase online, wird es nochmal ein wenig
      komplizier:</para>

      <procedure>
        <step>
          <para>'Live' Server offline nehmen</para>
        </step>

        <step>
          <para>Updates wie zuvor geprobt vornehmen.</para>
        </step>

        <step>
          <para>"Live"-Server online nehmen</para>
        </step>
      </procedure>

      <para>Es ist empfehlenswert, für die Zeit des Uploads eine Seite zu
      schalten, die auf den kurzfristigen Ausfall hinweist. Nachdem die
      Dateien hochgeladen wurden und die Datenbank von lokal wieder auf den
      Live-Server gebracht wurde, kann dieser wieder online gehen.</para>

      <para>Optimal ist es natürlich, die neue Version auf dem Live-Server in
      ein Parallelverzeichnis zu kopieren, und auch die Datenbank nicht über
      die bestehende zu schreiben (gegebenenfalls einen neuen Präfix
      vergeben). Auf diese Art hat man immer noch eine lauffähige Version des
      Live-Servers zu Hand. Die meisten Provider bieten es an, das
      Verzeichnis, auf das die Seite zeigt, frei zu wählen. Wenn die Daten
      oben sind, muss man also per Administrationsmenü des Providers als
      Startverzeichnis das mit der neuen Installation anwählen.</para>

      <para>In beiden Fällen muss auf die <filename>config.php</filename>
      geachtet werden: Nicht mit der Version der lokalen Installation
      überschreiben!</para>
    </section>

    <section>
      <title>Kann ich meine Site einfach in anderes Verzeichnis
      verschieben?</title>

      <para>Ein Backup vorher kann nie schaden und bis auf absolute Links in
      der Datenbank sollte es keine Probleme geben. Die kann man aber einfach
      in einem Datenbank-Dump durch Suchen und Ersetzen austauschen und dann
      den Dump zurückspielen.</para>
    </section>
  </section>

  <section id="configphp">
    <title>Was sind die Daten in der
    <filename>config.php</filename>?<indexterm>
        <primary><filename>config.php</filename></primary>
      </indexterm><indexterm>
        <primary>Verbindungsdaten</primary>
      </indexterm></title>

    <para>Normalerweise wird die <filename>config.php</filename> bei der
    Installation automatisch erzeugt und muss nicht manuell bearbeitet werden.
    Sollte dies trotzdem einmal notwendig sein, sollten folgende Angaben
    ausgefüllt werden:</para>

    <programlisting>$pnconfig['dbtype']      = 'mysql'; <co
        id="configphp.dbtype" /> 
$pnconfig['dbtabletype'] = 'myisam'; <co id="configphp.dbtabletype" /> 
$pnconfig['dbhost']      = 'database.example.com'; <co id="configphp.dbhost" /> 
$pnconfig['dbuname']     = 'ZGF0YWJhc2VfdXNlcg=='; <co id="configphp.dbuname" /> 
$pnconfig['dbpass']      = 'MTIzNDU2'; <co id="configphp.dbpass" /> 
$pnconfig['dbname']      = 'postnuke'; <co id="configphp.dbname" /> 
$pnconfig['system']      = '0'; <co id="configphp.system" /> 
$pnconfig['prefix']      = 'pn'; <co id="configphp.prefix" /> 
$pnconfig['encoded']     = '1'; <co id="configphp.encoded" /> 
$pnconfig['pconnect']    = '0'; <co id="configphp.pconnect" /> 
$pnconfig['temp']        = 'pnTemp'; <co id="configphp.pntemp" /></programlisting>

    <calloutlist>
      <callout arearefs="configphp.dbtype">
        <para>Typ der Datenbank</para>
      </callout>

      <callout arearefs="configphp.dbtabletype">
        <para>Tabellentyp der Datenbank</para>
      </callout>

      <callout arearefs="configphp.dbhost">
        <para>MySQL Datenbankserver</para>
      </callout>

      <callout arearefs="configphp.dbuname">
        <para>MySQL Datenbankbenutzer</para>
      </callout>

      <callout arearefs="configphp.dbpass">
        <para>MySQL Datenbankpasswort</para>
      </callout>

      <callout arearefs="configphp.dbname">
        <para>MySQL Datenbankname</para>
      </callout>

      <callout arearefs="configphp.system">
        <para>0 für Unix/Linux, 1 für Windows</para>
      </callout>

      <callout arearefs="configphp.prefix">
        <para>MySQL Tabellenprefix</para>
      </callout>

      <callout arearefs="configphp.encoded">
        <para>0 für unkodierten, 1 für kodierten Benutzernamen und -passwort.
        Die Daten sind Base_64 kodiert - um manuell eine
        Benutzername/Passwort-Kombination von Klartext in Base_64 zu wandeln,
        kann man sich mit dem PostNuke Swiss Army Knife Tool behelfen.</para>
      </callout>

      <callout arearefs="configphp.pconnect">
        <para>Entscheidet darüber, ob sogenannte "Persistente
        Datenbankverbindungen" genutzt werden. Unter Umständen kann damit die
        Leistung erhöht werden. Mehr dazu in der <ulink
        url="http://www.php.net/manual/de/features.persistent-connections.php">PHP-Dokumentation</ulink>.</para>
      </callout>

      <callout arearefs="configphp.pntemp">
        <para>Postition des temporären PostNuke-Verzeichnisses</para>
      </callout>
    </calloutlist>

    <para>Neben diesen Verbindungsangaben findet man in der
    <filename>config.php</filename> noch drei weitere Werte, die zur
    Fehlersuche gedacht sind. Im Normalfall sollten alle dieser Werte auf 0
    gesetzt werden.</para>

    <programlisting>$pndebug['debug']          = 0; <co id="configphp.debug" /> 
$pndebug['debug_sql']      = 0; <co id="configphp.debugsql" /> 
$pndebug['pagerendertime'] = 0; <co id="configphp.pagerendertime" /></programlisting>

    <calloutlist>
      <callout arearefs="configphp.debug">
        <para>Gibt an, ob das Debugger-Fenster aktiv ist</para>
      </callout>

      <callout arearefs="configphp.debugsql">
        <para>Gibt an, ob im Debuggerfenster auch die SQL-Befehle angezeigt
        werden</para>
      </callout>

      <callout arearefs="configphp.pagerendertime">
        <para>Gibt an, ob in der Fußzeile die Zeit angezeigt wird, die zur
        Erstellung der Seite benötigt wurde.</para>
      </callout>
    </calloutlist>
  </section>

  <section id="pntemp">
    <title>Das PostNuke Verzeichnis für temporäre Dateien
    (<filename>pnTemp</filename>)<indexterm>
        <primary>pnTemp</primary>
      </indexterm><indexterm>
        <secondary>Temporärdateien</secondary>

        <see>pnTemp</see>
      </indexterm></title>

    <para>Das PostNuke Verzeichnis für tempöräre Dateien wurde von den
    Postnuke Entwicklern eingeführt, um für alle Teile des Systems ein
    beschreibbares Verzeichnis anzubieten. Hierfür dient das im
    Hauptverzeichnis der Site befindlichen Verzeichnis
    <filename>/pnTemp</filename>.</para>

    <para>Die Zugriffsrechte auf dieses Verzeichnis sowie auf alle
    Unterverzeichnisse müssen auf "schreibbar für alle" - unter Linux auf 777
    - gesetzt werden.</para>

    <important>
      <para>Um Direktzugriffe auf pnTemp zu verhindern, liegt eine
      entsprechende <filename>.htaccess</filename>-Datei in diesem
      Verzeichnis.</para>

      <para>Aus Sicherheitsgründen empfehlen wir Webmastern,
      <filename>pnTemp</filename> ausserhalb des Postnuke Hauptverzeichnisses
      zu lagern. Hierfür wird das bestehende
      <filename>pnTemp</filename>-Verzeichnis verschoben und die neue Lage in
      der <filename>config.php</filename> eingetragen (vgl. <link
      linkend="configphp.pntemp">hier</link>).</para>
    </important>
  </section>
</chapter>