<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN"
"http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd">
<chapter id="pnTemp" lang="en-US"
         revision="$Revision$ $Date$"
         status="draft">
  <!-- $Id$ -->

  <chapterinfo>
    <authorgroup>
      <author>
        <firstname>Jörg</firstname>

        <surname>Napp</surname>

        <affiliation>
          <jobtitle>Developer</jobtitle>

          <orgname>PostNuke</orgname>
        </affiliation>
      </author>
    </authorgroup>

    <releaseinfo>$Revision$</releaseinfo>

    <date>$Date$</date>

    <revhistory>
      <revision>
        <revnumber>0.3</revnumber>

        <date>28. Feb 2004</date>

        <revdescription>
          <para>DocBook split for better re-use</para>
        </revdescription>
      </revision>

      <revision>
        <revnumber>0.2</revnumber>

        <date>07. October 2003</date>

        <revdescription>
          <para>corrections and added IDs to tags</para>
        </revdescription>
      </revision>

      <revision>
        <revnumber>0.1</revnumber>

        <date>15. September 2003</date>

        <revdescription>
          <para>Initial version</para>
        </revdescription>
      </revision>
    </revhistory>

    <keywordset>
      <keyword>pnTemp</keyword>
    </keywordset>
  </chapterinfo>

  <title>Das PostNuke Verzeichnis für temporäre Dateien
  (<filename>pnTemp</filename>)</title>

  <section id="pntemp.introduction">
    <title>Einleitung</title>

    <para>Das PostNuke Verzeichnis für tempöräre Dateien wurde von den
    Postnuke Entwicklern eingeführt, um für alle Teile des Systems ein
    beschreibbares Verzeichnis anzubieten.</para>
  </section>

  <section id="pntemp.uses">
    <title>Benutzung</title>

    <section id="pntemp.uses.obtaining">
      <title>Wie erfahre ich den Pfad zu pnTemp?</title>

      <para>Mit der API-Funktion
      <command>pnConfigGetVar('<replaceable>temp</replaceable>')</command>kann
      der Pfad erfragt werden.</para>
    </section>

    <section id="pntemp.uses.filenames">
      <title>Dateinamen</title>

      <para>Modulentwickler sollten ihren Modulnamen in die Dateinamen
      integrieren, damit es keine Konflikte zwischen den temporären Dateien
      verschiedener Module kommmt. Das Modul "Beispiel" sollte zum Beispiel
      folgende Dateinamen benutzen <filename>Beispiel_temp1</filename>,
      <filename>Beispiel_temp2</filename> usw.</para>
    </section>

    <section id="pntemp.uses.subdirs">
      <title>Unterverzeichnisse</title>

      <para>Braucht ein Modul ein eigenes Verzeichnis in pnTemp, sollte der
      Modulentwickler bedenken, es bei der Initialisierung anzulegen und bei
      Löschung des Moduls auch das Verzeichnis samt Inhalten zu löschen.
      Benannte werden sollten diese Verzeichnisse nach der gleichen Konvention
      wie die Dateien in Punkt 2.2.</para>
    </section>

    <section id="pntemp.uses.deletion">
      <title>automatisches Löschen</title>

      <para>Kurz gesagt: Eine automatsiche Löschung von temporären Dateien
      wird nicht stattfinden.</para>

      <para>Es gibt keine automatische Aufräumfunktion. Jeder Modulentwickler
      muss also selbst darauf achten, was im temporären Verzeichnis passiert.
      Auf der anderen Seite hat er dadurch die Sicherheit, dass die Dateien
      dort stets zur Verfügung stehen.</para>
    </section>

    <section id="pntemp.uses.webaccess">
      <title>Browserzugriff auf pnTemp</title>

      <para>Dateien, die in pnTemp abgelegt sind, können nicht von aussen
      aufgerufen werden. Bilder, Dokumente usw, die von aussen erreichbar sein
      sollen, dürfen also keinesfalls hier gelagert werden.</para>
    </section>
  </section>

  <section id="pntemp.implementation">
    <title>Einrichten von pnTemp</title>

    <para>Bei der Installation wird im Hauptverzeichnis der Site das
    Verzeichnis<filename>/pnTemp</filename> angelegt. Danach müssen die
    Zugriffsrechte für diesen und die Unterverzeichnisse auf "schreibbar für
    alle" - unter Linux auf 777 - gesetzt werden.</para>

    <para>Die Lage des Verzeichnisses kann auch in der
    <filename>config.php</filename> eingestellt werden. Da das
    ADODB-Zugriffcaching ein temporäres Verzeichnis benötigt, muß das
    Verzeichnis schon bei der Installation auffindbar und beschreibbar
    sein.</para>

    <para>Aus Sicherheitsgründen empfehlen wir Webmastern pnTemp ausserhalb
    des Postnuke Hauptverzeichnisses zu lagern (genau wie die
    <filename>config.php)</filename></para>

    <para>Um Zugriffe zu verhindern liegt eine <filename>.htaccess</filename>
    im Verzeichnis <filename>pnTemp</filename>, die den Zugriff
    beschränkt.</para>
  </section>
</chapter>