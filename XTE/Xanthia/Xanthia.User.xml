<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN"
"http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd">
<chapter id="Xanthia.User" lang="de-DE"
         revision="$Revision$ $Date$"
         status="draft">
  <!-- $Id$ -->

  <title>Administrationshandbuch</title>

  <section id="Xanthia.User.Terms">
    <title>Xanthia Terminologie</title>

    <para>An dieser Stelle folgen einige Definitionen wichtiger Begriffe im
    Zusammenhang mit Xanthia.</para>

    <variablelist>
      <varlistentry>
        <term>Templates</term>

        <listitem>
          <para>Templates sind die Dateien, die die Layoutelement eines Themes
          / Moduls enthalten. Jedes Theme ist in mehrere Templates aufgeteilt,
          die zusammen mit dem Inhalt die fertige Seite ergeben. Templates
          bestehen aus normalem HTML in das Smarty-Tags eingebettet werden.
          Diese eingebetteten Tags werden dann durch dynamische Inhalte
          ersetzt. Dazu können auch einfache Logik-Elemente wie Schleifen und
          Bedingungen benutzt werden</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><glossterm>Zonen</glossterm> (engl: "Theme Zones")</term>

        <listitem>
          <para>Themes können in mehrere Zonen unterteilt werden. In jede Zone
          können sowohl Blöcke als auch Modul-Inhalte geladen werden. Wenn man
          sich die vorhandenen Xanthia-Themes betrachtet, kann man
          feststellen, dass zum Beispiel das News-Artikel-Template die
          themearticle-Funktion ersetzt hat.</para>

          <para><glossterm>Theme-Zonen</glossterm> unterteilen das Theme. Jede
          Zone stellt einen bestimmten Bereich des Themes dar. Zu jeder
          Theme-Zone gibt es ein Template.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Block Zones</term>

        <listitem>
          <para><glossterm>Block-Zonen</glossterm> definieren die Bereiche,
          denen Blöcke zugeordnet werden können. Blockzonen können dort im
          Theme positioniert werden, wo Blöcke angezeigt werden sollen. Dazu
          müssen die entsprechenden Tags in das Theme eingebaut werden.</para>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>

  <section id="Xanthia.User.Config">
    <title>Konfiguration</title>

    <screenshot>
      <mediaobject>
        <objectinfo>
          <title>The Xanthia Configuration Screen</title>
        </objectinfo>

        <imageobject>
          <imagedata fileref="Xanthia.AdminMenu.jpg" format="JPG" />
        </imageobject>

        <textobject>
          <phrase>The Xanthia Configuration Screen</phrase>
        </textobject>
      </mediaobject>
    </screenshot>

    <para>Die verschiedenen Optionen von Xanthia lassen sich über die
    Checkboxen ein- und ausschalten:</para>

    <variablelist>
      <varlistentry>
        <term>Use Visual Block Editor</term>

        <listitem>
          <para>Damit läßt sich der visuelle Block-Editor aktiveren. Mit
          diesem Tool hat der Admin die volle Kontrolle über die Blocks und
          kann sie beim Surfen durch die Site aktiveren/deaktivieren und
          verschieben. Dazu müssen die Blöcke in der normalen Blockverwaltung
          einfach eingeschaltet sein. Die Steuerung läuft dann über
          JavaSkript-Popups ab.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Use Short URLs</term>

        <listitem>
          <para>Mit der XTE haben endlich die Kurzen URLs ihren Weg in den
          Postnuke Core gefunden. Über diese Einstellung lassen sie sich
          aktivieren. Dazu muß allerdings noch eine htaccess-Datei aus dem
          Verzeichnis modules\Xanthia\pndocs\short_urls ins Hauptverzeichnis
          der Site kopiert werden.</para>

          <tip>
            <para>You will see the items related to short URLs only if a
            .htaccess file is in your PostNuke root directory and your web
            server is capable of rewriting URLs.</para>
          </tip>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Extension to use for short URLs (excluding .)</term>

        <listitem>
          <para>Die Dateiendung, die die Kurzen URLs benutzen sollen muß hier
          - ohne . - angegeben werden. Es stehen 3 Lösungen für die
          Dateiendungen zur Verfügung: htm, html, phtml - je nachdem, welche
          htaccess benutzt wird.Während der Installation darf unter
          Administration/Einstellungen kein Xanthia-Theme als Site-Theme
          eingestellt sein.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Enable Caching</term>

        <listitem>
          <para>Aktiviert das Caching von Xanthia-Seiten. Caching erhöht die
          Performance der Site ungemein, weil die Inhalte der gechachten
          Seiten nicht mehr aus der Datenbank bezogen, sondern aus dem
          Filesystem gelesen werden.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Check for updated Version of Templates</term>

        <listitem>
          <para>Aktiviert, raubt diese Option etwas Performance, wenn aber das
          Caching eingeschaltet ist, würden Änderungen an den Templates nicht
          übernommen. Wenn aber keine Änderungen an den Templates mehr
          anstehen, sollte sie ausgeschaltet werden.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Force Recompile of Templates</term>

        <listitem>
          <para>Durch diese Funktion würden Templates in jedem Fall neu
          kompiliert - das Caching wäre effektlos.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>How long to Cache Pages</term>

        <listitem>
          <para>Wie viele Sekunden sollen die Seiten gecacht werden?</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Store Templates in Database</term>

        <listitem>
          <para>Select if you want to store the templates in the PostNuke
          database.</para>

          <para>When you decide not to store the templates in the database,
          you lose the online editing of templates but reduce database load
          during a page compile. This makes the theme development cycle easier
          as you don't have to worry about templates in the db and on the file
          system. Unless you are in the process of theme development, we
          recommend to store templates in the database.</para>

          <note>
            <para>Smarty only accesses templates from the database on the
            first visit to the page. Then it will not access the database or
            even check the database again because it uses the compiled
            templates. Anytime a change is made to a template, either by
            reloading templates, or modifying them through the web panel the
            old version of the compiled template is deleted. This is the
            <emphasis>only</emphasis> time that Smarty will access the
            database to get the uncompiled template again. The way Xanthia is
            coded it passes a timestamp back to Smarty so it tricks smarty
            into thinking the template has not been modified.</para>
          </note>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Use Trim Whitespace Filter</term>

        <listitem>
          <para>Durch diese Option werden alle überflüssigen Leerzeichen aus
          dem HTML-SourceCode gefiltert, bevor Inhalte an den Browser gegeben
          werden. Dadurch sinkt die Performance leicht, es müssen aber weniger
          Daten an den Client geliefert werden.</para>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>

  <section id="Xanthia.User.ConfigThemes">
    <title>Installing and Configuring Xanthia Themes</title>

    <section id="Xanthia.User.ConfigThemes.Adding">
      <title>Themes installieren</title>

      <caution>
        <para>If installing the <application>Xanthia Theme Pack</application>
        ensure that you have changed your default theme too a non-Xanthia
        theme. This can be a third party, or the
        <application>extra-lite</application> core theme.</para>
      </caution>

      <para>Xanthia Theme-Templates sind immer in einem Verzeichnis mit dem
      Namen des Themes gesammelt. Dieses Verzeichnis wird dann in das
      Verzeichnis /themes kopiert. Ruft man nun die Xanthia Theme
      Administration (<guimenuitem>View Themes</guimenuitem>) auf, so
      erscheint eine Tabelle mit allen verfügbaren Xanthia-Themes. "Normale"
      Themes werden hier nicht aufgeführt. </para>

      <para>Mit "<guimenuitem>add Theme</guimenuitem>" kann das neue Theme
      hinzugefügt werden. Das Theme wird nun als aktiv angezeigt und kann in
      den Site-Einstellungen als Theme ausgewählt werden.</para>

      <screenshot>
        <mediaobject>
          <imageobject>
            <imagedata fileref="Xanthia.ViewThemes.jpg" format="JPG" />
          </imageobject>

          <textobject>
            <phrase>The "<guimenuitem>View Themes</guimenuitem>" Screen in
            Xanthia</phrase>
          </textobject>

          <caption>
            <para>The "<guimenuitem>View Themes</guimenuitem>" Screen in
            Xanthia</para>
          </caption>
        </mediaobject>
      </screenshot>
    </section>

    <section id="Xanthia.User.ConfigThemes.Editing">
      <title>Bearbeiten von Themes</title>

      <para>Nachdem ein neues Theme hinzugefügt wurde, kann es bearbeitet
      werden, indem man "<guimenuitem>edit theme</guimenuitem>" in der
      Theme-Übersicht auswählt. Es steht nun verschiedene Funktionen zur
      Verfügung: <guimenuitem>Block Zones</guimenuitem>, <guimenuitem>Theme
      Zones</guimenuitem>, <guimenuitem>Theme Templates,</guimenuitem>
      T<guimenuitem>heme Colors</guimenuitem>, <guimenuitem>Theme
      Settings</guimenuitem>, und <guimenuitem>Block
      Control</guimenuitem>.</para>

      <section id="Xanthia.User.BlockZones">
        <title>Block-Zonen</title>

        <para>Block Zonen definieren die Bereiche in einem Theme, in dem
        Blöcke angezeigt werden sollen. Unter diesem Menüpunkt kann man
        ersehen, welche Block-Zonen zur Verfügung stehen und wie sie heißen.
        Dieses Menü wird sehr wenig gebraucht werden. Nur wenn komplette
        Block-Zonen ein- und ausgeschaltet werden sollen, muß man das hier
        tun. Um eine Block-Zone hinzuzufügen müssen zwei Schritte eingehalten
        werden:</para>

        <orderedlist>
          <listitem>
            <para>Block-Zone hinzufügen. Um dies zu tun, muß man am unteren
            Ende der Übersicht das Tag und den Namen der Zone definieren. Zum
            Beispiel: "Tutorial Test Block" und TUTORIAL. Diese Block-Zone
            kann dann in den Templates positioniert werden. Blöcke, die dieser
            Zone zugeordnet werden, werden dann dort angezeigt.</para>
          </listitem>

          <listitem>
            <para>Im Theme muß - wie gesagt - an der richtigen Stelle das Tag
            zum Aufrufen der Zone eingefügt werden. In diesem Fall wäre das
            das Tag Code: &lt;!--[$TUTORIAL]--&gt;</para>
          </listitem>
        </orderedlist>

        <para>Auf umgekehrte Art können Block-Zonen jederzeit auch wieder aus
        dem Theme entfernt werden. Die Themes aus dem Xanthia-Paket oder dem
        Postnuke .8 Paket enthalten eine Reihe vorkonfigurierter
        Block-Zonen.</para>

        <screenshot>
          <mediaobject>
            <imageobject>
              <imagedata fileref="Xanthia.BlockZones.jpg" format="JPG" />
            </imageobject>

            <textobject>
              <phrase>Xanthia's <guimenuitem>Block Zones</guimenuitem>
              Screen</phrase>
            </textobject>

            <caption>
              <para>Xanthia's <guimenuitem>Block Zones</guimenuitem>
              Screen</para>
            </caption>
          </mediaobject>
        </screenshot>
      </section>

      <section id="Xanthia.User.ThemeZones">
        <title><guimenuitem>Theme Zones</guimenuitem></title>

        <para>Theme zones define the <emphasis>areas that are used to
        construct the theme</emphasis>. Each different zone implements a
        different part of the theme and has an assoicated template that is
        used to display that zone.</para>

        <para>There are some <emphasis>required</emphasis> Theme zones which
        cannot be removed, others are <emphasis>Addon</emphasis> Theme Zones
        and can be deactivated or removed. You can assign a template to a zone
        using the <guimenuitem>configure</guimenuitem> option.</para>

        <para>You can as well create new Theme Zones. This way you can provide
        a different look for different modules.</para>

        <para>To create a theme zone, you must first create a template,
        placing it in the pnTemplates directory of your theme, and then click
        the <guimenu>Add New Theme Zone</guimenu> link at the top of the theme
        zones table. This brings up the theme zone form where you must fill in
        the following fields:</para>

        <para><variablelist>
            <varlistentry>
              <term>Zone Name</term>

              <listitem>
                <para>This is a unique name you want to use for this Theme
                Zone it could be a short description if you like.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>Zone Label</term>

              <listitem>
                <para>When you select a module or a block from the dropdown
                Zone Label is filled in for you automatically, you should not
                change this field.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>New master for module</term>

              <listitem>
                <para>When creating a module template, choose the module you
                are creating a new template for.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>New skin for block</term>

              <listitem>
                <para>When creating a block template, choose the block you
                created it for.</para>
              </listitem>
            </varlistentry>
          </variablelist>Fill in these details and click submit, you will now
        be able to use this zone in your theme.</para>

        <screenshot>
          <mediaobject>
            <imageobject>
              <imagedata fileref="Xanthia.ThemeZones.jpg" format="JPG" />
            </imageobject>

            <textobject>
              <phrase>Xanthia's <guimenuitem>Theme Zones</guimenuitem>
              Screen</phrase>
            </textobject>

            <caption>
              <para>Xanthia's <guimenuitem>Theme Zones</guimenuitem>
              Screen</para>
            </caption>
          </mediaobject>
        </screenshot>
      </section>

      <section id="Xanthia.ThemeEditing.ThemeTemplates">
        <title>Theme Templates</title>

        <para>In this menu you see the theme, module and block templates
        already defined. You can edit a template by clicking on an
        <guimenuitem>EDIT</guimenuitem> link, which brings you to an editor
        field. The <guimenuitem>Reload Template</guimenuitem> link will
        refresh the stored template with the one from the file system. All
        changes made in the edit screen will get lost this way.</para>

        <caution>
          <para>Whenever you reload your templates, all changes made to them
          are lost. <remark>A future version of Xanthia will have the
          functionality to compare the timestamp of the files on the server to
          the one in the database for the template, and if the one on in the
          file system is newer it will allow a user to update the old template
          in the DB. If not it will allow the user a choice to overwrite the
          template in the database with the old one from the server or
          download the template from the DB and keep a copy of it locally on
          their development machine.</remark></para>
        </caution>

        <para>Most templates will only be effective when assigned to a
        particular zone and are not interchangable e.g. A block zones template
        will not function very well if used as a a template for a news article
        and vice versa.</para>

        <para>All themes require a Left Sidebox (or left blocks) template, a
        Master Zone template, a News-article template, a News-index template,
        and the OpenTable templates.</para>

        <screenshot>
          <mediaobject>
            <imageobject>
              <imagedata fileref="Xanthia.ThemeTemplates.jpg" format="JPG" />
            </imageobject>

            <textobject>
              <phrase>Xanthia's <guimenuitem>Theme Templates</guimenuitem>
              Screen</phrase>
            </textobject>

            <caption>
              <para>Xanthia's <guimenuitem>Theme Templates</guimenuitem>
              Screen</para>
            </caption>
          </mediaobject>
        </screenshot>
      </section>

      <section id="Xanthia.User.ThemeColors">
        <title>Theme Colors</title>

        <para>Each Xanthia theme's colours are defined by a <emphasis>colour
        palette</emphasis> in this section of the Xanthia administration menu.
        Palettes allow the theme developer to provide multiple colour sets for
        a theme.The aim is to use the same layout, but a different colour
        scheme, thus allowing to vary the look of your theme easily, without
        having to modify theme files.</para>

        <para>For multiple palettes to be effective in a theme the theme must
        use dynamic stylesheets. Only one theme shipped in the XTE theme pack
        implements dynamic stylesheets - pnDefault.</para>

        <para>You can select which color scheme to use by clicking on any
        <guimenuitem>Use Palette</guimenuitem> link.</para>

        <para>To change the colors a palette uses, click on a
        <guimenuitem>Configure</guimenuitem> link. You are presented a visual
        palette editor. To change a color, first select which part you want to
        change the color on by clicking the control-button at the top. Then,
        click on the color you want in the colorcube on right to select a
        color.</para>

        <para>The name of the current palette can be changed using the filed
        at the bottom of the screen as well. When you have completed your
        color selction click the submit these colors at the bottom of the page
        to save your changes.</para>

        <para>It is possible to create your own colour palettes for themes;
        this can be done by using the <guimenuitem>Add Theme Colour
        Palette</guimenuitem> link. You are taken to the same visual palette
        editor as before, but this time with an empty palette.</para>

        <screenshot>
          <mediaobject>
            <imageobject>
              <imagedata fileref="Xanthia.ThemeColors.jpg" format="JPG" />
            </imageobject>

            <textobject>
              <phrase>Xanthia's <guimenuitem>Theme Colors</guimenuitem>
              Screen</phrase>
            </textobject>

            <caption>
              <para>Xanthia's <guimenuitem>Theme Colors</guimenuitem>
              Screen</para>
            </caption>
          </mediaobject>
        </screenshot>
      </section>

      <section id="Xanthia.User.ThemeSettings">
        <title>Theme Settings</title>

        <para><emphasis>Theme variables</emphasis> provide a repository for
        theme specific configuration variables to be stored by the theme
        engine and updated by the site administrator from the Xanthia admin
        panel.</para>

        <para>The potential uses of these variables are wide ranging and will
        vary from theme to theme, but it can include page width parameters,
        left and right block parameters, text sizes, and others depending on
        your theme. Certain options, such as top_links and bottom_links,
        require a setting of either 1 (On) or 0 (Off).</para>

        <para>All theme variables are available in each template.</para>

        <screenshot>
          <mediaobject>
            <imageobject>
              <imagedata fileref="Xanthia.ThemeSettings.jpg" format="JPG" />
            </imageobject>

            <textobject>
              <phrase>Xanthia's <guimenuitem>Theme Settings</guimenuitem>
              Screen</phrase>
            </textobject>

            <caption>
              <para>Xanthia's <guimenuitem>Theme Settings</guimenuitem>
              Screen</para>
            </caption>
          </mediaobject>
        </screenshot>
      </section>

      <section id="Xanthia.User.BlockControl">
        <title>Block Control</title>

        <para>Xanthia gives the option of specifying which blocks appear when
        viewing certain modules, on a module-by-module basis. This allows
        incredible customisation of the appearance of block on your site's
        pages. The block control administration area also gives you the full
        selection of block areas as available in your theme.</para>

        <para>To use block control, you must first create the block you wish
        to add in <menuchoice>
            <guimenu>Administration</guimenu>

            <guimenuitem>Blocks</guimenuitem>
          </menuchoice>. Once this is done, the block will become visible in
        the list of blocks to assign to modules in the Block Control
        area.</para>

        <sidebar>
          <note>
            <para>The positions in the Block Administration affect a Xanthia
            theme only insofar as they provide the initial positions of blocks
            when a theme is installed. After this the theme engine controls
            the block positioning.</para>

            <para><remark>Further integration is needed here to effectively
            present the value and usage of the block postion. But this is
            diifficult to achieve while keeping the modualrity of the theming
            system</remark></para>
          </note>
        </sidebar>

        <para>To <emphasis>add</emphasis> a block to a module, select the
        module you wish to add the block to and the block ifself from the
        list, then click <guimenuitem>add</guimenuitem>, and the block will be
        added to that module. You can select multiple blocks at the same time
        to be added to a module. Blocks can be <emphasis>removed</emphasis>
        for a specific module at any time by clicking the
        <guimenuitem>remove</guimenuitem> link in the row of the block you
        wish to delete. This will not delete the block from all modules; just
        prevent it from displaying for the particular block you remove it
        from.</para>

        <para>You can then choose which of the <emphasis>block
        positions</emphasis> you want the block to appear in by selecting from
        the drop down box in the <guimenuitem>Position</guimenuitem> column.
        The values contained in this drop down box are the Block Zones that
        are configured in the Block Zones administration. The
        <emphasis>vertical order</emphasis> of the blocks in each position is
        configured through the up and down arrows in the list.</para>

        <para>For easier navigation you find an alphabetic link list. If you
        click on a letter, only Modules beginning with this letter are shown.
        If you click on the asterik link, all modules are shown.</para>

        <screenshot>
          <mediaobject>
            <imageobject>
              <imagedata fileref="Xanthia.BlockControl.jpg" format="JPG" />
            </imageobject>

            <textobject>
              <phrase>Xanthia's <guimenuitem>Block Control</guimenuitem>
              Screen</phrase>
            </textobject>

            <caption>
              <para>Xanthia's <guimenuitem>Block Control</guimenuitem>
              Screen</para>
            </caption>
          </mediaobject>
        </screenshot>
      </section>
    </section>
  </section>

  <section id="Xanthia.User.CommonTasks">
    <title>Common Tasks for Xanthia themes</title>

    <warning>
      <para><emphasis>Never</emphasis> develop a theme as the active theme!
      Always use the built in <guimenuitem>theme preview</guimenuitem> option
      (<command>index.php?theme=<replaceable>yourtheme</replaceable></command>).</para>
    </warning>

    <section id="Xanthia.User.ModuleTemplates">
      <title>Custom Module Templates</title>

      <para>Xanthia provides the possibility to use different templates for
      the page depending on the currently active module. You can only have one
      Module Template active at time for a specific module.</para>

      <para>Here are the steps for creating a module specific template in
      Xanthia. All relevant menu items are located in <menuchoice>
          <guimenu>Administration</guimenu>

          <guisubmenu>Xanthia</guisubmenu>

          <guisubmenu>View Themes</guisubmenu>

          <guimenuitem>Edit Theme</guimenuitem>
        </menuchoice>.</para>

      <procedure>
        <step>
          <title>Create a new template for the module</title>

          <para>Enter <menuchoice>
              <guimenu>Theme Templates</guimenu>

              <guimenuitem>New Module Template</guimenuitem>
            </menuchoice> and create a new template for the module (see<xref
          linkend="Xanthia.ThemeEditing.ThemeTemplates" />). Altough you can
          name it whatever you like, we recommend to name it after the module
          you are creating it for. You can copy and paste your current
          master.htm text into the New Module Template text area to have a
          basis to start with.</para>
        </step>

        <step>
          <title>Add a new Theme Zone</title>

          <para>Enter <menuchoice>
              <guimenu>Theme Zones</guimenu>

              <guimenuitem>Add New Zone</guimenuitem>
            </menuchoice> and fill in the required fields as decribed
          ...</para>

          <variablelist>
            <varlistentry>
              <term>Zone Name</term>

              <listitem>
                <para>This is a unique name of your choosing</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>Zone Label</term>

              <listitem>
                <para>his will be set when you choose the next option</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>New master for module</term>

              <listitem>
                <para>Choose the module you are creating a new template
                for.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>New skin for block</term>

              <listitem>
                <para>Leave this unset.</para>
              </listitem>
            </varlistentry>
          </variablelist>
        </step>

        <step>
          <title>Configure Zone</title>

          <para>When page refreshes after you commit changes in above step you
          will see that the zone you created is now inactive and has no
          template assigned. You must <emphasis role="bold">first</emphasis>
          configure this zone before activating.</para>

          <para>Click <guimenuitem>Configure</guimenuitem>. You will have a
          drop down list of module templates (if block templates show up, you
          didn't leave "New Sikn for Block" unset un the last step). Choose
          the template from the list to use for this module and submit the
          changes.</para>
        </step>

        <step>
          <title>Activate this zone</title>

          <para>When page refreshes after you commit changes in above step you
          will see that the zone you created now shows the template you
          assigned. Now you must activate this zone by clicking on
          <guimenuitem>activate</guimenuitem>.</para>
        </step>

        <step>
          <title>Test your changes</title>

          <para>Go to the module you have created the template for. Your site
          should now use a different design.</para>
        </step>
      </procedure>
    </section>

    <section id="Xanthia.User.CommonTasks.BlockTemplates">
      <title>Custom Block Templates</title>

      <para>As with module templates, Xanthia provides the possibility to use
      different templates for each block. You can create as many block
      templates as you like. Each block can have a different template in each
      module also.</para>

      <para>Here are the steps for creating a block specific template in
      Xanthia. Again, all relevant menu items are located in <menuchoice>
          <guimenu>Administration</guimenu>

          <guisubmenu>Xanthia</guisubmenu>

          <guisubmenu>View Themes</guisubmenu>

          <guimenuitem>Edit Theme</guimenuitem>
        </menuchoice>.</para>

      <procedure>
        <step>
          <title>Create a new template for the block</title>

          <para>Enter <menuchoice>
              <guimenu>Theme Templates</guimenu>

              <guimenuitem>New Block Template</guimenuitem>
            </menuchoice> and create a new template for the Block (see<xref
          linkend="Xanthia.ThemeEditing.ThemeTemplates" />). Altough you can
          name it whatever you like, we recommend to name it after the block
          you are creating it for. You can copy and paste your current
          rsblock.htm or lsblock.htm in the New Block Template text area to
          have a basis to start wth.</para>
        </step>

        <step>
          <title>Add a new Theme Zone</title>

          <para>Enter <menuchoice>
              <guimenu>Theme Zones</guimenu>

              <guimenuitem>Add New Zone</guimenuitem>
            </menuchoice> and fill in the required fields as decribed
          ...</para>

          <variablelist>
            <varlistentry>
              <term>Zone Name</term>

              <listitem>
                <para>This is a unique name of your choosing</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>Zone Label</term>

              <listitem>
                <para>this will be automatically set when you choose the next
                option.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>New master for module</term>

              <listitem>
                <para>Leave this unset.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>New skin for block</term>

              <listitem>
                <para>Choose the block you created it for.</para>
              </listitem>
            </varlistentry>
          </variablelist>
        </step>

        <step>
          <title>Configure Zone</title>

          <para>When page refreshes after you commit changes in above step you
          will see that the zone you created is now inactive and has no
          template assigned. You must <emphasis role="bold">first</emphasis>
          configure this zone before activating.</para>

          <para>Click <guimenuitem>Configure</guimenuitem>. You will have a
          drop down list of block templates. Choose the template from the list
          to use for this block and submit the changes.</para>
        </step>

        <step>
          <title>Activate this zone</title>

          <para>When page refreshes after you commit changes in above step you
          will see that the zone you created now shows the template you
          assigned. Now you must activate this zone by clicking on
          <guimenuitem>activate</guimenuitem>.</para>
        </step>

        <step>
          <title>Test your changes</title>

          <para>Verify that the block you have created the template for now
          uses this template.</para>
        </step>
      </procedure>

      <para>To assign different templates depending on the current module, you
      go thru the steps above creating as many block templates as you like.
      But you can only set one template for the new zone.</para>

      <para>To set a different template for a block that will show in a
      specific Module you must activate the Visual Block Editor in <menuchoice>
          <guimenu>Xanthia</guimenu>

          <guimenuitem>Configure Xanthia</guimenuitem>
        </menuchoice>.</para>

      <para>Now, go to the module where you want to change the Block Template.
      Click on the icon to open he Visual Block Editor window. Choose a
      Template from the drop down list and click submit. Remember you must
      have this block already set in the above step for this to work. (I will
      be adding the ability to Xanthia later to allow this to work even if you
      have not set the block in the above steps.)</para>

      <para>You can also use Block Control to change the Template for a block:
      <menuchoice>
          <guimenu>Xanthia</guimenu>

          <guisubmenu>View Themes</guisubmenu>

          <guisubmenu>Edit Theme</guisubmenu>

          <guimenuitem>Block Control</guimenuitem>
        </menuchoice><remark>This needs review, as I can't find it in Block
      Control. -- jn</remark></para>
    </section>

    <section id="Xanthia.User.CommonTasks.BlockZones">
      <title>add a Block Zone to your templates and make it available to Block
      Control</title>

      <procedure>
        <step>
          <title>Enter the Block Zones Administration</title>

          <para>Click on <menuchoice>
              <guimenu>Administration</guimenu>

              <guisubmenu>Xanthia</guisubmenu>

              <guisubmenu>View Themes</guisubmenu>

              <guisubmenu>Edit Theme</guisubmenu>

              <guimenuitem>Block Zones</guimenuitem>
            </menuchoice></para>
        </step>

        <step>
          <title>Create a new Block Zone</title>

          <para>Fill in the fields at the bottom of the table.</para>

          <variablelist>
            <varlistentry>
              <term>zone description</term>

              <listitem>
                <para>This can be named whatever you want.</para>
              </listitem>
            </varlistentry>

            <varlistentry>
              <term>tag to use in theme</term>

              <listitem>
                <para>This is the tag as you will use it in your theme do not
                use the <markup>&lt;!--[$NAME]--&gt;</markup> just put the
                text there.</para>
              </listitem>
            </varlistentry>
          </variablelist>

          <para>Click on Submit.</para>
        </step>

        <step>
          <para>Modify you templates to use this new Zone using the
          <markup>&lt;!--[$TAGTOUSEINTHEME ]--&gt;</markup></para>
        </step>
      </procedure>
    </section>

    <section id="Xanthia.User.CommonTasks.ShortURLs">
      <title>Implementing Short URLs</title>

      <para>Xanthia implements the commonly used Short URLs implementation
      that has been available as an addon for PostNuke for some time. This
      system requires a web server with a URL rewriting engine. For the
      commonly used apache web server this is called mod_rewrite. For other
      web servers other compatable rewrite engines are available.</para>

      <section id="Xanthia.User.CommonTasks.ShortURLs.How">
        <title>How it works?</title>

        <para>Short URLs works by taking the generated output and replacing
        each url found in this output with a given shorter url based on some
        simple pattern matching rules. The output provided to the browser now
        contains these shortend URLs. This is half the job done. The web
        server now need to translate these shortend URLs back into full urls
        used by the postnuke engine. This job is done by the rewrite engine.
        For apache a .htaccess file is placed in the PostNuke root. The
        .htaccess contains a mirror image of the patterns used earlier in the
        process.</para>

        <para>Rules are provided for a number of common modules e.g My
        eGallery, pnPHPBB2 etc. as well as general rules for all other
        modules. In addtion a number of url extension schemes are provided to
        suit the preferences of the site administrator.</para>

        <para>The specific implementation in Xanthia differs from other
        implementations by making full use of the smarty templating
        architecture on which XTE is built. Smarty provides a fearture called
        outputfilters. Output filters act on the templated output when it is
        executed. This filter type is ideal for the implementation of short
        urls and as such short urls are a smarty output filter in XTE.</para>
      </section>

      <section id="Xanthia.User.CommonTasks.ShortURLs.Implementing">
        <title>Implementing Short URLs</title>

        <para>Firstly ensure that your web server has a rewrite engine
        available. If using a rewrite engine other than apaches mod_rewrite
        then the rewrite engines script file will need to be built. If using
        apaches mod_rewrite then place the <filename>.htaccess</filename> file
        for the chosen naming scheme into the PostNuke root. These files can
        be found in <filename>modules/Xanthia/pndocs/short_urls</filename>.
        Pick the <filename>.htaccess</filename> file for your chosen extension
        and place this in the PostNuke root directory.</para>

        <para>Under Xanthia\pndocs\short_urls p Short urls will now work if
        typed into the browser so you can test at this point prior to getting
        PN to generate short urls. Now go into the xanthia admin panel and
        you'll have the option to configure shorts urls. Adding your chosen
        extension and enabled short urls.</para>

        <para>Next test the rewrite engine is functioning by visiting
        http:///yoursiteurl/user.html (or your chosen extension). If the
        rewrite engine is functioning then you will, in effect, be going to
        user.php.</para>

        <para>If the rewrite engine is functoning correctly then go to the
        Xanthia admin panel (administration-&gt;Xanthia). Select the configure
        Xanthia option and then enter your chosen extension and then enable
        the short urls option.</para>
      </section>
    </section>
  </section>

  <section id="Xanthia.User.FAQ">
    <title>Frequently Asked Questions</title>

    <qandaset>
      <qandadiv>
        <title>Errors</title>

        <qandaentry>
          <question>
            <para>Xanthia has encountered a fatal error in Zone: .... A
            required Zone template was either not found or failed to
            load.</para>
          </question>

          <answer>
            <para>The error indicates that Xanthia didn't find a template for
            a given zone. Check that template is present in the templates
            directory for your theme. Use the "PostNuke Swiss Army Knife"
            (PSAK) tool available from <ulink
            url="http://downloads.postnuke.com">http://downloads.postnuke.com</ulink>
            to change back to a known good theme.</para>
          </answer>
        </qandaentry>

        <qandaentry>
          <question>
            <para>I don't have the "<guimenuitem>short URLs</guimenuitem>"
            option in the Xanthia Configuration</para>
          </question>

          <answer>
            <para>The Xanthia Admin panel will only show the short URLs
            configuration option once you have the
            <filename>.htaccess</filename> file in place. (See <xref
            linkend="Xanthia.User.CommonTasks.ShortURLs.How" />). When the
            xanthia module is initialised it checks to see if the server is
            re-write capable but once installed there doesn't seem to be a way
            confirm that rewrite support is available. If this detection has
            failed, you'll have to edit the Database directly (using
            phpMyAdmin or a similar tool). In the table
            <filename><replaceable>&lt;prefix&gt;</replaceable>_module_vars</filename>
            locate the module variable pn_modname = Xanthia pn_name
            =shorturlsok. If it's value is 0 then set it to 1.</para>
          </answer>
        </qandaentry>
      </qandadiv>

      <qandadiv>
        <title>Blocks and Block Placement</title>

        <qandaentry>
          <question>
            <para>I activated a Xanthia theme, and now all right and center
            blocks show up on all pages!</para>
          </question>

          <answer>
            <para>By default all blocks show on all pages. To remove the
            centre block you need to go to <menuchoice>
                <guimenu>Administration</guimenu>

                <guisubmenu>Xanthia</guisubmenu>

                <guisubmenu>View Themes</guisubmenu>

                <guisubmenu>Edit Theme</guisubmenu>

                <guimenuitem>Block Control</guimenuitem>
              </menuchoice> and delete the blocks you do not want to appear
            from the list under the module. Or turn on visual block
            administration in the xanthia configuration page and remove the
            blocks by visiting each module in turn and removing the ones you
            don't want.</para>
          </answer>
        </qandaentry>

        <qandaentry>
          <question>
            <para>I added a new Block in the Block Administration, but it
            doesn't show up on any page</para>
          </question>

          <answer>
            <para>This is the same issue as above. Use <guimenuitem>Block
            Control</guimenuitem> or the Visual Block Editor to enable the
            block.</para>
          </answer>
        </qandaentry>

        <qandaentry>
          <question>
            <para>How do you add a block to the new zone and have it appear on
            all pages? The current way only appears to allow adding it to
            individual modules one at a time.</para>
          </question>

          <answer>
            <para>The only to do it currently to to add it to each module.
            When a theme is initialised all blocks are added to all modules by
            default. But after this blocks need adding to each module
            manually. This will be fxed in future releases</para>
          </answer>
        </qandaentry>

        <qandaentry>
          <question>
            <para>I want to show right blocks on the News start page, but not
            on the article pages. How do I achive this?</para>
          </question>

          <answer>
            <para>Due to the architecture of the .7x News module there is
            small hack in place in the current release of Xanthia. If you look
            under <menuchoice>
                <guimenu>Administration</guimenu>

                <guisubmenu>Xanthia</guisubmenu>

                <guisubmenu>View Themes</guisubmenu>

                <guisubmenu>Edit Theme</guisubmenu>

                <guimenuitem>Theme Settings</guimenuitem>
              </menuchoice>, you'll see an option labelled <guimenuitem>Show
            right blocks in news module (only for .7x)</guimenuitem>. This
            will turn on of off the right column for the news module.</para>

            <para>This option is necessary as the .7x news module has it's own
            internal hard-coded right blocks. The necessity for this willl be
            removed for PostNuke .8.</para>
          </answer>
        </qandaentry>
      </qandadiv>

      <qandadiv>
        <title>Design</title>

        <qandaentry>
          <question>
            <para>Wie want the start page to look different from other pages.
            How can I change the layout of the module which is set as the
            starting-module?</para>
          </question>

          <answer>
            <para>This is explained in <xref
            linkend="Xanthia.User.ModuleTemplates" /></para>
          </answer>
        </qandaentry>

        <qandaentry>
          <question>
            <para>I activated a Xanthia theme, and now my news show up in two
            columns...</para>
          </question>

          <answer>
            <para>Take a look under
            <guimenu>Administration</guimenu><guisubmenu>Xanthia</guisubmenu><guisubmenu>View
            Themes</guisubmenu><guisubmenu>Edit
            Theme</guisubmenu><guimenuitem>Theme Settings</guimenuitem> for
            the <guimenuitem>indexcol</guimenuitem> theme setting. This
            controls the number of columns. As the theme settings are defined
            on a per theme basis the language files, in some themes aren't as
            clear as they could be.</para>
          </answer>
        </qandaentry>

        <qandaentry>
          <question>
            <para>Is it possible to dynamically add output filters and have
            Xanthia recognize them?</para>
          </question>

          <answer>
            <para>At this moment, we have no possibility to add filters like
            "copy them to a directory, and activate them im an admin menu".
            You should be able add this into theme.php. After the engine is
            initialised add</para>

            <programlisting>$engine-&gt;load_filter('&lt;filtertype&gt;', '&lt;filtername&gt;');</programlisting>
          </answer>
        </qandaentry>
      </qandadiv>

      <qandadiv>
        <title>Compatibility</title>

        <qandaentry>
          <question>
            <para>Do Envolution themes work in Xanthia?</para>
          </question>

          <answer>
            <para>Envolution themes do not work in Xanthia since alot of the
            code has been rewritten to have a lot more features. You should be
            able to convert these themes to XTE very quickly though since the
            structure is simiar to Encompass themes.</para>
          </answer>
        </qandaentry>

        <qandaentry>
          <question>
            <para>Can AutoTheme coexist with Xanthia?</para>
          </question>

          <answer>
            <para>Yes it can. No problems there at all.</para>
          </answer>
        </qandaentry>
      </qandadiv>

      <qandadiv>
        <title>General</title>

        <qandaentry>
          <question>
            <para>I've heard that Xanthia Themes are much slower that
            traditional themes?</para>
          </question>

          <answer>
            <para>In fact Xanthia RC2 was not optimized for speed. A lot of
            changes were made since then to improve performance. These include
            a dramatic decrease of the number of database calls. Tests have
            shown that the current release is as almost as fast as a
            traditional theme.</para>
          </answer>
        </qandaentry>
      </qandadiv>
    </qandaset>
  </section>

  <section id="Xanthia.User.XanthiaBlock">
    <title>The "Xanthia/Display module in a block" block</title>

    <para>Xanthia ships with a block named "Display module in a block". This
    block will allow you display the output of any GUI function from any API
    compliant module.</para>

    <para>To expand on that a little (using pagesetter as the example). Take
    the pagesetter url
    <command>index.php?module=<replaceable>pagesetter</replaceable>&amp;func=<replaceable>viewpub</replaceable>&amp;tid=<replaceable>7</replaceable>&amp;pid=<replaceable>24</replaceable></command>
    and break it into a number of components. Save the block and postion as
    you like.</para>

    <variablelist>
      <varlistentry>
        <term><command>index.php</command></term>

        <listitem>
          <para>this is the entry point. All API compliant modules use
          index.php as the entry point. So you can't use this block to display
          the output from a module that uses modules.php as the entry point
          (it's not an API compliant one).</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><command>module=<replaceable>pagesetter</replaceable></command></term>

        <listitem>
          <para>this is the module name and is selected from the first box in
          the blocks configuration</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><command>func=<replaceable>viewpub</replaceable></command></term>

        <listitem>
          <para>this is the function name and is entered from the second box
          in the blocks configuration. Enter only the function name - in this
          example viewpub</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term><command>tid=<replaceable>7</replaceable>&amp;pid=<replaceable>24</replaceable></command></term>

        <listitem>
          <para>(the rest) - these are the arguments passed to the function
          and are entered in the third box. Enter the remainder of the URL as
          is minus the starting &amp; i.e. tid=7&amp;pid=24.</para>
        </listitem>
      </varlistentry>
    </variablelist>

    <para>This block only works for API compliant modules i.e. those whose url
    goes through index.php
    (<command>index.php?module=<replaceable>&lt;modname&gt;</replaceable></command>).
    The reason for this is that for older modules the module itself outputs
    the site header and footer so there's no way to get to the output of
    module itself. Newer modules we can get the module output directory and
    add it into a block.</para>

    <para>All modules in PostNuke .8 will be pnAPI compliant so the block was
    included in Xanthia with a view to PostNuke .8.</para>
  </section>
</chapter>