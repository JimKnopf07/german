<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
    <head>
        <title>PostNuke Migrationsanleitung</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
            <link rel="stylesheet" href="style.css" type="text/css" media="screen" />
            </head>

            <body>

                <h1>PostNuke .764 =&gt; Zikula 1.1.2 Migrationsanleitung</h1>

                <h2>Wichtig</h2>
                <p>
                    Dieses Dokument beinhaltet wichtige Informationen über das Zikula Application Framework. Bitte vor dem Fortfahren die Inhalte sorgfältig durchlesen! Natürlich wurde versucht hier sämtliche Informationen für eine erfolgreiche Migration aufzunehmen. Doch in unserem <a href="http://code.zikula.org/community-german/">deutschen DokuWiki</a> können Ergänzungen schneller und aktueller gepflegt werden. Daher wird empfohlen, vor einer Migration auch die dortigen Anleitungen zu sichten.
                </p>
                <p>
                    Diese Anweisungen beziehen sich auf die Migration von PostNuke zu Zikula, wofür eine spezielle <strong><a href='http://code.zikula.org/core/wiki/downloads#PostNukeMigrationDistributionbasedon1.1.2'>Migrationsdistribution</a></strong> zur Verfügung steht. Falls die vorhandene PostNuke-Version älter als .764 sein sollte, so ist unbedingt eine Aktualisierung auf PostNuke .764 (<a href='http://www.postnuke.com/module-Content-view-pid-2.html' title="The PostNuke Legacy Site">Download</a>) notwendig. Migrationen ausgehend von noch älteren PostNuke-Versionen werden nicht unterstützt.
                </p>
                <p>
                    Falls bereits eine Zikula-Version vorhanden sein sollte, so ist die <a href='upgrade_deu.html'>Zikula Standard Upgradeanleitung</a> zu nutzen.
                </p>

                <h2>Erstellen einer Testumgebung</h2>

                <p>
                    Sicherlich ist die Erstellung einer Testumgebung zeitraubend und mit viel Aufwand verbunden. Doch es ist die beste Möglichkeit eine Migration zu testen, bevor man sich an das Echtsystem wagt.
                </p>
                <p>
                    Testumgebungen können z.B. mittels lokalem Webserver (z.B. XAMPP) oder in einem Unterverzeichnis auf dem Webserver eingerichtet werden. Falls der aktuelle Webserver genutzt wird, kann man auch die vorhandene Datenbank weiternutzen. Jedoch sollte man darauf achten, für die Testumgebung einen anderen Tabellenpräfix auszuwählen, damit die Tabellen der verschiedenen Installationen nicht miteinander kollidieren. Dies ist ein manueller Vorgang und sollte sehr sorgfältig durchgeführt werden.
                </p>

                <h2 id="Upgrade764">1 Aktualisierung von PostNuke v0.764</h2>
                <p>
                    Bitte die folgenden Schritte in der aufgeführten Reihenfolge abarbeiten und die jeweilige Beschreibung vorab gründlich durchlesen. Werden die Anweisungen befolgt, sollten keine Probleme auftreten.
                </p>
                <ul>
                    <li><a href="#Backup">1.1 Datenbank und Dateisystem sichern</a></li>
                    <li><a href="#Prepare">1.2 v0.7x Installation vorbereiten</a></li>
                    <li><a href="#Config">1.3 config.php aktualisieren</a></li>
                    <li><a href="#Run">1.4 Upgrade durchführen</a></li>
                    <li><a href="#Clean">1.5 Aufräumarbeiten</a></li>
                </ul>

                <h3 id="Backup">1.1 Datenbank und Dateisystem sichern</h3>
                <p>
                    Vor dem Upgrade ist es sehr wichtig, ein Backup der v0.7x Datenbank, sowie des Dateisystems anzulegen. Einmal vorgenommene Aktualisierungen können nicht rückgängig gemacht werden, wenn keine Datensicherung vorliegt.
                    Eine Sicherung der Datenbank kann beispielsweise über die Tools <a href="http://www.mysqldumper.de/">MySQLDumper</a>, <a href="http://www.phpmyadmin.org">phpMyAdmin</a> oder alternativ über SSH durchgeführt werden.
                    Tiefergehende Anleitungen zum Sichern der Datenbanken gibt es zuhauf im Internet und in den Dokumentationen der oben genannten Tools.
                </p>

                <h3 id="Prepare">1.2 V0.7x Installation vorbereiten</h3>
                <p>Als Administrator in der PostNuke-Seite anmelden und unbedingt sicherstellen, dass die folgenden Module installiert und aktiviert sind:</p>

                <ol>
                    <li>Admin</li>
                    <li>Admin_Messages</li>
                    <li>Blocks</li>
                    <li>Groups</li>
                    <li>Header_Footer</li>
                    <li>legal</li>
                    <li>Mailer</li>
                    <li>Modules</li>
                    <li>Permissions</li>
                    <li>pnRender</li>
                    <li>Search</li>
                    <li>Settings</li>
                    <li>User</li>
                    <li>Xanthia</li>
                    <li>Your_Account</li>
                </ol>

                <p>Weitere Module sind optional, da der Core von Zikula auf die notwendigsten Module eingeschränkt wurde. Die sonstigen Module aus einer alten PostNuke-Installation können später getrennt von der Upgraderoutine aktualisiert werden. Dafür steht unter anderem das Paket mit den ValueAddons (Download unter code.zikula.org/core) zur Verfügung. Sobald dieser Schritt abgeschlossen wurde, kann die Datenbank aktualisiert werden.</p>
                <p>Löschen Sie schlussendlich alle Dateien der PostNuke v.07x-Installation, da die Dateistruktur in Zikula enorm verändert wurde. Vorsichtshalber können die Dateien temporär in ein Backup-Verzeichnis ausserhalb der Installation verschoben werden, aus welchen vereinzelt Dateien (Bilder, Downloads, Module, Themes oder Plugins) nach dem erfolgtem Upgrade zurückgesichert werden können. Nachdem sämtliche .7x-Dateien entfernt wurden, können die Dateien von Zikula hochgeladen werden. Bitte beachtem dass das pnTemp-Verzeichnis inkl. Unterverzeichnisse beschreibbar gemacht werden muss (chmod -R 777).</p>
                <p>Einige Provider verbieten spezielle Parameter in der Datei .htaccess. Falls beim Aufruf der Seiten der Fehler "500 Internal Server Error" erscheinen sollte, so kann die Datei gefahrlos gelöscht werden. Die benötigten Konfigurationen könnte (abhängig vom Provider) auch über die php.ini definiert werden. Bitte dann den Provider auf die Möglichkeiten der Deaktivierung von <em>register_globals</em> und <em>magic_quotes_gpc</em> ansprechen. Alternativ einen Blick in das deutsche Doku-Wiki werfen.</p>

                <h3 id="Config">1.3 config.php aktualisieren</h3>
                <p>Der Speicherort der config.php wurde in das Verzeichnis /config verschoben. In der mitgelieferten Originaldatei müssen in folgende Zeilen die Zugangsdaten für die Datenbank manuell eingepflegt werden:</p>

<pre>$PNConfig['System']['prefix']
$PNConfig['DBInfo']['default']['dbuname']
$PNConfig['DBInfo']['default']['dbpass']
$PNConfig['DBInfo']['default']['dbname']</pre>

                <p>Weiterhin sollte die folgende Zeile angepasst werden:</p>
                <pre>$PNConfig['System']['installed'] = 1;</pre>

                <p>Wurden verschlüsselte Werte aus der config.php von PostNuke eingefügt, muss folgende Zeile abgeändert werden:</p>
                <pre>$PNConfig['DBInfo']['default']['encoded'] = 1;</pre>

                <p>Wenn nicht mit den Standardwerten gearbeitet wird, wird es in einigen Fällen auch notwendig sein, den Datenbanktyp, Table und Host zu bearbeiten. Das ist jedoch eher die Ausnahme und unter anderem auch Providerabhängig.</p>

                <h3 id="Run">1.4 Upgrade durchführen</h3>
                <p>Um die Datenbank zu aktualisieren muss die Datei upgrade.php im Browser aufgerufen werden. Hier werden auch Benutzername und Kennwort der vorhandenen PostNuke-Installation benötigt. Danach müssen nur noch die Anweisungen in dem Skript befolgt werden.</p>

                <dl>
                    <dt><strong>Hinweis 1:</strong></dt>
                    <dd>Zikula entfernt die Fußnachricht (Footer) aus der Admin-Oberfläche. Somit wird eine vorhandene Footer-Nachricht anschließend verschwinden. Es wird empfohlen mögliche Footer-Nachrichten im Theme fest zu integrieren. Der Inhalt der alten Nachricht wird in einer Datei im pnTemp-Verzeichnis abgelegt.</dd>
                    <dt><strong>Hinweis 2:</strong></dt>
                    <dd>Aus Performancegründen sind seit Zikula v1.0 keine Benutzerzugriffsrechte mehr möglich. Es wird empfohlen die Benutzer in einer Gruppe aufzunehmen und darüber die Zugriffsrechte zu verwalten.</dd>

                    <dt><strong>Hinweis 3:</strong></dt>
                    <dd>Bitte im Modul "Einstellungen" sicherstellen, dass beim "Startmodul" auch ein Modul ausgewählt ist, welches in der Distribution vorhanden ist (z.B. News, Umfragen, Suche). Ansonsten kann es nach der Migration zu einem Fehler kommen, da das ausgewählte Modul nicht vorhanden ist. Diese Einstellung kann natürlich nach der erfolgreichen Migration wieder auf ein beliebiges Modul zurückgeändert werden.</dd>
                </dl>

                <h3 id="Clean">1.5 Aufräumarbeiten</h3>
                <p>Abschließend müssen die Dateien upgrade.php, install.php und das Install-Verzeichnis aus dem Dateisystem entfernt werden.</p>
                <p><strong>Themes:</strong> Es kann sein, dass das PostNuke-Theme nicht mehr mit Zikula kompatibel ist. Falls vorher ein Xanthia 2.0-Theme eingesetzt wurde, so kann es ohne große Probleme im Theme-Modul konvertiert werden. Weitere Informationen dazu im Abschnitt "Themes" der <a href="upgrade_deu.html#Themes">Standard Upgradeanleitung</a>. Ansonsten kann es durch ein neues Theme aus unserer großen <a href="http://community.zikula.org/module-Extensions-view-ot-component-comptype-2.htm">Theme-Datenbank</a> ersetzt werden.</p>

                <h3 id="Final">1.6 Abschlussbemerkung</h3>
                <p>Herzlichen Glückwunsch. Das Upgrade ist vollständig durchgeführt. Wir wünschen viel Spaß mit der neuen Zikula-Version.</p>

                <p>
                    <strong>Das deutsche Zikula-Team <br /><a href="http://zikula.de/">zikula.de</a></strong>
                    </p>

                </body>
            </html>
